var Accordion=function(){this.init=function(){this.bindListeners();$(".accordion-item-content").first().show()};this.bindListeners=function(){$(".accordion-item-header").on("click",function(e){e.preventDefault();$(this).siblings(".accordion-item-content").toggle()})};this.init()};var AjaxWatch=function(){var l;var u;var c={};this.init=function(){l=this.getCurrentTime();u=this};this.getCurrentTime=function(){return(Date.now?Date.now():(new Date).getTime())/1e3};this.getRequests=function(){return c};this.ajaxBefore=function(e,t){c[t.url]={order:Object.keys(c).length+1,startTime:(u.getCurrentTime()-l).toFixed(2),endTime:null,method:t.type,async:t.async,crossDomain:t.crossDomain}};this.ajaxSuccess=function(e,t,n,r){if(typeof c[r.url]=="object"){var i=jQuery.extend({},e);i.snippets=typeof i.snippets=="object";c[r.url].payload=i;c[r.url].endTime=(u.getCurrentTime()-l).toFixed(2)}else{c[r.url]="unregistered "+r.type+"request (received in time "+(u.getCurrentTime()-l)+")"}};this.ajaxError=function(e,t,n,r){var i=e.getAllResponseHeaders();if(n.indexOf("aborted")>-1||e.status+""==="0"){if(typeof c[r.url]=="object"){c[r.url].endTime=(u.getCurrentTime()-l).toFixed(2);c[r.url].aborted=true}return}var o=[];$("[data-role=url-whitelist]").each(function(){$.each($(this).data(),function(e,t){if(e.indexOf("Url")!=-1){o.push(t)}})});if(o.indexOf(r.url)!=-1){return}var a="/log/";var s=i.substring(i.indexOf(a)+a.length);throw new Error("Ajax error #"+e.status+" on "+r.url+" (saved in "+s+")")};this.init()};var Alerts=function(){this.init=function(){$(".alert").each(function(){if($(this).data("init")){return}$(this).data("init",true);if($(this).data("hideable")===undefined){$(this).data("hideable",$(this).hasClass("alert-hidden"))}});$(".alert-close").each(function(){if($(this).data("init")){return}$(this).data("init",true);$(this).on("click",function(e){e.preventDefault();var t=$(this).closest(".alert");t.addClass("alert-removed");if(t.data("hideable")){setTimeout(function(){t.addClass("alert-hidden").removeClass("alert-removed")},100)}if(!t.hasClass("alert-noremove")){setTimeout(function(){t.remove()},1e3)}})})};this.init()};var AsyncHref=function(){this.init=function(){$("[data-href]").each(function(){$(this).attr("href",$(this).data("href"));$(this).attr("data-href",null)})};this.init()};var DisableButton=function(){if($(".btn.disabled").length){$(".btn.disabled").on("click",function(e){if(!$(this).hasClass("disabled")){return}e.preventDefault()})}$(".btn").on("click",function(e){if($(this).hasClass("btn-loading")){e.preventDefault()}})};var Drop=function(){var r;this.init=function(){if(!$(".drop-here").length){return}this.bindInitListeners();r=this};this.bindInitListeners=function(){$("body").dragster({enter:this.blur,leave:this.unblur});$("body").on("dragster:drop",function(e,t){r.unblur();var n=r.getDataTransfer(t);if(n.files&&n.files.length){t.preventDefault();t.stopPropagation();$(document).trigger("addFiles",[n.files])}})};this.getDataTransfer=function(e){return e.dataTransfer||e.originalEvent.dataTransfer};this.containFiles=function(e){if(e instanceof DOMStringList){return e.contains("Files")}else if(e.indexOf("Files")>-1){return true}else if(e.indexOf("com.apple.pasteboard.promised-file-url")>-1){$(document).trigger("osxPhotosDrag")}return false};this.blur=function(e,t){if(!r.containFiles(r.getDataTransfer(t).types)){return false}$(".drop-here").addClass("active");$(".blur").addClass("active")};this.unblur=function(){$(".drop-here").removeClass("active");$(".blur").removeClass("active")}};var Form=function(){this.init=function(){$("input[required], select[required], textarea[required]").each(function(){$(this).closest(".control-group").addClass("control-required")});if($(".select").length){$(".select").selectBoxIt({autoWidth:false,copyClasses:"container"})}};this.init()};var FormOnchange=function(){var t;var n={values:{},changed:[]};this.init=function(){t=this;$(".js-form-onchange-save input, .js-form-onchange-save select").each(function(){if(this.type!="hidden"&&this.type!="submit"){if(this.type=="checkbox"){n.values[this.name]=$(this).prop("checked")}else{n.values[this.name]=this.value}}});if(".js-form-onchange-save".length){this.bindInitListeners();new DisableButton}};this.bindInitListeners=function(){$(".js-form-onchange-save input").on("keyup",function(e){if(e.which==9){return}if(this.value.localeCompare(n.values[this.name])==0){t.unchange(this.name)}else{t.change(this.name)}});$(".js-form-onchange-save select").on("change",function(){if(n.values[this.name]==this.value){t.unchange(this.name)}else{t.change(this.name)}});$(".js-form-onchange-save [type=checkbox]").on("change",function(){if($(this).prop("checked")==n.values[this.name]){t.unchange(this.name)}else{t.change(this.name)}})};this.change=function(e){if(n.changed.indexOf(e)>-1){return}if(n.changed.length==0){$(".js-form-onchange-save [type=submit]").removeClass("disabled")}n.changed.push(e)};this.unchange=function(e){if(n.changed.indexOf(e)==-1){return}if(n.changed.length==1){$(".js-form-onchange-save [type=submit]").addClass("disabled");new DisableButton}n.changed.splice(n.changed.indexOf(e),1)};this.init()};var MatchHeight=function(){if($(".equal-height-item").length){$(".equal-height-item").matchHeight()}};var Navigation=function(){if($(".navigation-trigger").length){$(".navigation-trigger").on("click",function(e){e.preventDefault();$(this).toggleClass("navigation-trigger-active");$(".navigation").toggleClass("navigation-active").slideToggle()})}};var Popup=function(e){var o=this;var a={closeMarkup:'<div title="%title%" class="popup-close js-close-popup"><span class="icon-times"></span></div>'};this.init=function(){if($(".js-open-popup-inline").length){o.open("inline")}if($(".js-open-popup-image").length){o.open("image")}if($(".js-open-popup-ajax").length){o.open("ajax")}$(document).on("click",".js-close-popup",function(e){e.preventDefault();o.close()});if($("[data-open-popup]").length){$("[data-open-popup]").each(function(){$(this).removeAttr("data-open-popup");if($(this).attr("href")){var e=function(){};if($(this).data("openPopupCallback")){e=cb.getNamedCallback($(this).data("openPopupCallback"))}var t=function(){};if($(this).data("closePopupCallback")){t=cb.getNamedCallback($(this).data("closePopupCallback"))}o.initialOpenAjax($(this).attr("href"),e,t)}else{var n=$("#"+$(this).attr("id"));o.initialOpen(n)}})}this.bindOpenAjaxPopup()};this.bindBypassPopupListeners=function(){$(".bypass-close-popup").on("click",function(){$.magnificPopup.instance.close()})};this.bindOpenAjaxPopup=function(){$("a.open-ajax-popup").on("click",function(e){e.preventDefault();var t=function(){};var n=this;if($(this).data("openPopupCallback")){t=function(){cb.getNamedCallback($(n).data("openPopupCallback")).apply(this,[$(n)])}}o.initialOpenAjax($(this).attr("href"),t)})};this.initialOpen=function(e){$.magnificPopup.open({items:{src:e,type:"inline"},callbacks:{open:function(){new MatchHeight}},modal:e.data("popup-modal")?true:false,focus:"[autofocus]",closeMarkup:a.closeMarkup})};this.initialOpenAjax=function(e,t,n,r){if(t===undefined){t=function(){}}if(n===undefined){n=function(){}}if(r===undefined){r=true}var i=t;t=function(){i.apply(this);new MatchHeight;o.bindBypassPopupListeners();if($(".popup-confirm[data-role=auth-popup]").length){cb.getNamedCallback("initAuthPopup").apply()}};$.magnificPopup.open({items:{type:"ajax",src:e},tLoading:MESSAGES.placeholders.popupLoading,tClose:MESSAGES.placeholders.popupClose,focus:"[autofocus]",closeMarkup:a.closeMarkup,modal:!r,callbacks:{open:function(){new MatchHeight},ajaxContentAdded:t,close:n}})};this.open=function(r){$(".js-open-popup-"+r).each(function(){var e=$(this).attr("href");var t=$(e).data("popup-modal");var n=!$(this).hasClass("popup-uncloseable");if(!n){t=true}$(this).magnificPopup({type:r,closeMarkup:a.closeMarkup,modal:t?true:false,focus:"[autofocus]",callbacks:{open:function(){$(".blur").addClass("active");new MatchHeight;$(document).on("click",".popup-close",function(e){e.preventDefault();$.magnificPopup.close()})},close:function(){$(".blur").removeClass("active")}}})})};this.close=function(){$.magnificPopup.close()};if(e===undefined){this.init()}};var ProtectEmail=function(){this.init=function(){this.bindInitListeners()};this.bindInitListeners=function(){$(".protected-email").each(function(){var e=atob($(this).data("firstPart"))+"@"+atob($(this).data("secondPart"));var t,n;var r=false;var i=$(this).data("moveToAttribute");if(i){if(i=="mailto"){t="href";n="mailto:"+e}else{t=i;n=e;r=true}$(this).parent().attr(t,n)}if(r){$(this).remove()}else{$(this).replaceWith(e)}})};this.init()};var Tabs=function(){var t;this.init=function(){t=this;$(".tabs-nav li a").each(function(){if($(this).data("init")){return}$(this).data("init",true);$(this).on("click",function(e){e.preventDefault();t.changeTab($(this),$(this).closest(".tabs-nav").data("group"))})})};this.changeTab=function(e,t){var n=e.attr("href");$(".tabs-nav li.active").removeClass("active");e.parent().addClass("active");$('[data-group="'+t+'"]').find(".tab.active").removeClass("active");$(n).addClass("active")};this.init()};var TogglePassword=function(){$(".toggle-password").on("click",function(e){e.preventDefault();var t=$(this).closest(".control-group").find("input");var n=$(this).find('[class*="icon-"]');t.attr("type",t.attr("type")=="password"?"text":"password");n.toggleClass("icon-eye icon-eye-slash")})};var Tooltips=function(){var n;this.init=function(){n=this;if($("[data-tooltipster-title]").length){$("[data-tooltipster-title]").each(function(){var e=$(this).data("tooltipsterPosition");$(this).tooltipster({content:$(this).data("tooltipsterTitle"),position:e?e:"top"})})}if($("[data-tooltipster-source]").length){$("[data-tooltipster-source]").each(function(){var e=$(this);var t=e.siblings(e.data("tooltipsterSource")).detach();$(this).tooltipster({content:t.text(),position:"top"})})}};this.showTooltip=function(e,t){e.tooltipster({content:t,position:"right",trigger:"custom",onlyOne:true,functionReady:function(){setTimeout(function(){if(e.data("tooltipster-ns")){e.tooltipster("destroy")}},n.getMessageDisplaySeconds(t)*1e3)}}).tooltipster("show")};this.getMessageDisplaySeconds=function(e){var t=e.replace(/\s+/gi,"").length;if(t<25){return 2}else if(t<40){return 3}else if(t<60){return 4}else{return 5}};this.init()};(function(q,X,i){var e="tooltipster",l={animation:"fade",arrow:true,arrowColor:"",autoClose:true,content:null,contentAsHTML:false,contentCloning:true,debug:false,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:false,icon:"(?)",iconCloning:true,iconDesktop:false,iconTouch:false,iconTheme:"tooltipster-icon",interactive:false,interactiveTolerance:350,multiple:false,offsetX:0,offsetY:0,onlyOne:false,position:"top",positionTracker:false,positionTrackerCallback:function(e){if(this.option("trigger")=="hover"&&this.option("autoClose")){this.hide()}},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};function u(e,t){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=q(e);this.$elProxy;this.elProxyPosition;this.enabled=true;this.options=q.extend({},l,t);this.mouseIsOverProxy=false;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.Status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}u.prototype={_init:function(){var e=this;if(i.querySelector){var t=null;if(e.$el.data("tooltipster-initialTitle")===undefined){t=e.$el.attr("title");if(t===undefined)t=null;e.$el.data("tooltipster-initialTitle",t)}if(e.options.content!==null){e._content_set(e.options.content)}else{e._content_set(t)}var n=e.options.functionInit.call(e.$el,e.$el,e.Content);if(typeof n!=="undefined")e._content_set(n);e.$el.removeAttr("title").addClass("tooltipstered");if(!c&&e.options.iconDesktop||c&&e.options.iconTouch){if(typeof e.options.icon==="string"){e.$elProxy=q('<span class="'+e.options.iconTheme+'"></span>');e.$elProxy.text(e.options.icon)}else{if(e.options.iconCloning)e.$elProxy=e.options.icon.clone(true);else e.$elProxy=e.options.icon}e.$elProxy.insertAfter(e.$el)}else{e.$elProxy=e.$el}if(e.options.trigger=="hover"){e.$elProxy.on("mouseenter."+e.namespace,function(){if(!o()||e.options.touchDevices){e.mouseIsOverProxy=true;e._show()}}).on("mouseleave."+e.namespace,function(){if(!o()||e.options.touchDevices){e.mouseIsOverProxy=false}});if(c&&e.options.touchDevices){e.$elProxy.on("touchstart."+e.namespace,function(){e._showNow()})}}else if(e.options.trigger=="click"){e.$elProxy.on("click."+e.namespace,function(){if(!o()||e.options.touchDevices){e._show()}})}}},_show:function(){var e=this;if(e.Status!="shown"&&e.Status!="appearing"){if(e.options.delay){e.timerShow=setTimeout(function(){if(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy){e._showNow()}},e.options.delay)}else e._showNow()}},_showNow:function(l){var u=this;u.options.functionBefore.call(u.$el,u.$el,function(){if(u.enabled&&u.Content!==null){if(l)u.callbacks.show.push(l);u.callbacks.hide=[];clearTimeout(u.timerShow);u.timerShow=null;clearTimeout(u.timerHide);u.timerHide=null;if(u.options.onlyOne){q(".tooltipstered").not(u.$el).each(function(e,t){var o=q(t),n=o.data("tooltipster-ns");q.each(n,function(e,t){var n=o.data(t),r=n.status(),i=n.option("autoClose");if(r!=="hidden"&&r!=="disappearing"&&i){n.hide()}})})}var e=function(){u.Status="shown";q.each(u.callbacks.show,function(e,t){t.call(u.$el)});u.callbacks.show=[]};if(u.Status!=="hidden"){var t=0;if(u.Status==="disappearing"){u.Status="appearing";if(f()){u.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+u.options.animation+"-show");if(u.options.speed>0)u.$tooltip.delay(u.options.speed);u.$tooltip.queue(e)}else{u.$tooltip.stop().fadeIn(e)}}else if(u.Status==="shown"){e()}}else{u.Status="appearing";var t=u.options.speed;u.bodyOverflowX=q("body").css("overflow-x");q("body").css("overflow-x","hidden");var n="tooltipster-"+u.options.animation,r="-webkit-transition-duration: "+u.options.speed+"ms; -webkit-animation-duration: "+u.options.speed+"ms; -moz-transition-duration: "+u.options.speed+"ms; -moz-animation-duration: "+u.options.speed+"ms; -o-transition-duration: "+u.options.speed+"ms; -o-animation-duration: "+u.options.speed+"ms; -ms-transition-duration: "+u.options.speed+"ms; -ms-animation-duration: "+u.options.speed+"ms; transition-duration: "+u.options.speed+"ms; animation-duration: "+u.options.speed+"ms;",i=u.options.minWidth?"min-width:"+Math.round(u.options.minWidth)+"px;":"",o=u.options.maxWidth?"max-width:"+Math.round(u.options.maxWidth)+"px;":"",a=u.options.interactive?"pointer-events: auto;":"";u.$tooltip=q('<div class="tooltipster-base '+u.options.theme+'" style="'+i+" "+o+" "+a+" "+r+'"><div class="tooltipster-content"></div></div>');if(f())u.$tooltip.addClass(n);u._content_insert();u.$tooltip.appendTo("body");u.reposition();u.options.functionReady.call(u.$el,u.$el,u.$tooltip);if(f()){u.$tooltip.addClass(n+"-show");if(u.options.speed>0)u.$tooltip.delay(u.options.speed);u.$tooltip.queue(e)}else{u.$tooltip.css("display","none").fadeIn(u.options.speed,e)}u._interval_set();q(X).on("scroll."+u.namespace+" resize."+u.namespace,function(){u.reposition()});if(u.options.autoClose){q("body").off("."+u.namespace);if(u.options.trigger=="hover"){if(c){setTimeout(function(){q("body").on("touchstart."+u.namespace,function(){u.hide()})},0)}if(u.options.interactive){if(c){u.$tooltip.on("touchstart."+u.namespace,function(e){e.stopPropagation()})}var s=null;u.$elProxy.add(u.$tooltip).on("mouseleave."+u.namespace+"-autoClose",function(){clearTimeout(s);s=setTimeout(function(){u.hide()},u.options.interactiveTolerance)}).on("mouseenter."+u.namespace+"-autoClose",function(){clearTimeout(s)})}else{u.$elProxy.on("mouseleave."+u.namespace+"-autoClose",function(){u.hide()})}if(u.options.hideOnClick){u.$elProxy.on("click."+u.namespace+"-autoClose",function(){u.hide()})}}else if(u.options.trigger=="click"){setTimeout(function(){q("body").on("click."+u.namespace+" touchstart."+u.namespace,function(){u.hide()})},0);if(u.options.interactive){u.$tooltip.on("click."+u.namespace+" touchstart."+u.namespace,function(e){e.stopPropagation()})}}}}if(u.options.timer>0){u.timerHide=setTimeout(function(){u.timerHide=null;u.hide()},u.options.timer+t)}}})},_interval_set:function(){var n=this;n.checkInterval=setInterval(function(){if(q("body").find(n.$el).length===0||q("body").find(n.$elProxy).length===0||n.Status=="hidden"||q("body").find(n.$tooltip).length===0){if(n.Status=="shown"||n.Status=="appearing")n.hide();n._interval_cancel()}else{if(n.options.positionTracker){var e=n._repositionInfo(n.$elProxy),t=false;if(r(e.dimension,n.elProxyPosition.dimension)){if(n.$elProxy.css("position")==="fixed"){if(r(e.position,n.elProxyPosition.position))t=true}else{if(r(e.offset,n.elProxyPosition.offset))t=true}}if(!t){n.reposition();n.options.positionTrackerCallback.call(n,n.$el)}}}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(e){if(typeof e==="object"&&e!==null&&this.options.contentCloning){e=e.clone(true)}this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");if(typeof e.Content==="string"&&!e.options.contentAsHTML){t.text(e.Content)}else{t.empty().append(e.Content)}},_update:function(e){var t=this;t._content_set(e);if(t.Content!==null){if(t.Status!=="hidden"){t._content_insert();t.reposition();if(t.options.updateAnimation){if(f()){t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!="hidden"){t.$tooltip.removeClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!=="hidden"){t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})}},t.options.speed)}},t.options.speed)}else{t.$tooltip.fadeTo(t.options.speed,.5,function(){if(t.Status!="hidden"){t.$tooltip.fadeTo(t.options.speed,1)}})}}}}else{t.hide()}},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(false),width:e.outerWidth(false)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(e){var n=this;if(e)n.callbacks.hide.push(e);n.callbacks.show=[];clearTimeout(n.timerShow);n.timerShow=null;clearTimeout(n.timerHide);n.timerHide=null;var t=function(){q.each(n.callbacks.hide,function(e,t){t.call(n.$el)});n.callbacks.hide=[]};if(n.Status=="shown"||n.Status=="appearing"){n.Status="disappearing";var r=function(){n.Status="hidden";if(typeof n.Content=="object"&&n.Content!==null){n.Content.detach()}n.$tooltip.remove();n.$tooltip=null;q(X).off("."+n.namespace);q("body").off("."+n.namespace).css("overflow-x",n.bodyOverflowX);q("body").off("."+n.namespace);n.$elProxy.off("."+n.namespace+"-autoClose");n.options.functionAfter.call(n.$el,n.$el);t()};if(f()){n.$tooltip.clearQueue().removeClass("tooltipster-"+n.options.animation+"-show").addClass("tooltipster-dying");if(n.options.speed>0)n.$tooltip.delay(n.options.speed);n.$tooltip.queue(r)}else{n.$tooltip.stop().fadeOut(n.options.speed,r)}}else if(n.Status=="hidden"){t()}return n},show:function(e){this._showNow(e);return this},update:function(e){return this.content(e)},content:function(e){if(typeof e==="undefined"){return this.Content}else{this._update(e);return this}},reposition:function(){var e=this;if(q("body").find(e.$tooltip).length!==0){e.$tooltip.css("width","");e.elProxyPosition=e._repositionInfo(e.$elProxy);var t=null,n=q(X).width(),r=e.elProxyPosition,i=e.$tooltip.outerWidth(false),o=e.$tooltip.innerWidth()+1,a=e.$tooltip.outerHeight(false);if(e.$elProxy.is("area")){var s=e.$elProxy.attr("shape"),l=e.$elProxy.parent().attr("name"),u=q('img[usemap="#'+l+'"]'),c=u.offset().left,f=u.offset().top,d=e.$elProxy.attr("coords")!==undefined?e.$elProxy.attr("coords").split(","):undefined;if(s=="circle"){var p=parseInt(d[0]),h=parseInt(d[1]),m=parseInt(d[2]);r.dimension.height=m*2;r.dimension.width=m*2;r.offset.top=f+h-m;r.offset.left=c+p-m}else if(s=="rect"){var p=parseInt(d[0]),h=parseInt(d[1]),v=parseInt(d[2]),g=parseInt(d[3]);r.dimension.height=g-h;r.dimension.width=v-p;r.offset.top=f+h;r.offset.left=c+p}else if(s=="poly"){var y=[],b=[],w=0,_=0,S=0,x=0,E="even";for(var C=0;C<d.length;C++){var k=parseInt(d[C]);if(E=="even"){if(k>S){S=k;if(C===0){w=S}}if(k<w){w=k}E="odd"}else{if(k>x){x=k;if(C==1){_=x}}if(k<_){_=k}E="even"}}r.dimension.height=x-_;r.dimension.width=S-w;r.offset.top=f+_;r.offset.left=c+w}else{r.dimension.height=u.outerHeight(false);r.dimension.width=u.outerWidth(false);r.offset.top=f;r.offset.left=c}}var T=0,P=0,O=0,$=parseInt(e.options.offsetY),F=parseInt(e.options.offsetX),I=e.options.position;function D(){var e=q(X).scrollLeft();if(T-e<0){t=T-e;T=e}if(T+i-e>n){t=T-(n+e-i);T=n+e-i}}function j(e,t){if(r.offset.top-q(X).scrollTop()-a-$-12<0&&t.indexOf("top")>-1){I=e}if(r.offset.top+r.dimension.height+a+12+$>q(X).scrollTop()+q(X).height()&&t.indexOf("bottom")>-1){I=e;O=r.offset.top-a-$-12}}if(I=="top"){var A=r.offset.left+i-(r.offset.left+r.dimension.width);T=r.offset.left+F-A/2;O=r.offset.top-a-$-12;D();j("bottom","top")}if(I=="top-left"){T=r.offset.left+F;O=r.offset.top-a-$-12;D();j("bottom-left","top-left")}if(I=="top-right"){T=r.offset.left+r.dimension.width+F-i;O=r.offset.top-a-$-12;D();j("bottom-right","top-right")}if(I=="bottom"){var A=r.offset.left+i-(r.offset.left+r.dimension.width);T=r.offset.left-A/2+F;O=r.offset.top+r.dimension.height+$+12;D();j("top","bottom")}if(I=="bottom-left"){T=r.offset.left+F;O=r.offset.top+r.dimension.height+$+12;D();j("top-left","bottom-left")}if(I=="bottom-right"){T=r.offset.left+r.dimension.width+F-i;O=r.offset.top+r.dimension.height+$+12;D();j("top-right","bottom-right")}if(I=="left"){T=r.offset.left-F-i-12;P=r.offset.left+F+r.dimension.width+12;var B=r.offset.top+a-(r.offset.top+r.dimension.height);O=r.offset.top-B/2-$;if(T<0&&P+i>n){var U=parseFloat(e.$tooltip.css("border-width"))*2,L=i+T-U;e.$tooltip.css("width",L+"px");a=e.$tooltip.outerHeight(false);T=r.offset.left-F-L-12-U;B=r.offset.top+a-(r.offset.top+r.dimension.height);O=r.offset.top-B/2-$}else if(T<0){T=r.offset.left+F+r.dimension.width+12;t="left"}}if(I=="right"){T=r.offset.left+F+r.dimension.width+12;P=r.offset.left-F-i-12;var B=r.offset.top+a-(r.offset.top+r.dimension.height);O=r.offset.top-B/2-$;if(T+i>n&&P<0){var U=parseFloat(e.$tooltip.css("border-width"))*2,L=n-T-U;e.$tooltip.css("width",L+"px");a=e.$tooltip.outerHeight(false);B=r.offset.top+a-(r.offset.top+r.dimension.height);O=r.offset.top-B/2-$}else if(T+i>n){T=r.offset.left-F-i-12;t="right"}}if(e.options.arrow){var M="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1){var R=e.$tooltip.css("background-color")}else{var R=e.options.arrowColor}if(!t){t=""}else if(t=="left"){M="tooltipster-arrow-right";t=""}else if(t=="right"){M="tooltipster-arrow-left";t=""}else{t="left:"+Math.round(t)+"px;"}if(I=="top"||I=="top-left"||I=="top-right"){var N=parseFloat(e.$tooltip.css("border-bottom-width")),W=e.$tooltip.css("border-bottom-color")}else if(I=="bottom"||I=="bottom-left"||I=="bottom-right"){var N=parseFloat(e.$tooltip.css("border-top-width")),W=e.$tooltip.css("border-top-color")}else if(I=="left"){var N=parseFloat(e.$tooltip.css("border-right-width")),W=e.$tooltip.css("border-right-color")}else if(I=="right"){var N=parseFloat(e.$tooltip.css("border-left-width")),W=e.$tooltip.css("border-left-color")}else{var N=parseFloat(e.$tooltip.css("border-bottom-width")),W=e.$tooltip.css("border-bottom-color")}if(N>1){N++}var H="";if(N!==0){var z="",Q="border-color: "+W+";";if(M.indexOf("bottom")!==-1){z="margin-top: -"+Math.round(N)+"px;"}else if(M.indexOf("top")!==-1){z="margin-bottom: -"+Math.round(N)+"px;"}else if(M.indexOf("left")!==-1){z="margin-right: -"+Math.round(N)+"px;"}else if(M.indexOf("right")!==-1){z="margin-left: -"+Math.round(N)+"px;"}H='<span class="tooltipster-arrow-border" style="'+z+" "+Q+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var J='<div class="'+M+' tooltipster-arrow" style="'+t+'">'+H+'<span style="border-color:'+R+';"></span></div>';e.$tooltip.append(J)}e.$tooltip.css({top:Math.round(O)+"px",left:Math.round(T)+"px"})}return e},enable:function(){this.enabled=true;return this},disable:function(){this.hide();this.enabled=false;return this},destroy:function(){var n=this;n.hide();if(n.$el[0]!==n.$elProxy[0]){n.$elProxy.remove()}n.$el.removeData(n.namespace).off("."+n.namespace);var e=n.$el.data("tooltipster-ns");if(e.length===1){var t=null;if(n.options.restoration==="previous"){t=n.$el.data("tooltipster-initialTitle")}else if(n.options.restoration==="current"){t=typeof n.Content==="string"?n.Content:q("<div></div>").append(n.Content).html()}if(t){n.$el.attr("title",t)}n.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else{e=q.grep(e,function(e,t){return e!==n.namespace});n.$el.data("tooltipster-ns",e)}return n},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){if(typeof t=="undefined")return this.options[e];else{this.options[e]=t;return this}},status:function(){return this.Status}};q.fn[e]=function(){var r=arguments;if(this.length===0){if(typeof r[0]==="string"){var e=true;switch(r[0]){case"setDefaults":q.extend(l,r[1]);break;default:e=false;break}if(e)return true;else return this}else{return this}}else{if(typeof r[0]==="string"){var i="#*$~&";this.each(function(){var e=q(this).data("tooltipster-ns"),t=e?q(this).data(e[0]):null;if(t){if(typeof t[r[0]]==="function"){var n=t[r[0]](r[1],r[2])}else{throw new Error('Unknown method .tooltipster("'+r[0]+'")')}if(n!==t){i=n;return false}}else{throw new Error("You called Tooltipster's \""+r[0]+'" method on an uninitialized element')}});return i!=="#*$~&"?i:this}else{var o=[],t=r[0]&&typeof r[0].multiple!=="undefined",a=t&&r[0].multiple||!t&&l.multiple,n=r[0]&&typeof r[0].debug!=="undefined",s=n&&r[0].debug||!n&&l.debug;this.each(function(){var e=false,t=q(this).data("tooltipster-ns"),n=null;if(!t){e=true}else if(a){e=true}else if(s){console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.')}if(e){n=new u(this,r[0]);if(!t)t=[];t.push(n.namespace);q(this).data("tooltipster-ns",t);q(this).data(n.namespace,n)}o.push(n)});if(a)return o;else return this}}};function r(n,r){var i=true;q.each(n,function(e,t){if(typeof r[e]==="undefined"||n[e]!==r[e]){i=false;return false}});return i}var c=!!("ontouchstart"in X);var t=false;q("body").one("mousemove",function(){t=true});function o(){return!t&&c}function f(){var e=i.body||i.documentElement,t=e.style,n="transition";if(typeof t[n]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<v.length;r++){if(typeof t[v[r]+n]=="string"){return true}}return false}})(jQuery,window,document);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],e)}else if(typeof exports==="object"){e(require("jquery"),require("./vendor/jquery.ui.widget"))}else{e(window.jQuery)}})(function(g){"use strict";var e={};var p={};function t(e){var t=h(e);if(p.hasOwnProperty(t)){delete p[t]}}function h(e){var t=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,"")}function u(e){e.data=e.data.file;return g.ajax(e)}g.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))"+"|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)"+"|(w(eb)?OSBrowser)|(webOS)"+"|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||g('<input type="file">').prop("disabled"));g.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);g.support.xhrFormDataFileUpload=!!window.FormData;g.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function n(n){var r=n==="dragover";return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=e.dataTransfer;if(t&&g.inArray("Files",t.types)!==-1&&this._trigger(n,g.Event(n,{delegatedEvent:e}))!==false){e.preventDefault();if(r){t.dropEffect="copy"}}}}g.widget("blueimp.fileupload",{options:{dropZone:g(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(n,e){n=this.messages[n]||n.toString();if(e){g.each(e,function(e,t){n=n.replace("{"+e+"}",t)})}return n},formData:function(e){return e.serializeArray()},add:function(e,t){if(e.isDefaultPrevented()){return false}if(t.autoUpload||t.autoUpload!==false&&g(this).fileupload("option","autoUpload")){t.process().done(function(){t.submit()})}},processData:false,contentType:false,cache:false,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:g.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.timestamp0=this.timestamp;this.loaded=0;this.bitrate=0;this.getBitrate=function(e,t,n){var r=e-this.timestamp;if(!this.bitrate||!n||r>n){this.bitrate=(t-this.loaded)*(1e3/r)*8;this.loaded=t;this.timestamp=e}return this.bitrate};this.getAvgBitrate=function(e,t){var n=e-this.timestamp0;return t*(1e3/n)*8}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&g.support.xhrFileUpload||g.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;if(g.type(e.formData)==="function"){return e.formData(e.form)}if(g.isArray(e.formData)){return e.formData}if(g.type(e.formData)==="object"){n=[];g.each(e.formData,function(e,t){n.push({name:e,value:t})});return n}return[]},_getTotal:function(e){var n=0;g.each(e,function(e,t){n+=t.size||1});return n},_initProgressObject:function(e){var t={loaded:0,total:0,bitrate:0};if(e._progress){g.extend(e._progress,t)}else{e._progress=t}},_initResponseObject:function(e){var t;if(e._response){for(t in e._response){if(e._response.hasOwnProperty(t)){delete e._response[t]}}}else{e._response={}}},_onProgress:function(e,t){if(e.lengthComputable){var n=Date.now?Date.now():(new Date).getTime(),r;if(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total){return}t._time=n;r=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0);this._progress.loaded+=r-t._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,t.bitrateInterval);this._progress.avgbitrate=this._bitrateTimer.getAvgBitrate(n,this._progress.loaded);t._progress.loaded=t.loaded=r;t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(n,r,t.bitrateInterval);this._trigger("progress",g.Event("progress",{delegatedEvent:e}),t);this._trigger("progressall",g.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(n){var r=this,e=n.xhr?n.xhr():g.ajaxSettings.xhr();if(e.upload){g(e.upload).bind("progress",function(e){var t=e.originalEvent;e.lengthComputable=t.lengthComputable;e.loaded=t.loaded;e.total=t.total;r._onProgress(e,n)});n.xhr=function(){return e}}},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(n){var r=this,i,e=n.files[0],t=n.multipart||!g.support.xhrFileUpload,o=g.type(n.paramName)==="array"?n.paramName[0]:n.paramName;n.headers=g.extend({},n.headers);if(n.contentRange){n.headers["Content-Range"]=n.contentRange}if(!t||n.blob||!this._isInstanceOf("File",e)){n.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'}if(!t){n.contentType=e.type||"application/octet-stream";n.data=n.blob||e}else if(g.support.xhrFormDataFileUpload){if(n.postMessage){i=this._getFormData(n);if(n.blob){i.push({name:o,value:n.blob})}else{g.each(n.files,function(e,t){i.push({name:g.type(n.paramName)==="array"&&n.paramName[e]||o,value:t})})}}else{if(r._isInstanceOf("FormData",n.formData)){i=n.formData}else{i=new FormData;g.each(this._getFormData(n),function(e,t){i.append(t.name,t.value)})}if(n.blob){i.append(o,n.blob,e.name)}else{g.each(n.files,function(e,t){if(r._isInstanceOf("File",t)||r._isInstanceOf("Blob",t)){i.append(g.type(n.paramName)==="array"&&n.paramName[e]||o,t,t.uploadName||t.name)}})}}n.data=i}n.blob=null},_initIframeSettings:function(e){var t=g("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||"");e.formData=this._getFormData(e);if(e.redirect&&t&&t!==location.host){e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})}},_initDataSettings:function(e){if(this._isXHRUpload(e)){if(!this._chunkedUpload(e,true)){if(!e.data){this._initXHRData(e)}this._initProgressListener(e)}if(e.postMessage){e.dataType="postmessage "+(e.dataType||"")}}else{this._initIframeSettings(e)}},_getParamName:function(e){var t=g(e.fileInput),r=e.paramName;if(!r){r=[];t.each(function(){var e=g(this),t=e.prop("name")||"files[]",n=(e.prop("files")||[1]).length;while(n){r.push(t);n-=1}});if(!r.length){r=[t.prop("name")||"files[]"]}}else if(!g.isArray(r)){r=[r]}return r},_initFormSettings:function(e){if(!e.form||!e.form.length){e.form=g(e.fileInput.prop("form"));if(!e.form.length){e.form=g(this.options.fileInput.prop("form"))}}e.paramName=this._getParamName(e);if(!e.url){e.url=e.form.prop("action")||location.href}e.type=(e.type||g.type(e.form.prop("method"))==="string"&&e.form.prop("method")||"").toUpperCase();if(e.type!=="POST"&&e.type!=="PUT"&&e.type!=="PATCH"){e.type="POST"}if(!e.formAcceptCharset){e.formAcceptCharset=e.form.attr("accept-charset")}},_getAJAXSettings:function(e){var t=g.extend({},this.options,e);this._initFormSettings(t);this._initDataSettings(t);return t},_getDeferredState:function(e){if(e.state){return e.state()}if(e.isResolved()){return"resolved"}if(e.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(e){e.success=e.done;e.error=e.fail;e.complete=e.always;return e},_getXHRPromise:function(e,t,n){var r=g.Deferred(),i=r.promise();t=t||this.options.context||i;if(e===true){r.resolveWith(t,n)}else if(e===false){r.rejectWith(t,n)}i.abort=r.promise;return this._enhancePromise(i)},_addConvenienceMethods:function(e,n){var r=this,i=function(e){return g.Deferred().resolveWith(r,e).promise()};n.process=function(e,t){if(e||t){n._processQueue=this._processQueue=(this._processQueue||i([this])).pipe(function(){if(n.errorThrown){return g.Deferred().rejectWith(r,[n]).promise()}return i(arguments)}).pipe(e,t)}return this._processQueue||i([this])};n.submit=function(){if(this.state()!=="pending"){n.jqXHR=this.jqXHR=r._trigger("submit",g.Event("submit",{delegatedEvent:e}),this)!==false&&r._onSend(e,this)}return this.jqXHR||r._getXHRPromise()};n.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";r._trigger("fail",null,this);return r._getXHRPromise(false)};n.state=function(){if(this.jqXHR){return r._getDeferredState(this.jqXHR)}if(this._processQueue){return r._getDeferredState(this._processQueue)}};n.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"};n.progress=function(){return this._progress};n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),r=n&&n.length>1&&parseInt(n[1],10);return r&&r+1},_chunkedUpload:function(o,e){o.uploadedBytes=o.uploadedBytes||p[h(o.files[0])]||0;var a=this,s=o.files[0],l=s.size,u=o.uploadedBytes,t=o.maxChunkSize||l,n=this._blobSlice,c=g.Deferred(),r=c.promise(),f,d;if(!(this._isXHRUpload(o)&&n&&(u||t<l))||o.data){return false}if(e){return true}if(u>=l){s.error=o.i18n("uploadedBytes");return this._getXHRPromise(false,o.context,[null,"error",s.error])}d=function(){var i=g.extend({},o),r=i._progress.loaded;i.blob=n.call(s,u,u+t,s.type);i.chunkSize=i.blob.size;i.contentRange="bytes "+u+"-"+(u+i.chunkSize-1)+"/"+l;a._initXHRData(i);a._initProgressListener(i);f=(a._trigger("chunksend",null,i)!==false&&g.ajax(i)||a._getXHRPromise(false,i.context)).done(function(e,t,n){u=a._getUploadedBytes(n)||u+i.chunkSize;if(r+i.chunkSize-i._progress.loaded){a._onProgress(g.Event("progress",{lengthComputable:true,loaded:u-i.uploadedBytes,total:u-i.uploadedBytes}),i)}o.uploadedBytes=i.uploadedBytes=u;p[h(s)]=u;i.result=e;i.textStatus=t;i.jqXHR=n;a._trigger("chunkdone",null,i);a._trigger("chunkalways",null,i);if(u<l){d()}else{c.resolveWith(i.context,[e,t,n])}}).fail(function(e,t,n){var r;i.jqXHR=e;i.textStatus=t;i.errorThrown=n;r=a._trigger("chunkfail",null,i);a._trigger("chunkalways",null,i);if(r===false){d()}else{c.rejectWith(i.context,[e,t,n])}})};this._enhancePromise(r);r.abort=function(){return f.abort()};d();return r},_beforeSend:function(e,t){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer;this._progress.loaded=this._progress.total=0;this._progress.bitrate=this._progress.avgbitrate=0}this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(e,t,n,r){var i=r._progress.total,o=r._response;if(r._progress.loaded<i){this._onProgress(g.Event("progress",{lengthComputable:true,loaded:i,total:i}),r)}o.result=r.result=e;o.textStatus=r.textStatus=t;o.jqXHR=r.jqXHR=n;this._trigger("done",null,r)},_onFail:function(e,t,n,r){var i=r._response;if(r.recalculateProgress){this._progress.loaded-=r._progress.loaded;this._progress.total-=r._progress.total}i.jqXHR=r.jqXHR=e;i.textStatus=r.textStatus=t;i.errorThrown=r.errorThrown=n;this._trigger("fail",null,r)},_onAlways:function(e,t,n,r){this._trigger("always",null,r)},_onSend:function(e,t){if(!t.submit){this._addConvenienceMethods(e,t)}var i=this,n,r,o,a,s=i._getAJAXSettings(t),l=function(){i._sending+=1;s._bitrateTimer=new i._BitrateTimer;n=n||((r||i._trigger("send",g.Event("send",{delegatedEvent:e}),s)===false)&&i._getXHRPromise(false,s.context,r)||i._chunkedUpload(s)||u(s)).done(function(e,t,n){i._onDone(e,t,n,s)}).fail(function(e,t,n){i._onFail(e,t,n,s)}).always(function(e,t,n){i._onAlways(e,t,n,s);i._sending-=1;i._active-=1;if(s.limitConcurrentUploads&&s.limitConcurrentUploads>i._sending){var r=i._slots.shift();while(r){if(i._getDeferredState(r)==="pending"){r.resolve();break}r=i._slots.shift()}}if(i._active===0){i._trigger("stop")}});return n};this._beforeSend(e,s);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(this.options.limitConcurrentUploads>1){o=g.Deferred();this._slots.push(o);a=o.pipe(l)}else{this._sequence=this._sequence.pipe(l,l);a=this._sequence}a.abort=function(){r=[undefined,"abort","abort"];if(!n){if(o){o.rejectWith(s.context,r)}return l()}return n.abort()};return this._enhancePromise(a)}return l()},_onAdd:function(r,i){var o=this,a=true,e=g.extend({},this.options,i),t=i.files,n=t.length,s=e.limitMultiFileUploads,l=e.limitMultiFileUploadSize,u=e.limitMultiFileUploadSizeOverhead,c=0,f=this._getParamName(e),d,p,h,m,v=0;if(!n){return false}if(l&&t[0].size===undefined){l=undefined}if(!(e.singleFileUploads||s||l)||!this._isXHRUpload(e)){h=[t];d=[f]}else if(!(e.singleFileUploads||l)&&s){h=[];d=[];for(m=0;m<n;m+=s){h.push(t.slice(m,m+s));p=f.slice(m,m+s);if(!p.length){p=f}d.push(p)}}else if(!e.singleFileUploads&&l){h=[];d=[];for(m=0;m<n;m=m+1){c+=t[m].size+u;if(m+1===n||c+t[m+1].size+u>l||s&&m+1-v>=s){h.push(t.slice(v,m+1));p=f.slice(v,m+1);if(!p.length){p=f}d.push(p);v=m+1;c=0}}}else{d=f}i.originalFiles=t;g.each(h||t,function(e,t){var n=g.extend({},i);n.files=h?t:[t];n.paramName=d[e];o._initResponseObject(n);o._initProgressObject(n);o._addConvenienceMethods(r,n);a=o._trigger("add",g.Event("add",{delegatedEvent:r}),n);return a});return a},_replaceFileInput:function(e){var n=e.fileInput,r=n.clone(true),t=n.is(document.activeElement);e.fileInputClone=r;g("<form></form>").append(r)[0].reset();n.after(r).detach();if(t){r.focus()}g.cleanData(n.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(e,t){if(t===n[0]){return r[0]}return t});if(n[0]===this.element[0]){this.element=r}},_handleFileTreeEntry:function(t,n){var r=this,i=g.Deferred(),o=function(e){if(e&&!e.entry){e.entry=t}i.resolve([e])},a=function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){i.resolve(e)}).fail(o)},s=function(){e.readEntries(function(e){if(!e.length){a(l)}else{l=l.concat(e);s()}},o)},e,l=[];n=n||"";if(t.isFile){if(t._file){t._file.relativePath=n;i.resolve(t._file)}else{t.file(function(e){e.relativePath=n;i.resolve(e)},o)}}else if(t.isDirectory){e=t.createReader();s()}else{i.resolve([])}return i.promise()},_handleFileTreeEntries:function(e,t){var n=this;return g.when.apply(g,g.map(e,function(e){return n._handleFileTreeEntry(e,t)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var t=e.items;if(t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)){return this._handleFileTreeEntries(g.map(t,function(e){var t;if(e.webkitGetAsEntry){t=e.webkitGetAsEntry();if(t){t._file=e.getAsFile()}return t}return e.getAsEntry()}))}return g.Deferred().resolve(g.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=g(e);var t=e.prop("webkitEntries")||e.prop("entries"),n,r;if(t&&t.length){return this._handleFileTreeEntries(t)}n=g.makeArray(e.prop("files"));if(!n.length){r=e.prop("value");if(!r){return g.Deferred().resolve([]).promise()}n=[{name:r.replace(/^.*\\/,"")}]}else if(n[0].name===undefined&&n[0].fileName){g.each(n,function(e,t){t.name=t.fileName;t.size=t.fileSize})}return g.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){if(!(e instanceof g)||e.length===1){return this._getSingleFileInputFiles(e)}return g.when.apply(g,g.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var n=this,r={fileInput:g(t.target),form:g(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e;if(n.options.replaceFileInput){n._replaceFileInput(r)}if(n._trigger("change",g.Event("change",{delegatedEvent:t}),r)!==false){n._onAdd(t,r)}})},_onPaste:function(e){var t=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,r={files:[]};if(t&&t.length){g.each(t,function(e,t){var n=t.getAsFile&&t.getAsFile();if(n){r.files.push(n)}});if(this._trigger("paste",g.Event("paste",{delegatedEvent:e}),r)!==false){this._onAdd(e,r)}}},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,e=t.dataTransfer,r={};if(e&&e.files&&e.files.length){t.preventDefault();this._getDroppedFiles(e).always(function(e){r.files=e;if(n._trigger("drop",g.Event("drop",{delegatedEvent:t}),r)!==false){n._onAdd(t,r)}})}},_onDragOver:n("dragover"),_onDragEnter:n("dragenter"),_onDragLeave:n("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})}if(g.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(e,t){var n=g.inArray(e,this._specialOptions)!==-1;if(n){this._destroyEventHandlers()}this._super(e,t);if(n){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var e=this.options;if(e.fileInput===undefined){e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else if(!(e.fileInput instanceof g)){e.fileInput=g(e.fileInput)}if(!(e.dropZone instanceof g)){e.dropZone=g(e.dropZone)}if(!(e.pasteZone instanceof g)){e.pasteZone=g(e.pasteZone)}},_getRegExp:function(e){var t=e.split("/"),n=t.pop();t.shift();return new RegExp(t.join("/"),n)},_isRegExpOption:function(e,t){return e!=="url"&&g.type(t)==="string"&&/^\/.*\/[igm]{0,3}$/.test(t)},_initDataAttributes:function(){var i=this,o=this.options,a=this.element.data();g.each(this.element[0].attributes,function(e,t){var n=t.name.toLowerCase(),r;if(/^data-/.test(n)){n=n.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()});r=a[n];if(i._isRegExpOption(n,r)){r=i._getRegExp(r)}o[n]=r}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},forget:function(e){t(e)},add:function(t){var n=this;if(!t||this.options.disabled){return}if(t.fileInput&&!t.files){this._getFileInputFiles(t.fileInput).always(function(e){t.files=e;n._onAdd(null,t)})}else{t.files=g.makeArray(t.files);this._onAdd(null,t)}},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n=this,r=g.Deferred(),e=r.promise(),i,o;e.abort=function(){o=true;if(i){return i.abort()}r.reject(null,"abort","abort");return e};this._getFileInputFiles(t.fileInput).always(function(e){if(o){return}if(!e.length){r.reject();return}t.files=e;i=n._onSend(null,t);i.then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)})});return this._enhancePromise(e)}t.files=g.makeArray(t.files);if(t.files.length){return this._onSend(null,t)}}return this._getXHRPromise(false,t&&t.context)}})});(function(o){o.fn.dragster=function(e){var i=o.extend({enter:o.noop,leave:o.noop,over:o.noop,drop:o.noop},e);return this.each(function(){var t=false,n=false,r=o(this);r.on({dragenter:function(e){if(t){n=true;return}else{t=true;r.trigger("dragster:enter",e)}e.preventDefault()},dragleave:function(e){if(n){n=false}else if(t){t=false}if(!t&&!n){r.trigger("dragster:leave",e)}e.preventDefault()},dragover:function(e){r.trigger("dragster:over",e);e.preventDefault()},drop:function(e){if(n){n=false}else if(t){t=false}if(!t&&!n){r.trigger("dragster:drop",e)}e.preventDefault()},"dragster:enter":i.enter,"dragster:leave":i.leave,"dragster:over":i.over,"dragster:drop":i.drop})})}})(jQuery);(function(l){var r=-1,i=-1;var u=function(e){var r=1,t=l(e),i=null,o=[];t.each(function(){var e=l(this),t=e.offset().top-c(e.css("margin-top")),n=o.length>0?o[o.length-1]:null;if(n===null){o.push(e)}else{if(Math.floor(Math.abs(i-t))<=r){o[o.length-1]=n.add(e)}else{o.push(e)}}i=t});return o};var c=function(e){return parseFloat(e)||0};var f=function(e){var t={byRow:true,remove:false,property:"height"};if(typeof e==="object"){return l.extend(t,e)}if(typeof e==="boolean"){t.byRow=e}else if(e==="remove"){t.remove=true}return t};var d=l.fn.matchHeight=function(e){var t=f(e);if(t.remove){var n=this;this.css(t.property,"");l.each(d._groups,function(e,t){t.elements=t.elements.not(n)});return this}if(this.length<=1)return this;d._groups.push({elements:this,options:t});d._apply(this,t);return this};d._groups=[];d._throttle=80;d._maintainScroll=false;d._beforeUpdate=null;d._afterUpdate=null;d._apply=function(e,t){var i=f(t),n=l(e),r=[n];var o=l(window).scrollTop(),a=l("html").outerHeight(true);var s=n.parents().filter(":hidden");s.each(function(){var e=l(this);e.data("style-cache",e.attr("style"))});s.css("display","block");if(i.byRow){n.each(function(){var e=l(this),t=e.css("display")==="inline-block"?"inline-block":"block";e.data("style-cache",e.attr("style"));e.css({display:t,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})});r=u(n);n.each(function(){var e=l(this);e.attr("style",e.data("style-cache")||"")})}l.each(r,function(e,t){var n=l(t),r=0;if(i.byRow&&n.length<=1){n.css(i.property,"");return}n.each(function(){var e=l(this),t=e.css("display")==="inline-block"?"inline-block":"block";var n={display:t};n[i.property]="";e.css(n);if(e.outerHeight(false)>r)r=e.outerHeight(false);e.css("display","")});n.each(function(){var e=l(this),t=0;if(e.css("box-sizing")!=="border-box"){t+=c(e.css("border-top-width"))+c(e.css("border-bottom-width"));t+=c(e.css("padding-top"))+c(e.css("padding-bottom"))}e.css(i.property,r-t)})});s.each(function(){var e=l(this);e.attr("style",e.data("style-cache")||null)});if(d._maintainScroll)l(window).scrollTop(o/a*l("html").outerHeight(true));return this};d._applyDataApi=function(){var n={};l("[data-match-height], [data-mh]").each(function(){var e=l(this),t=e.attr("data-match-height")||e.attr("data-mh");if(t in n){n[t]=n[t].add(e)}else{n[t]=e}});l.each(n,function(){this.matchHeight(true)})};var o=function(e){if(d._beforeUpdate)d._beforeUpdate(e,d._groups);l.each(d._groups,function(){d._apply(this.elements,this.options)});if(d._afterUpdate)d._afterUpdate(e,d._groups)};d._update=function(e,t){if(t&&t.type==="resize"){var n=l(window).width();if(n===r)return;r=n}if(!e){o(t)}else if(i===-1){i=setTimeout(function(){o(t);i=-1},d._throttle)}};l(d._applyDataApi);l(window).bind("load",function(e){d._update(false,e)});l(window).bind("resize orientationchange",function(e){d._update(true,e)})})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(window.jQuery||window.Zepto)}})(function(p){var l="Close",u="BeforeClose",n="AfterClose",r="BeforeAppend",c="MarkupParse",f="Open",a="Change",i="mfp",d="."+i,h="mfp-ready",o="mfp-removing",s="mfp-prevent-close";var m,e=function(){},v=!!window.jQuery,g,y=p(window),b,w,_,t;var S=function(e,t){m.ev.on(i+e+d,t)},x=function(e,t,n,r){var i=document.createElement("div");i.className="mfp-"+e;if(n){i.innerHTML=n}if(!r){i=p(i);if(t){i.appendTo(t)}}else if(t){t.appendChild(i)}return i},E=function(e,t){m.ev.triggerHandler(i+e,t);if(m.st.callbacks){e=e.charAt(0).toLowerCase()+e.slice(1);if(m.st.callbacks[e]){m.st.callbacks[e].apply(m,p.isArray(t)?t:[t])}}},C=function(e){if(e!==t||!m.currTemplate.closeBtn){m.currTemplate.closeBtn=p(m.st.closeMarkup.replace("%title%",m.st.tClose));t=e}return m.currTemplate.closeBtn},k=function(){if(!p.magnificPopup.instance){m=new e;m.init();p.magnificPopup.instance=m}},T=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(e["transition"]!==undefined){return true}while(t.length){if(t.pop()+"Transition"in e){return true}}return false};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;m.isIE7=e.indexOf("MSIE 7.")!==-1;m.isIE8=e.indexOf("MSIE 8.")!==-1;m.isLowIE=m.isIE7||m.isIE8;m.isAndroid=/android/gi.test(e);m.isIOS=/iphone|ipad|ipod/gi.test(e);m.supportsTransition=T();m.probablyMobile=m.isAndroid||m.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent);b=p(document);m.popupsCache={}},open:function(e){var t;if(e.isObj===false){m.items=e.items.toArray();m.index=0;var n=e.items,r;for(t=0;t<n.length;t++){r=n[t];if(r.parsed){r=r.el[0]}if(r===e.el[0]){m.index=t;break}}}else{m.items=p.isArray(e.items)?e.items:[e.items];m.index=e.index||0}if(m.isOpen){m.updateItemHTML();return}m.types=[];_="";if(e.mainEl&&e.mainEl.length){m.ev=e.mainEl.eq(0)}else{m.ev=b}if(e.key){if(!m.popupsCache[e.key]){m.popupsCache[e.key]={}}m.currTemplate=m.popupsCache[e.key]}else{m.currTemplate={}}m.st=p.extend(true,{},p.magnificPopup.defaults,e);m.fixedContentPos=m.st.fixedContentPos==="auto"?!m.probablyMobile:m.st.fixedContentPos;if(m.st.modal){m.st.closeOnContentClick=false;m.st.closeOnBgClick=false;m.st.showCloseBtn=false;m.st.enableEscapeKey=false}if(!m.bgOverlay){m.bgOverlay=x("bg").on("click"+d,function(){m.close()});m.wrap=x("wrap").attr("tabindex",-1).on("click"+d,function(e){if(m._checkIfClose(e.target)){m.close()}});m.container=x("container",m.wrap)}m.contentContainer=x("content");if(m.st.preloader){m.preloader=x("preloader",m.container,m.st.tLoading)}var i=p.magnificPopup.modules;for(t=0;t<i.length;t++){var o=i[t];o=o.charAt(0).toUpperCase()+o.slice(1);m["init"+o].call(m)}E("BeforeOpen");if(m.st.showCloseBtn){if(!m.st.closeBtnInside){m.wrap.append(C())}else{S(c,function(e,t,n,r){n.close_replaceWith=C(r.type)});_+=" mfp-close-btn-in"}}if(m.st.alignTop){_+=" mfp-align-top"}if(m.fixedContentPos){m.wrap.css({overflow:m.st.overflowY,overflowX:"hidden",overflowY:m.st.overflowY})}else{m.wrap.css({top:y.scrollTop(),position:"absolute"})}if(m.st.fixedBgPos===false||m.st.fixedBgPos==="auto"&&!m.fixedContentPos){m.bgOverlay.css({height:b.height(),position:"absolute"})}if(m.st.enableEscapeKey){b.on("keyup"+d,function(e){if(e.keyCode===27){m.close()}})}y.on("resize"+d,function(){m.updateSize()});if(!m.st.closeOnContentClick){_+=" mfp-auto-cursor"}if(_)m.wrap.addClass(_);var a=m.wH=y.height();var s={};if(m.fixedContentPos){if(m._hasScrollBar(a)){var l=m._getScrollbarSize();if(l){s.marginRight=l}}}if(m.fixedContentPos){if(!m.isIE7){s.overflow="hidden"}else{p("body, html").css("overflow","hidden")}}var u=m.st.mainClass;if(m.isIE7){u+=" mfp-ie7"}if(u){m._addClassToMFP(u)}m.updateItemHTML();E("BuildControls");p("html").css(s);m.bgOverlay.add(m.wrap).prependTo(m.st.prependTo||p(document.body));m._lastFocusedEl=document.activeElement;setTimeout(function(){if(m.content){m._addClassToMFP(h);m._setFocus()}else{m.bgOverlay.addClass(h)}b.on("focusin"+d,m._onFocusIn)},16);m.isOpen=true;m.updateSize(a);E(f);return e},close:function(){if(!m.isOpen)return;E(u);m.isOpen=false;if(m.st.removalDelay&&!m.isLowIE&&m.supportsTransition){m._addClassToMFP(o);setTimeout(function(){m._close()},m.st.removalDelay)}else{m._close()}},_close:function(){E(l);var e=o+" "+h+" ";m.bgOverlay.detach();m.wrap.detach();m.container.empty();if(m.st.mainClass){e+=m.st.mainClass+" "}m._removeClassFromMFP(e);if(m.fixedContentPos){var t={marginRight:""};if(m.isIE7){p("body, html").css("overflow","")}else{t.overflow=""}p("html").css(t)}b.off("keyup"+d+" focusin"+d);m.ev.off(d);m.wrap.attr("class","mfp-wrap").removeAttr("style");m.bgOverlay.attr("class","mfp-bg");m.container.attr("class","mfp-container");if(m.st.showCloseBtn&&(!m.st.closeBtnInside||m.currTemplate[m.currItem.type]===true)){if(m.currTemplate.closeBtn)m.currTemplate.closeBtn.detach()}if(m._lastFocusedEl){p(m._lastFocusedEl).focus()}m.currItem=null;m.content=null;m.currTemplate=null;m.prevHeight=0;E(n)},updateSize:function(e){if(m.isIOS){var t=document.documentElement.clientWidth/window.innerWidth;var n=window.innerHeight*t;m.wrap.css("height",n);m.wH=n}else{m.wH=e||y.height()}if(!m.fixedContentPos){m.wrap.css("height",m.wH)}E("Resize")},updateItemHTML:function(){var e=m.items[m.index];m.contentContainer.detach();if(m.content)m.content.detach();if(!e.parsed){e=m.parseEl(m.index)}var t=e.type;E("BeforeChange",[m.currItem?m.currItem.type:"",t]);m.currItem=e;if(!m.currTemplate[t]){var n=m.st[t]?m.st[t].markup:false;E("FirstMarkupParse",n);if(n){m.currTemplate[t]=p(n)}else{m.currTemplate[t]=true}}if(w&&w!==e.type){m.container.removeClass("mfp-"+w+"-holder")}var r=m["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,m.currTemplate[t]);m.appendContent(r,t);e.preloaded=true;E(a,e);w=e.type;m.container.prepend(m.contentContainer);E("AfterChange")},appendContent:function(e,t){m.content=e;if(e){if(m.st.showCloseBtn&&m.st.closeBtnInside&&m.currTemplate[t]===true){if(!m.content.find(".mfp-close").length){m.content.append(C())}}else{m.content=e}}else{m.content=""}E(r);m.container.addClass("mfp-"+t+"-holder");m.contentContainer.append(m.content)},parseEl:function(e){var t=m.items[e],n;if(t.tagName){t={el:p(t)}}else{n=t.type;t={data:t,src:t.src}}if(t.el){var r=m.types;for(var i=0;i<r.length;i++){if(t.el.hasClass("mfp-"+r[i])){n=r[i];break}}t.src=t.el.attr("data-mfp-src");if(!t.src){t.src=t.el.attr("href")}}t.type=n||m.st.type||"inline";t.index=e;t.parsed=true;m.items[e]=t;E("ElementParse",t);return m.items[e]},addGroup:function(t,n){var e=function(e){e.mfpEl=this;m._openClick(e,t,n)};if(!n){n={}}var r="click.magnificPopup";n.mainEl=t;if(n.items){n.isObj=true;t.off(r).on(r,e)}else{n.isObj=false;if(n.delegate){t.off(r).on(r,n.delegate,e)}else{n.items=t;t.off(r).on(r,e)}}},_openClick:function(e,t,n){var r=n.midClick!==undefined?n.midClick:p.magnificPopup.defaults.midClick;if(!r&&(e.which===2||e.ctrlKey||e.metaKey)){return}var i=n.disableOn!==undefined?n.disableOn:p.magnificPopup.defaults.disableOn;if(i){if(p.isFunction(i)){if(!i.call(m)){return true}}else{if(y.width()<i){return true}}}if(e.type){e.preventDefault();if(m.isOpen){e.stopPropagation()}}n.el=p(e.mfpEl);if(n.delegate){n.items=t.find(n.delegate)}m.open(n)},updateStatus:function(e,t){if(m.preloader){if(g!==e){m.container.removeClass("mfp-s-"+g)}if(!t&&e==="loading"){t=m.st.tLoading}var n={status:e,text:t};E("UpdateStatus",n);e=n.status;t=n.text;m.preloader.html(t);m.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()});m.container.addClass("mfp-s-"+e);g=e}},_checkIfClose:function(e){if(p(e).hasClass(s)){return}var t=m.st.closeOnContentClick;var n=m.st.closeOnBgClick;if(t&&n){return true}else{if(!m.content||p(e).hasClass("mfp-close")||m.preloader&&e===m.preloader[0]){return true}if(e!==m.content[0]&&!p.contains(m.content[0],e)){if(n){if(p.contains(document,e)){return true}}}else if(t){return true}}return false},_addClassToMFP:function(e){m.bgOverlay.addClass(e);m.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e);m.wrap.removeClass(e)},_hasScrollBar:function(e){return(m.isIE7?b.height():document.body.scrollHeight)>(e||y.height())},_setFocus:function(){(m.st.focus?m.content.find(m.st.focus).eq(0):m.wrap).focus()},_onFocusIn:function(e){if(e.target!==m.wrap[0]&&!p.contains(m.wrap[0],e.target)){if(m.content){m._setFocus()}return false}},_parseMarkup:function(i,e,t){var o;if(t.data){e=p.extend(t.data,e)}E(c,[i,e,t]);p.each(e,function(e,t){if(t===undefined||t===false){return true}o=e.split("_");if(o.length>1){var n=i.find(d+"-"+o[0]);if(n.length>0){var r=o[1];if(r==="replaceWith"){if(n[0]!==t[0]){n.replaceWith(t)}}else if(r==="img"){if(n.is("img")){n.attr("src",t)}else{n.replaceWith('<img src="'+t+'" class="'+n.attr("class")+'" />')}}else{n.attr(o[1],t)}}}else{i.find(d+"-"+e).html(t)}})},_getScrollbarSize:function(){if(m.scrollbarSize===undefined){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;";document.body.appendChild(e);m.scrollbarSize=e.offsetWidth-e.clientWidth;document.body.removeChild(e)}return m.scrollbarSize}};p.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){k();if(!e){e={}}else{e=p.extend(true,{},e)}e.isObj=true;e.index=t||0;return this.instance.open(e)},close:function(){return p.magnificPopup.instance&&p.magnificPopup.instance.close()},registerModule:function(e,t){if(t.options){p.magnificPopup.defaults[e]=t.options}p.extend(this.proto,t.proto);this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:false,mainClass:"",preloader:true,focus:"",closeOnContentClick:false,closeOnBgClick:true,closeBtnInside:true,showCloseBtn:true,enableEscapeKey:true,modal:false,alignTop:false,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}};p.fn.magnificPopup=function(e){k();var t=p(this);if(typeof e==="string"){if(e==="open"){var n,r=v?t.data("magnificPopup"):t[0].magnificPopup,i=parseInt(arguments[1],10)||0;if(r.items){n=r.items[i]}else{n=t;if(r.delegate){n=n.find(r.delegate)}n=n.eq(i)}m._openClick({mfpEl:n},t,r)}else{if(m.isOpen)m[e].apply(m,Array.prototype.slice.call(arguments,1))}}else{e=p.extend(true,{},e);if(v){t.data("magnificPopup",e)}else{t[0].magnificPopup=e}m.addGroup(t,e)}return t};var P="inline",O,$,F,I=function(){if(F){$.after(F.addClass(O)).detach();F=null}};p.magnificPopup.registerModule(P,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){m.types.push(P);S(l+"."+P,function(){I()})},getInline:function(e,t){I();if(e.src){var n=m.st.inline,r=p(e.src);if(r.length){var i=r[0].parentNode;if(i&&i.tagName){if(!$){O=n.hiddenClass;$=x(O);O="mfp-"+O}F=r.after($).detach().removeClass(O)}m.updateStatus("ready")}else{m.updateStatus("error",n.tNotFound);r=p("<div>")}e.inlineElement=r;return r}m.updateStatus("ready");m._parseMarkup(t,{},e);return t}}});var D="ajax",j,A=function(){if(j){p(document.body).removeClass(j)}},B=function(){A();if(m.req){m.req.abort()}};p.magnificPopup.registerModule(D,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){m.types.push(D);j=m.st.ajax.cursor;S(l+"."+D,B);S("BeforeChange."+D,B)},getAjax:function(i){if(j){p(document.body).addClass(j)}m.updateStatus("loading");var e=p.extend({url:i.src,success:function(e,t,n){var r={data:e,xhr:n};E("ParseAjax",r);m.appendContent(p(r.data),D);i.finished=true;A();m._setFocus();setTimeout(function(){m.wrap.addClass(h)},16);m.updateStatus("ready");E("AjaxContentAdded")},error:function(){A();i.finished=i.loadError=true;m.updateStatus("error",m.st.ajax.tError.replace("%url%",i.src))}},m.st.ajax.settings);m.req=p.ajax(e);return""}}});var U,L=function(e){if(e.data&&e.data.title!==undefined)return e.data.title;var t=m.st.image.titleSrc;if(t){if(p.isFunction(t)){return t.call(m,e)}else if(e.el){return e.el.attr(t)||""}}return""};p.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure">'+'<div class="mfp-close"></div>'+"<figure>"+'<div class="mfp-img"></div>'+"<figcaption>"+'<div class="mfp-bottom-bar">'+'<div class="mfp-title"></div>'+'<div class="mfp-counter"></div>'+"</div>"+"</figcaption>"+"</figure>"+"</div>",cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:true,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=m.st.image,t=".image";m.types.push("image");S(f+t,function(){if(m.currItem.type==="image"&&e.cursor){p(document.body).addClass(e.cursor)}});S(l+t,function(){if(e.cursor){p(document.body).removeClass(e.cursor)}y.off("resize"+d)});S("Resize"+t,m.resizeImage);if(m.isLowIE){S("AfterChange",m.resizeImage)}},resizeImage:function(){var e=m.currItem;if(!e||!e.img)return;if(m.st.image.verticalFit){var t=0;if(m.isLowIE){t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)}e.img.css("max-height",m.wH-t)}},_onImageHasSize:function(e){if(e.img){e.hasSize=true;if(U){clearInterval(U)}e.isCheckingImgSize=false;E("ImageHasSize",e);if(e.imgHidden){if(m.content)m.content.removeClass("mfp-loading");e.imgHidden=false}}},findImageSize:function(t){var n=0,r=t.img[0],i=function(e){if(U){clearInterval(U)}U=setInterval(function(){if(r.naturalWidth>0){m._onImageHasSize(t);return}if(n>200){clearInterval(U)}n++;if(n===3){i(10)}else if(n===40){i(50)}else if(n===100){i(500)}},e)};i(1)},getImage:function(e,t){var n=0,r=function(){if(e){if(e.img[0].complete){e.img.off(".mfploader");if(e===m.currItem){m._onImageHasSize(e);m.updateStatus("ready")}e.hasSize=true;e.loaded=true;E("ImageLoadComplete")}else{n++;if(n<200){setTimeout(r,100)}else{i()}}}},i=function(){if(e){e.img.off(".mfploader");if(e===m.currItem){m._onImageHasSize(e);m.updateStatus("error",o.tError.replace("%url%",e.src))}e.hasSize=true;e.loaded=true;e.loadError=true}},o=m.st.image;var a=t.find(".mfp-img");if(a.length){var s=document.createElement("img");s.className="mfp-img";if(e.el&&e.el.find("img").length){s.alt=e.el.find("img").attr("alt")}e.img=p(s).on("load.mfploader",r).on("error.mfploader",i);s.src=e.src;if(a.is("img")){e.img=e.img.clone()}s=e.img[0];if(s.naturalWidth>0){e.hasSize=true}else if(!s.width){e.hasSize=false}}m._parseMarkup(t,{title:L(e),img_replaceWith:e.img},e);m.resizeImage();if(e.hasSize){if(U)clearInterval(U);if(e.loadError){t.addClass("mfp-loading");m.updateStatus("error",o.tError.replace("%url%",e.src))}else{t.removeClass("mfp-loading");m.updateStatus("ready")}return t}m.updateStatus("loading");e.loading=true;if(!e.hasSize){e.imgHidden=true;t.addClass("mfp-loading");m.findImageSize(e)}return t}}});var M,R=function(){if(M===undefined){M=document.createElement("p").style.MozTransform!==undefined}return M};p.magnificPopup.registerModule("zoom",{options:{enabled:false,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var o=m.st.zoom,e=".zoom",t;if(!o.enabled||!m.supportsTransition){return}var n=o.duration,r=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+o.duration/1e3+"s "+o.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},i="transition";r["-webkit-"+i]=r["-moz-"+i]=r["-o-"+i]=r[i]=n;t.css(r);return t},i=function(){m.content.css("visibility","visible")},a,s;S("BuildControls"+e,function(){if(m._allowZoom()){clearTimeout(a);m.content.css("visibility","hidden");t=m._getItemToZoom();if(!t){i();return}s=r(t);s.css(m._getOffset());m.wrap.append(s);a=setTimeout(function(){s.css(m._getOffset(true));a=setTimeout(function(){i();setTimeout(function(){s.remove();t=s=null;E("ZoomAnimationEnded")},16)},n)},16)}});S(u+e,function(){if(m._allowZoom()){clearTimeout(a);m.st.removalDelay=n;if(!t){t=m._getItemToZoom();if(!t){return}s=r(t)}s.css(m._getOffset(true));m.wrap.append(s);m.content.css("visibility","hidden");setTimeout(function(){s.css(m._getOffset())},16)}});S(l+e,function(){if(m._allowZoom()){i();if(s){s.remove()}t=null}})},_allowZoom:function(){return m.currItem.type==="image"},_getItemToZoom:function(){if(m.currItem.hasSize){return m.currItem.img}else{return false}},_getOffset:function(e){var t;if(e){t=m.currItem.img}else{t=m.st.zoom.opener(m.currItem.el||m.currItem)}var n=t.offset();var r=parseInt(t.css("padding-top"),10);var i=parseInt(t.css("padding-bottom"),10);n.top-=p(window).scrollTop()-r;var o={width:t.width(),height:(v?t.innerHeight():t[0].offsetHeight)-i-r};if(R()){o["-moz-transform"]=o["transform"]="translate("+n.left+"px,"+n.top+"px)"}else{o.left=n.left;o.top=n.top}return o}}});var N="iframe",W="//about:blank",H=function(e){if(m.currTemplate[N]){var t=m.currTemplate[N].find("iframe");if(t.length){if(!e){t[0].src=W}if(m.isIE8){t.css("display",e?"block":"none")}}}};p.magnificPopup.registerModule(N,{options:{markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'+"</div>",srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){m.types.push(N);S("BeforeChange",function(e,t,n){if(t!==n){if(t===N){H()}else if(n===N){H(true)}}});S(l+"."+N,function(){H()})},getIframe:function(e,t){var n=e.src;var r=m.st.iframe;p.each(r.patterns,function(){if(n.indexOf(this.index)>-1){if(this.id){if(typeof this.id==="string"){n=n.substr(n.lastIndexOf(this.id)+this.id.length,n.length)}else{n=this.id.call(this,n)}}n=this.src.replace("%id%",n);return false}});var i={};if(r.srcAction){i[r.srcAction]=n}m._parseMarkup(t,i,e);m.updateStatus("ready");return t}}});var z=function(e){var t=m.items.length;if(e>t-1){return e-t}else if(e<0){return t+e}return e},Q=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};p.magnificPopup.registerModule("gallery",{options:{enabled:false,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:true,arrows:true,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var o=m.st.gallery,e=".mfp-gallery",i=Boolean(p.fn.mfpFastClick);m.direction=true;if(!o||!o.enabled)return false;_+=" mfp-gallery";S(f+e,function(){if(o.navigateByImgClick){m.wrap.on("click"+e,".mfp-img",function(){if(m.items.length>1){m.next();return false}})}b.on("keydown"+e,function(e){if(e.keyCode===37){m.prev()}else if(e.keyCode===39){m.next()}})});S("UpdateStatus"+e,function(e,t){if(t.text){t.text=Q(t.text,m.currItem.index,m.items.length)}});S(c+e,function(e,t,n,r){var i=m.items.length;n.counter=i>1?Q(o.tCounter,r.index,i):""});S("BuildControls"+e,function(){if(m.items.length>1&&o.arrows&&!m.arrowLeft){var e=o.arrowMarkup,t=m.arrowLeft=p(e.replace(/%title%/gi,o.tPrev).replace(/%dir%/gi,"left")).addClass(s),n=m.arrowRight=p(e.replace(/%title%/gi,o.tNext).replace(/%dir%/gi,"right")).addClass(s);var r=i?"mfpFastClick":"click";t[r](function(){m.prev()});n[r](function(){m.next()});if(m.isIE7){x("b",t[0],false,true);x("a",t[0],false,true);x("b",n[0],false,true);x("a",n[0],false,true)}m.container.append(t.add(n))}});S(a+e,function(){if(m._preloadTimeout)clearTimeout(m._preloadTimeout);m._preloadTimeout=setTimeout(function(){m.preloadNearbyImages();m._preloadTimeout=null},16)});S(l+e,function(){b.off(e);m.wrap.off("click"+e);if(m.arrowLeft&&i){m.arrowLeft.add(m.arrowRight).destroyMfpFastClick()}m.arrowRight=m.arrowLeft=null})},next:function(){m.direction=true;m.index=z(m.index+1);m.updateItemHTML()},prev:function(){m.direction=false;m.index=z(m.index-1);m.updateItemHTML()},goTo:function(e){m.direction=e>=m.index;m.index=e;m.updateItemHTML()},preloadNearbyImages:function(){var e=m.st.gallery.preload,t=Math.min(e[0],m.items.length),n=Math.min(e[1],m.items.length),r;for(r=1;r<=(m.direction?n:t);r++){m._preloadItem(m.index+r)}for(r=1;r<=(m.direction?t:n);r++){m._preloadItem(m.index-r)}},_preloadItem:function(e){e=z(e);if(m.items[e].preloaded){return}var t=m.items[e];if(!t.parsed){t=m.parseEl(e)}E("LazyLoad",t);if(t.type==="image"){t.img=p('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=true}).on("error.mfploader",function(){t.hasSize=true;t.loadError=true;E("LazyLoadError",t)}).attr("src",t.src)}t.preloaded=true}}});var J="retina";p.magnificPopup.registerModule(J,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var n=m.st.retina,r=n.ratio;r=!isNaN(r)?r:r();if(r>1){S("ImageHasSize"+"."+J,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/r,width:"100%"})});S("ElementParse"+"."+J,function(e,t){t.src=n.replaceSrc(t,r)})}}}}});(function(){var u=1e3,c="ontouchstart"in window,f=function(){y.off("touchmove"+d+" touchend"+d)},e="mfpFastClick",d="."+e;p.fn.mfpFastClick=function(l){return p(this).each(function(){var e=p(this),t;if(c){var n,r,i,o,a,s;e.on("touchstart"+d,function(e){o=false;s=1;a=e.originalEvent?e.originalEvent.touches[0]:e.touches[0];r=a.clientX;i=a.clientY;y.on("touchmove"+d,function(e){a=e.originalEvent?e.originalEvent.touches:e.touches;s=a.length;a=a[0];if(Math.abs(a.clientX-r)>10||Math.abs(a.clientY-i)>10){o=true;f()}}).on("touchend"+d,function(e){f();if(o||s>1){return}t=true;e.preventDefault();clearTimeout(n);n=setTimeout(function(){t=false},u);l()})})}e.on("click"+d,function(){if(!t){l()}})})};p.fn.destroyMfpFastClick=function(){p(this).off("touchstart"+d+" click"+d);if(c)y.off("touchmove"+d+" touchend"+d)}})();k()});(function(e){"use strict";e(window.jQuery,window,document)})(function(y,t,i,s){"use strict";y.widget("selectBox.selectBoxIt",{VERSION:"3.8.1",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:true,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:true,isMobile:function(){var e=navigator.userAgent||navigator.vendor||t.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(e)},native:false,aggressiveChange:false,selectWhenHidden:true,viewport:y(t),similarSearch:false,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:false,customShowHideEvent:false,autoWidth:true,html:true,populate:"",dynamicPositioning:true,hideCurrent:false},getThemes:function(){var e=this,t=y(e.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",enabled:"enabled",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",enabled:"ui-state-enabled",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+t,hover:"ui-btn-hover-"+t,enabled:"ui-enabled",disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+t,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+t,container:"jquerymobile",open:"selectboxit-open"},default:{focus:"selectboxit-focus",hover:"selectboxit-hover",enabled:"selectboxit-enabled",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},isDeferred:function(e){return y.isPlainObject(e)&&e.promise&&e.done},_create:function(e){var t=this,n=t.options["populate"],r=t.options["theme"];if(!t.element.is("select")){return}t.widgetProto=y.Widget.prototype;t.originalElem=t.element[0];t.selectBox=t.element;if(t.options["populate"]&&t.add&&!e){t.add(n)}t.selectItems=t.element.find("option");t.firstSelectItem=t.selectItems.slice(0,1);t.documentHeight=y(i).height();t.theme=y.isPlainObject(r)?y.extend({},t.getThemes()["default"],r):t.getThemes()[r]?t.getThemes()[r]:t.getThemes()["default"];t.currentFocus=0;t.blur=true;t.textArray=[];t.currentIndex=0;t.currentText="";t.flipped=false;if(!e){t.selectBoxStyles=t.selectBox.attr("style")}t._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(t.theme)._eventHandlers();if(t.originalElem.disabled&&t.disable){t.disable()}if(t._ariaAccessibility){t._ariaAccessibility()}t.isMobile=t.options["isMobile"]();if(t._mobile){t._mobile()}if(t.options["native"]){this._applyNativeSelect()}t.triggerEvent("create");return t},_createDropdownButton:function(){var e=this,t=e.originalElemId=e.originalElem.id||"",n=e.originalElemValue=e.originalElem.value||"",r=e.originalElemName=e.originalElem.name||"",i=e.options["copyClasses"],o=e.selectBox.attr("class")||"";e.dropdownText=y("<span/>",{id:t&&t+"SelectBoxItText",class:"selectboxit-text",unselectable:"on",text:e.firstSelectItem.text()}).attr("data-val",n);e.dropdownImageContainer=y("<span/>",{class:"selectboxit-option-icon-container"});e.dropdownImage=y("<i/>",{id:t&&t+"SelectBoxItDefaultIcon",class:"selectboxit-default-icon",unselectable:"on"});e.dropdown=y("<span/>",{id:t&&t+"SelectBoxIt",class:"selectboxit "+(i==="button"?o:"")+" "+(e.selectBox.prop("disabled")?e.theme["disabled"]:e.theme["enabled"]),name:r,tabindex:e.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(e.dropdownImageContainer.append(e.dropdownImage)).append(e.dropdownText);e.dropdownContainer=y("<span/>",{id:t&&t+"SelectBoxItContainer",class:"selectboxit-container "+e.theme.container+" "+(i==="container"?o:"")}).append(e.dropdown);return e},_createUnorderedList:function(){var t=this,n,r,i,o,a,s,l,u="",e=t.originalElemId||"",c=y("<ul/>",{id:e&&e+"SelectBoxItOptions",class:"selectboxit-options",tabindex:-1}),f,d,p,h,m,v;if(!t.options["showFirstOption"]){t.selectItems.first().attr("disabled","disabled");t.selectItems=t.selectBox.find("option").slice(1)}t.selectItems.each(function(e){m=y(this);r="";i="";n=m.prop("disabled");o=m.attr("data-icon")||"";a=m.attr("data-iconurl")||"";s=a?"selectboxit-option-icon-url":"";l=a?"style=\"background-image:url('"+a+"');\"":"";f=m.attr("data-selectedtext");d=m.attr("data-text");h=d?d:m.text();v=m.parent();if(v.is("optgroup")){r="selectboxit-optgroup-option";if(m.index()===0){i='<span class="selectboxit-optgroup-header '+v.first().attr("class")+'"data-disabled="true">'+v.first().attr("label")+"</span>"}}m.attr("value",this.value);u+=i+'<li data-id="'+e+'" data-val="'+this.value+'" data-disabled="'+n+'" class="'+r+" selectboxit-option "+(y(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+o+" "+(s||t.theme["container"])+'"'+l+"></i></span>"+(t.options["html"]?h:t.htmlEscape(h))+"</a></li>";p=m.attr("data-search");t.textArray[e]=n?"":p?p:h;if(this.selected){t._setText(t.dropdownText,f||h);t.currentFocus=e}});if(t.options["defaultText"]||t.selectBox.attr("data-text")){var g=t.options["defaultText"]||t.selectBox.attr("data-text");t._setText(t.dropdownText,g);t.options["defaultText"]=g}c.append(u);t.list=c;t.dropdownContainer.append(t.list);t.listItems=t.list.children("li");t.listAnchors=t.list.find("a");t.listItems.first().addClass("selectboxit-option-first");t.listItems.last().addClass("selectboxit-option-last");t.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(t.theme["disabled"]);t.dropdownImage.addClass(t.selectBox.attr("data-icon")||t.options["defaultIcon"]||t.listItems.eq(t.currentFocus).find("i").attr("class"));t.dropdownImage.attr("style",t.listItems.eq(t.currentFocus).find("i").attr("style"));return t},_replaceSelectBox:function(){var e=this,t,n=e.originalElem.id||"",r=e.selectBox.attr("data-size"),i=e.listSize=r===s?"auto":r==="0"||"size"==="auto"?"auto":+r,o,a;e.selectBox.css("display","none").after(e.dropdownContainer);e.dropdownContainer.appendTo("body").addClass("selectboxit-rendering");t=e.dropdown.height();e.downArrow=y("<i/>",{id:n&&n+"SelectBoxItArrow",class:"selectboxit-arrow",unselectable:"on"});e.downArrowContainer=y("<span/>",{id:n&&n+"SelectBoxItArrowContainer",class:"selectboxit-arrow-container",unselectable:"on"}).append(e.downArrow);e.dropdown.append(e.downArrowContainer);e.listItems.removeClass("selectboxit-selected").eq(e.currentFocus).addClass("selectboxit-selected");o=e.downArrowContainer.outerWidth(true);a=e.dropdownImage.outerWidth(true);if(e.options["autoWidth"]){e.dropdown.css({width:"auto"}).css({width:e.list.outerWidth(true)+20});e.list.css({"min-width":e.dropdown.width()})}e.dropdownText.css({"max-width":e.dropdownContainer.outerWidth(true)-20});e.selectBox.after(e.dropdownContainer);e.dropdownContainer.removeClass("selectboxit-rendering");if(y.type(i)==="number"){e.maxHeight=e.listAnchors.outerHeight(true)*i}return e},_scrollToView:function(e){var t=this,n=t.listItems.eq(t.currentFocus),r=t.list.scrollTop(),i=n.height(),o=n.position().top,a=Math.abs(o),s=t.list.height(),l;if(e==="search"){if(s-o<i){t.list.scrollTop(r+(o-(s-i)))}else if(o<-1){t.list.scrollTop(o-i)}}else if(e==="up"){if(o<-1){t.list.scrollTop(r-a)}}else if(e==="down"){if(s-o<i){t.list.scrollTop(r+(a-s+i))}}return t},_callbackSupport:function(e){var t=this;if(y.isFunction(e)){e.call(t,t.dropdown)}return t},_setText:function(e,t){var n=this;if(n.options["html"]){e.html(t)}else{e.text(t)}return n},open:function(e){var t=this,n=t.options["showEffect"],r=t.options["showEffectSpeed"],i=t.options["showEffectOptions"],o=t.options["native"],a=t.isMobile;if(!t.listItems.length||t.dropdown.hasClass(t.theme["disabled"])){return t}if(!o&&!a&&!this.list.is(":visible")){t.triggerEvent("open");if(t._dynamicPositioning&&t.options["dynamicPositioning"]){t._dynamicPositioning()}if(n==="none"){t.list.show()}else if(n==="show"||n==="slideDown"||n==="fadeIn"){t.list[n](r)}else{t.list.show(n,i,r)}t.list.promise().done(function(){t._scrollToView("search");t.triggerEvent("opened")})}t._callbackSupport(e);return t},close:function(e){var t=this,n=t.options["hideEffect"],r=t.options["hideEffectSpeed"],i=t.options["hideEffectOptions"],o=t.options["native"],a=t.isMobile;if(!o&&!a&&t.list.is(":visible")){t.triggerEvent("close");if(n==="none"){t.list.hide()}else if(n==="hide"||n==="slideUp"||n==="fadeOut"){t.list[n](r)}else{t.list.hide(n,i,r)}t.list.promise().done(function(){t.triggerEvent("closed")})}t._callbackSupport(e);return t},toggle:function(){var e=this,t=e.list.is(":visible");if(t){e.close()}else if(!t){e.open()}},_keyMappings:{38:"up",40:"down",13:"enter",8:"backspace",9:"tab",32:"space",27:"esc"},_keydownMethods:function(){var t=this,e=t.list.is(":visible")||!t.options["keydownOpen"];return{down:function(){if(t.moveDown&&e){t.moveDown()}},up:function(){if(t.moveUp&&e){t.moveUp()}},enter:function(){var e=t.listItems.eq(t.currentFocus);t._update(e);if(e.attr("data-preventclose")!=="true"){t.close()}t.triggerEvent("enter")},tab:function(){t.triggerEvent("tab-blur");t.close()},backspace:function(){t.triggerEvent("backspace")},esc:function(){t.close()}}},_eventHandlers:function(){var i=this,e=i.options["nativeMousedown"],t=i.options["customShowHideEvent"],o,a,r=i.focusClass,n=i.hoverClass,s=i.openClass;this.dropdown.on({"click.selectBoxIt":function(){i.dropdown.trigger("focus",true);if(!i.originalElem.disabled){i.triggerEvent("click");if(!e&&!t){i.toggle()}}},"mousedown.selectBoxIt":function(){y(this).data("mdown",true);i.triggerEvent("mousedown");if(e&&!t){i.toggle()}},"mouseup.selectBoxIt":function(){i.triggerEvent("mouseup")},"blur.selectBoxIt":function(){if(i.blur){i.triggerEvent("blur");i.close();y(this).removeClass(r)}},"focus.selectBoxIt":function(e,t){var n=y(this).data("mdown");y(this).removeData("mdown");if(!n&&!t){setTimeout(function(){i.triggerEvent("tab-focus")},0)}if(!t){if(!y(this).hasClass(i.theme["disabled"])){y(this).addClass(r)}i.triggerEvent("focus")}},"keydown.selectBoxIt":function(e){var t=i._keyMappings[e.keyCode],n=i._keydownMethods()[t];if(n){n();if(i.options["keydownOpen"]&&(t==="up"||t==="down")){i.open()}}if(n&&t!=="tab"){e.preventDefault()}},"keypress.selectBoxIt":function(e){var t=e.charCode||e.keyCode,n=i._keyMappings[e.charCode||e.keyCode],r=String.fromCharCode(t);if(i.search&&(!n||n&&n==="space")){i.search(r,true,true)}if(n==="space"){e.preventDefault()}},"mouseenter.selectBoxIt":function(){i.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){i.triggerEvent("mouseleave")}});i.list.on({"mouseover.selectBoxIt":function(){i.blur=false},"mouseout.selectBoxIt":function(){i.blur=true},"focusin.selectBoxIt":function(){i.dropdown.trigger("focus",true)}});i.list.on({"mousedown.selectBoxIt":function(){i._update(y(this));i.triggerEvent("option-click");if(y(this).attr("data-disabled")==="false"&&y(this).attr("data-preventclose")!=="true"){i.close()}setTimeout(function(){i.dropdown.trigger("focus",true)},0)},"focusin.selectBoxIt":function(){i.listItems.not(y(this)).removeAttr("data-active");y(this).attr("data-active","");var e=i.list.is(":hidden");if(i.options["searchWhenHidden"]&&e||i.options["aggressiveChange"]||e&&i.options["selectWhenHidden"]){i._update(y(this))}y(this).addClass(r)},"mouseup.selectBoxIt":function(){if(e&&!t){i._update(y(this));i.triggerEvent("option-mouseup");if(y(this).attr("data-disabled")==="false"&&y(this).attr("data-preventclose")!=="true"){i.close()}}},"mouseenter.selectBoxIt":function(){if(y(this).attr("data-disabled")==="false"){i.listItems.removeAttr("data-active");y(this).addClass(r).attr("data-active","");i.listItems.not(y(this)).removeClass(r);y(this).addClass(r);i.currentFocus=+y(this).attr("data-id")}},"mouseleave.selectBoxIt":function(){if(y(this).attr("data-disabled")==="false"){i.listItems.not(y(this)).removeClass(r).removeAttr("data-active");y(this).addClass(r);i.currentFocus=+y(this).attr("data-id")}},"blur.selectBoxIt":function(){y(this).removeClass(r)}},".selectboxit-option");i.list.on({"click.selectBoxIt":function(e){e.preventDefault()}},"a");i.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(e,t){var n,r;if(!t){n=i.list.find('li[data-val="'+i.originalElem.value+'"]');if(n.length){i.listItems.eq(i.currentFocus).removeClass(i.focusClass);i.currentFocus=+n.attr("data-id")}}n=i.listItems.eq(i.currentFocus);r=n.attr("data-selectedtext");o=n.attr("data-text");a=o?o:n.find("a").text();i._setText(i.dropdownText,r||a);i.dropdownText.attr("data-val",i.originalElem.value);if(n.find("i").attr("class")){i.dropdownImage.attr("class",n.find("i").attr("class")).addClass("selectboxit-default-icon");i.dropdownImage.attr("style",n.find("i").attr("style"))}i.triggerEvent("changed")},"disable.selectBoxIt":function(){i.dropdown.addClass(i.theme["disabled"])},"enable.selectBoxIt":function(){i.dropdown.removeClass(i.theme["disabled"])},"open.selectBoxIt":function(){var e=i.list.find("li[data-val='"+i.dropdownText.attr("data-val")+"']"),t;if(!e.length){e=i.listItems.not("[data-disabled=true]").first()}i.currentFocus=+e.attr("data-id");t=i.listItems.eq(i.currentFocus);i.dropdown.addClass(s).removeClass(n).addClass(r);i.listItems.removeClass(i.selectedClass).removeAttr("data-active").not(t).removeClass(r);t.addClass(i.selectedClass).addClass(r);if(i.options.hideCurrent){i.listItems.show();t.hide()}},"close.selectBoxIt":function(){i.dropdown.removeClass(s)},"blur.selectBoxIt":function(){i.dropdown.removeClass(r)},"mouseenter.selectBoxIt":function(){if(!y(this).hasClass(i.theme["disabled"])){i.dropdown.addClass(n)}},"mouseleave.selectBoxIt":function(){i.dropdown.removeClass(n)},destroy:function(e){e.preventDefault();e.stopPropagation()}});return i},_update:function(e){var t=this,n,r,i,o=t.options["defaultText"]||t.selectBox.attr("data-text"),a=t.listItems.eq(t.currentFocus);if(e.attr("data-disabled")==="false"){n=t.listItems.eq(t.currentFocus).attr("data-selectedtext");r=a.attr("data-text");i=r?r:a.text();if((o&&t.options["html"]?t.dropdownText.html()===o:t.dropdownText.text()===o)&&t.selectBox.val()===e.attr("data-val")){t.triggerEvent("change")}else{t.selectBox.val(e.attr("data-val"));t.currentFocus=+e.attr("data-id");if(t.originalElem.value!==t.dropdownText.attr("data-val")){t.triggerEvent("change")}}}},_addClasses:function(e){var t=this,n=t.focusClass=e.focus,r=t.hoverClass=e.hover,i=e.button,o=e.list,a=e.arrow,s=e.container,l=t.openClass=e.open;t.selectedClass="selectboxit-selected";t.downArrow.addClass(t.selectBox.attr("data-downarrow")||t.options["downArrowIcon"]||a);t.dropdownContainer.addClass(s);t.dropdown.addClass(i);t.list.addClass(o);return t},refresh:function(e,t){var n=this;n._destroySelectBoxIt()._create(true);if(!t){n.triggerEvent("refresh")}n._callbackSupport(e);return n},htmlEscape:function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(e){var t=this,n=t.options["showFirstOption"]?t.currentFocus:t.currentFocus-1>=0?t.currentFocus:0;t.selectBox.trigger(e,{selectbox:t.selectBox,selectboxOption:t.selectItems.eq(n),dropdown:t.dropdown,dropdownOption:t.listItems.eq(t.currentFocus)});return t},_copyAttributes:function(){var e=this;if(e._addSelectBoxAttributes){e._addSelectBoxAttributes()}return e},_realOuterWidth:function(e){if(e.is(":visible")){return e.outerWidth(true)}var t=this,n=e.clone(),r;n.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body");r=n.outerWidth(true);n.remove();return r}});var e=y.selectBox.selectBoxIt.prototype;e.add=function(e,u){this._populate(e,function(e){var t=this,n=y.type(e),r,i=0,o,a=[],s=t._isJSON(e),l=s&&t._parseJSON(e);if(e&&(n==="array"||s&&l.data&&y.type(l.data)==="array")||n==="object"&&e.data&&y.type(e.data)==="array"){if(t._isJSON(e)){e=l}if(e.data){e=e.data}for(o=e.length;i<=o-1;i+=1){r=e[i];if(y.isPlainObject(r)){a.push(y("<option/>",r))}else if(y.type(r)==="string"){a.push(y("<option/>",{text:r,value:r}))}}t.selectBox.append(a)}else if(e&&n==="string"&&!t._isJSON(e)){t.selectBox.append(e)}else if(e&&n==="object"){t.selectBox.append(y("<option/>",e))}else if(e&&t._isJSON(e)&&y.isPlainObject(t._parseJSON(e))){t.selectBox.append(y("<option/>",t._parseJSON(e)))}if(t.dropdown){t.refresh(function(){t._callbackSupport(u)},true)}else{t._callbackSupport(u)}return t})};e._parseJSON=function(e){return JSON&&JSON.parse&&JSON.parse(e)||y.parseJSON(e)};e._isJSON=function(e){var t=this,n;try{n=t._parseJSON(e);return true}catch(e){return false}};e._populate=function(e,t){var n=this;e=y.isFunction(e)?e.call():e;if(n.isDeferred(e)){e.done(function(e){t.call(n,e)})}else{t.call(n,e)}return n};e._ariaAccessibility=function(){var e=this,t=y("label[for='"+e.originalElem.id+"']");e.dropdownContainer.attr({role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":e.list[0].id});e.dropdownText.attr({"aria-live":"polite"});e.dropdown.on({"disable.selectBoxIt":function(){e.dropdownContainer.attr("aria-disabled","true")},"enable.selectBoxIt":function(){e.dropdownContainer.attr("aria-disabled","false")}});if(t.length){e.dropdownContainer.attr("aria-labelledby",t[0].id)}e.list.attr({role:"listbox","aria-hidden":"true"});e.listItems.attr({role:"option"});e.selectBox.on({"open.selectBoxIt":function(){e.list.attr("aria-hidden","false");e.dropdownContainer.attr("aria-expanded","true")},"close.selectBoxIt":function(){e.list.attr("aria-hidden","true");e.dropdownContainer.attr("aria-expanded","false")}});return e};e._addSelectBoxAttributes=function(){var t=this;t._addAttributes(t.selectBox.prop("attributes"),t.dropdown);t.selectItems.each(function(e){t._addAttributes(y(this).prop("attributes"),t.listItems.eq(e))});return t};e._addAttributes=function(e,i){var t=this,o=t.options["copyAttributes"];if(e.length){y.each(e,function(e,t){var n=t.name.toLowerCase(),r=t.value;if(r!=="null"&&(y.inArray(n,o)!==-1||n.indexOf("data")!==-1)){i.attr(n,r)}})}return t};e.destroy=function(e){var t=this;t._destroySelectBoxIt();t.widgetProto.destroy.call(t);t._callbackSupport(e);return t};e._destroySelectBoxIt=function(){var e=this;e.dropdown.off(".selectBoxIt");if(y.contains(e.dropdownContainer[0],e.originalElem)){e.dropdownContainer.before(e.selectBox)}e.dropdownContainer.remove();e.selectBox.removeAttr("style").attr("style",e.selectBoxStyles);e.triggerEvent("destroy");return e};e.disable=function(e){var t=this;if(!t.options["disabled"]){t.close();t.selectBox.attr("disabled","disabled");t.dropdown.removeAttr("tabindex").removeClass(t.theme["enabled"]).addClass(t.theme["disabled"]);t.setOption("disabled",true);t.triggerEvent("disable")}t._callbackSupport(e);return t};e.disableOption=function(e,t){var n=this,r,i,o,a=y.type(e);if(a==="number"){n.close();r=n.selectBox.find("option").eq(e);n.triggerEvent("disable-option");r.attr("disabled","disabled");n.listItems.eq(e).attr("data-disabled","true").addClass(n.theme["disabled"]);if(n.currentFocus===e){i=n.listItems.eq(n.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;o=n.listItems.eq(n.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(i){n.moveDown()}else if(o){n.moveUp()}else{n.disable()}}}n._callbackSupport(t);return n};e._isDisabled=function(e){var t=this;if(t.originalElem.disabled){t.disable()}return t};e._dynamicPositioning=function(){var e=this;if(y.type(e.listSize)==="number"){e.list.css("max-height",e.maxHeight||"none")}else{var t=e.dropdown.offset().top,n=e.list.data("max-height")||e.list.outerHeight(),r=e.dropdown.outerHeight(),i=e.options["viewport"],o=i.height(),a=y.isWindow(i.get(0))?i.scrollTop():i.offset().top,s=t+r+n<=o+a,l=!s;if(!e.list.data("max-height")){e.list.data("max-height",e.list.outerHeight())}if(!l){e.list.css("max-height",n);e.list.css("top","auto")}else if(e.dropdown.offset().top-a>=n){e.list.css("max-height",n);e.list.css("top",e.dropdown.position().top-e.list.outerHeight())}else{var u=Math.abs(t+r+n-(o+a)),c=Math.abs(e.dropdown.offset().top-a-n);if(u<c){e.list.css("max-height",n-u-r/2);e.list.css("top","auto")}else{e.list.css("max-height",n-c-r/2);e.list.css("top",e.dropdown.position().top-e.list.outerHeight())}}}return e};e.enable=function(e){var t=this;if(t.options["disabled"]){t.triggerEvent("enable");t.selectBox.removeAttr("disabled");t.dropdown.attr("tabindex",0).removeClass(t.theme["disabled"]).addClass(t.theme["enabled"]);t.setOption("disabled",false);t._callbackSupport(e)}return t};e.enableOption=function(e,t){var n=this,r,i=0,o,a,s=y.type(e);if(s==="number"){r=n.selectBox.find("option").eq(e);n.triggerEvent("enable-option");r.removeAttr("disabled");n.listItems.eq(e).attr("data-disabled","false").removeClass(n.theme["disabled"])}n._callbackSupport(t);return n};e.moveDown=function(e){var t=this;t.currentFocus+=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?true:false,r=t.listItems.eq(t.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===t.listItems.length){t.currentFocus-=1}else if(n&&r){t.listItems.eq(t.currentFocus-1).blur();t.moveDown();return}else if(n&&!r){t.currentFocus-=1}else{t.listItems.eq(t.currentFocus-1).blur().end().eq(t.currentFocus).focusin();t._scrollToView("down");t.triggerEvent("moveDown")}t._callbackSupport(e);return t};e.moveUp=function(e){var t=this;t.currentFocus-=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?true:false,r=t.listItems.eq(t.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===-1){t.currentFocus+=1}else if(n&&r){t.listItems.eq(t.currentFocus+1).blur();t.moveUp();return}else if(n&&!r){t.currentFocus+=1}else{t.listItems.eq(this.currentFocus+1).blur().end().eq(t.currentFocus).focusin();t._scrollToView("up");t.triggerEvent("moveUp")}t._callbackSupport(e);return t};e._setCurrentSearchOption=function(e){var t=this;if((t.options["aggressiveChange"]||t.options["selectWhenHidden"]||t.listItems.eq(e).is(":visible"))&&t.listItems.eq(e).data("disabled")!==true){t.listItems.eq(t.currentFocus).blur();t.currentIndex=e;t.currentFocus=e;t.listItems.eq(t.currentFocus).focusin();t._scrollToView("search");t.triggerEvent("search")}return t};e._searchAlgorithm=function(e,t){var n=this,r=false,i,o,a,s,l=n.textArray,u=n.currentText;for(i=e,a=l.length;i<a;i+=1){s=l[i];for(o=0;o<a;o+=1){if(l[o].search(t)!==-1){r=true;o=a}}if(!r){n.currentText=n.currentText.charAt(n.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");u=n.currentText}t=new RegExp(u,"gi");if(u.length<3){t=new RegExp(u.charAt(0),"gi");if(s.charAt(0).search(t)!==-1){n._setCurrentSearchOption(i);if(s.substring(0,u.length).toLowerCase()!==u.toLowerCase()||n.options["similarSearch"]){n.currentIndex+=1}return false}}else{if(s.search(t)!==-1){n._setCurrentSearchOption(i);return false}}if(s.toLowerCase()===n.currentText.toLowerCase()){n._setCurrentSearchOption(i);n.currentText="";return false}}return true};e.search=function(e,t,n){var r=this;if(n){r.currentText+=e.replace(/[|()\[{.+*?$\\]/g,"\\$0")}else{r.currentText=e.replace(/[|()\[{.+*?$\\]/g,"\\$0")}var i=r._searchAlgorithm(r.currentIndex,new RegExp(r.currentText,"gi"));if(i){r._searchAlgorithm(0,r.currentText)}r._callbackSupport(t);return r};e._updateMobileText=function(){var e=this,t,n,r;t=e.selectBox.find("option").filter(":selected");n=t.attr("data-text");r=n?n:t.text();e._setText(e.dropdownText,r);if(e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")){e.dropdownImage.attr("class",e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}};e._applyNativeSelect=function(){var e=this;e.dropdownContainer.append(e.selectBox);e.dropdown.attr("tabindex","-1");e.selectBox.css({display:"block",visibility:"visible",width:e._realOuterWidth(e.dropdown),height:e.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:e.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"});if(e.originalElem.disabled){e.triggerEvent("disable")}return this};e._mobileEvents=function(){var e=this;e.selectBox.on({"changed.selectBoxIt":function(){e.hasChanged=true;e._updateMobileText();e.triggerEvent("option-click")},"mousedown.selectBoxIt":function(){if(!e.hasChanged&&e.options.defaultText&&!e.originalElem.disabled){e._updateMobileText();e.triggerEvent("option-click")}},"enable.selectBoxIt":function(){e.selectBox.removeClass("selectboxit-rendering")},"disable.selectBoxIt":function(){e.selectBox.addClass("selectboxit-rendering")}})};e._mobile=function(e){var t=this;if(t.isMobile){t._applyNativeSelect();t._mobileEvents()}return this};e.remove=function(e,t){var n=this,r=y.type(e),i,o=0,a,s="";if(r==="array"){for(a=e.length;o<=a-1;o+=1){i=e[o];if(y.type(i)==="number"){if(s.length){s+=", option:eq("+i+")"}else{s+="option:eq("+i+")"}}}n.selectBox.find(s).remove()}else if(r==="number"){n.selectBox.find("option").eq(e).remove()}else{n.selectBox.find("option").remove()}if(n.dropdown){n.refresh(function(){n._callbackSupport(t)},true)}else{n._callbackSupport(t)}return n};e.selectOption=function(e,t){var n=this,r=y.type(e);if(r==="number"){n.selectBox.val(n.selectItems.eq(e).val()).change()}else if(r==="string"){n.selectBox.val(e).change()}n._callbackSupport(t);return n};e.setOption=function(e,t,n){var r=this;if(y.type(e)==="string"){r.options[e]=t}r.refresh(function(){r._callbackSupport(n)},true);return r};e.setOptions=function(e,t){var n=this;if(y.isPlainObject(e)){n.options=y.extend({},n.options,e)}n.refresh(function(){n._callbackSupport(t)},true);return n};e.wait=function(e,t){var n=this;n.widgetProto._delay.call(n,t,e);return n}});(function(a,e,t,s){var l="taginput",n={WHITESPACE:32,ENTER:13,TAB:9,BACKSPACE:8},r={jqueryui:{tagTpl:'<span class="taginput-tag ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-secondary"><span class="ui-button-icon-secondary ui-icon ui-icon-close"></span><span class="ui-button-text">{{label}}</span></span>',wrapperTpl:'<div class="taginput-wrapper ui-widget ui-widget-content ui-corner-all"></div>',deleteHandler:null},bootstrap:{tagTpl:'<span class="taginput-tag btn btn-default btn-sm"><span>{{label}}</span> <span class="glyphicon glyphicon-remove"></span></span>',wrapperTpl:'<div class="taginput-wrapper form-control"></div>',deleteHandler:null}},i={style:"jqueryui",separateKeyCodes:[n.WHITESPACE,n.ENTER,n.TAB],placeholder:"Add tag...",allowMultiple:false,caseSensitive:false,onExists:function(e){e.hide().fadeIn()},tagLabel:function(e){return e},tagValue:function(e){return e}};function u(e,t){this._tags=[];this.$element=a(e);this._defaults=i;this._name=l;this._create(t)}u.prototype={constructor:u,_create:function(e){var n=this;this.options=a.extend({},i,e);if(typeof this.options.style==="string"){this.style=r[this.options.style]}else{this.style=this.options.style}this.$element.hide();this.$input=a('<input type="text" placeholder="'+this.options.placeholder+'"/>').insertAfter(this.$element);this.$input.wrap(this.style.wrapperTpl);this.$wrapper=this.$input.parent();this.$input.on("keydown.taginput",a.proxy(this._keydown,this));this.$wrapper.on("click.taginput",function(){n.$input.focus()});var t=this.$element.val().split(",");a.each(t,function(e,t){n.add(a.trim(t))})},_keydown:function(e){e.stopPropagation();var t=a.trim(this.$input.val());if(e.keyCode==n.BACKSPACE&&t===""){this._dissolveLast();e.preventDefault()}if(a.inArray(e.keyCode,this.options.separateKeyCodes)>=0){this._createTagFromInputField();e.preventDefault()}if(e.keyCode==n.TAB){e.preventDefault()}},_template:function(e,t){var n=/{{([\s\S]+?)}}/g;return e.replace(n,function(e){if(e==="{{label}}"){return t}})},_createTagView:function(t){var n=this;var e=a(this._template(this.style.tagTpl,this.options.tagLabel(t)));e.data("taginput-data",t);this.$input.before(e);if(this.style.deleteHandler!==false){var r=this.style.deleteHandler;if(e.is(this.style.deleteHandler)){r=null}e.on("click.taginput",r,function(e){e.preventDefault();n.remove(t)})}},_createTagFromInputField:function(){var e=a.trim(this.$input.val());if(e!==""){if(this.options.getTagObject){e=this.options.getTagObject(e)}this.add(e);this.$input.val("")}},_dissolveLast:function(){if(this._tags.length>0){var e=this.$input.prev(),t=e.data("taginput-data");this.remove(t);this.$input.val(this.options.tagLabel(t))}},_compareTags:function(e,t){if(this.options.caseSensitive){if(this.options.tagValue(e)===this.options.tagValue(t)){return true}}else{if(this.options.tagValue(e).toString().toLowerCase()===this.options.tagValue(t).toString().toLowerCase()){return true}}return false},_getTagElem:function(r){var i=this,o=null;this.$input.parent().find(".taginput-tag").each(function(e,t){var n=a(t).data("taginput-data");if(i._compareTags(n,r)){o=a(t)}});return o===null?false:o},_pushVal:function(){var t=this,e=a.map(this._tags,function(e){return t.options.tagValue(e).toString()});this.$element.val(e).trigger("change")},destroy:function(){this.$input.off("keydown.taginput");this.$input.parent().off("click.taginput");this.$input.parent().remove();this.$element.removeData(l);this.$element.val("");return this.$element[0]},exists:function(n){var r=this,i=false;a.each(this._tags,function(e,t){if(r._compareTags(n,t)){i=true}});return i},add:function(e){var t=this;if(this.options.tagValue(e)===""){return this.$element[0]}if(!this.options.allowMultiple&&this.exists(e)){if(this.options.onExists&&typeof this.options.onExists==="function"){this.options.onExists.call(this.$element,this._getTagElem(e))}}else{var n=false;if(this.options.onAdd&&typeof this.options.onAdd==="function"){n=this.options.onAdd.call(this.$element,e)===false}if(!n){this._createTagView(e);this._tags.push(e);this._pushVal()}}return this.$element[0]},remove:function(n){var r=this;var e=false;if(this.options.onRemove&&typeof this.options.onRemove==="function"){e=this.options.onRemove.call(this.$element,n)===false}if(!e){this._getTagElem(n).remove();this._tags=a.grep(this._tags,function(e,t){return r.options.tagValue(e)!==r.options.tagValue(n)});this._pushVal();this.$input.focus()}return this.$element[0]},get:function(){return this._tags},set:function(e){var n=this;n.clear();a.each(e,function(e,t){n.add(t)});return this.$element[0]},clear:function(){var n=this;a.each(n._tags,function(e,t){n.remove(t)});return this.$element[0]},focus:function(){this.$input.focus();return this.$element[0]},getInputElement:function(){return this.$input}};a.fn[l]=function(n,r){var i=this;var o=[];this.each(function(){var e=i.data(l);if(!e){e=new u(i,n);i.data(l,e);o.push(this)}else{var t=e[n](r);if(t!==s)o.push(t)}});if(typeof n=="string"){if(o.length>0){if(o[0]!==this[0]){return o.length>1?o:o[0]}}}return c(o)};function c(e){var n=a();a.each(e,function(e,t){n.push(t)});return n}})(jQuery,window,document);(function(c,f,u){if(typeof f!=="function"){return console.error("nette.ajax.js: jQuery is missing, load it please")}var e=function(){var l={self:this,initialized:false,contexts:{},on:{init:{},load:{},prepare:{},before:{},start:{},success:{},complete:{},error:{}},fire:function(){var r=true;var i=Array.prototype.slice.call(arguments);var e=i.shift();var t=typeof e==="string"?e:e.name;var o=typeof e==="object"?e.off||{}:{};i.push(l.self);f.each(l.on[t],function(e,t){if(t===u||f.inArray(e,o)!==-1)return true;var n=t.apply(l.contexts[e],i);return r=n===u||n});return r},requestHandler:function(e){var t=l.self.ajax({},this,e);if(t&&t._returnFalse){return false}},ext:function(e,t,n){while(!n){n="ext_"+Math.random();if(l.contexts[n]){n=u}}f.each(e,function(e,t){l.on[e][n]=t});l.contexts[n]=f.extend(t?t:{},{name:function(){return n},ext:function(e,t){var n=l.contexts[e];if(!n&&t)throw new Error("Extension '"+this.name()+"' depends on disabled extension '"+e+"'.");return n}})}};this.ext=function(n,e,t){if(typeof n==="object"){l.ext(n,e)}else if(e===u){return l.contexts[n]}else if(!e){f.each(["init","load","prepare","before","start","success","complete","error"],function(e,t){l.on[t][n]=u});l.contexts[n]=u}else if(typeof n==="string"&&l.contexts[n]!==u){throw new Error("Cannot override already registered nette-ajax extension '"+n+"'.")}else{l.ext(e,t,n)}return this};this.init=function(e,t){if(l.initialized)throw new Error("Cannot initialize nette-ajax twice.");if(typeof e==="function"){this.ext("init",null);this.ext("init",{load:e},t)}else if(typeof e==="object"){this.ext("init",null);this.ext("init",e,t)}else if(e!==u){throw new Error("Argument of init() can be function or function-hash only.")}l.initialized=true;l.fire("init");this.load();return this};this.load=function(){l.fire("load",l.requestHandler);return this};this.ajax=function(e,t,n){if(f.type(e)==="string"){e={url:e}}if(!e.nette&&t&&n){var r=f(t),i,o;var a=e.nette={e:n,ui:t,el:r,isForm:r.is("form"),isSubmit:r.is("input[type=submit]")||r.is("button[type=submit]"),isImage:r.is("input[type=image]"),form:null};if(a.isSubmit||a.isImage){a.form=a.el.closest("form")}else if(a.isForm){a.form=a.el}if(!e.url){e.url=a.form?a.form.attr("action"):t.href}if(!e.type){e.type=a.form?a.form.attr("method"):"get"}if(r.is("[data-ajax-off]")){var s=r.attr("data-ajax-off");if(s.indexOf("[")===0){e.off=r.data("ajaxOff")}else if(s.indexOf(",")!==-1){e.off=s.split(",")}else if(s.indexOf(" ")!==-1){e.off=s.split(" ")}else{e.off=s}if(typeof e.off==="string")e.off=[e.off];e.off=f.grep(f.each(e.off,function(e){return f.trim(e)}),function(e){return e.length})}}l.fire({name:"prepare",off:e.off||{}},e);if(e.prepare){e.prepare(e)}o=e.beforeSend;e.beforeSend=function(e,t){var n=l.fire({name:"before",off:t.off||{}},e,t);if((n||n===u)&&o){n=o(e,t)}return n};return this.handleXHR(f.ajax(e),e)};this.handleXHR=function(e,r){r=r||{};if(e&&(typeof e.statusText==="undefined"||e.statusText!=="canceled")){e.done(function(e,t,n){l.fire({name:"success",off:r.off||{}},e,t,n,r)}).fail(function(e,t,n){l.fire({name:"error",off:r.off||{}},e,t,n,r)}).always(function(e,t){l.fire({name:"complete",off:r.off||{}},e,t,r)});l.fire({name:"start",off:r.off||{}},e,r);if(r.start){r.start(e,r)}}return e}};f.nette=new(f.extend(e,f.nette?f.nette:{}));f.fn.netteAjax=function(e,t){return f.nette.ajax(t||{},this[0],e)};f.fn.netteAjaxOff=function(){return this.off(".nette")};f.nette.ext("validation",{before:function(e,t){if(!t.nette)return true;else var n=t.nette;var r=n.e;var i=f.extend({keys:true,url:true,form:true},t.validate||function(){if(!n.el.is("[data-ajax-validate]"))return;var e=n.el.data("ajaxValidate");if(e===false)return{keys:false,url:false,form:false};else if(typeof e==="object")return e}()||{});var o=false;if(n.el.attr("data-ajax-pass")!==u){o=n.el.data("ajaxPass");o=typeof o==="bool"?o:true}if(i.keys){var a=r.button||r.ctrlKey||r.shiftKey||r.altKey||r.metaKey;if(n.form){if(a&&n.isSubmit){this.explicitNoAjax=true;return false}else if(n.isForm&&this.explicitNoAjax){this.explicitNoAjax=false;return false}}else if(a)return false}if(i.form&&n.form&&!((n.isSubmit||n.isImage)&&n.el.attr("formnovalidate")!==u)){var s=this.ie();if(n.form.get(0).onsubmit&&n.form.get(0).onsubmit(typeof s!=="undefined"&&s<9?u:r)===false){r.stopImmediatePropagation();r.preventDefault();return false}}if(i.url){if(/:|^#/.test(n.form?t.url:n.el.attr("href")))return false}if(!o){r.stopPropagation();r.preventDefault();e._returnFalse=true}return true}},{explicitNoAjax:false,ie:function(e){var t=3;var n=document.createElement("div");var r=n.getElementsByTagName("i");while(n.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",r[0]);return t>4?t:e}});f.nette.ext("forms",{init:function(){var e;if(!c.Nette||!(e=this.ext("snippets")))return;e.after(function(e){e.find("form").each(function(){c.Nette.initForm(this)})})},prepare:function(e){var t=e.nette;if(!t||!t.form)return;var n=t.e;var r=e.data||{};var i={};if(t.isSubmit){i[t.el.attr("name")]=t.el.val()||""}else if(t.isImage){var o=t.el.offset();var a=t.el.attr("name");var s=[Math.max(0,n.pageX-o.left),Math.max(0,n.pageY-o.top)];if(a.indexOf("[",0)!==-1){i[a]=s}else{i[a+".x"]=s[0];i[a+".y"]=s[1]}}if(t.form.attr("method").toLowerCase()==="post"&&"FormData"in c){var l=new FormData(t.form[0]);for(var u in i){l.append(u,i[u])}if(typeof r!=="string"){for(var u in r){l.append(u,r[u])}}e.data=l;e.processData=false;e.contentType=false}else{if(typeof r!=="string"){r=f.param(r)}i=f.param(i);e.data=t.form.serialize()+(i?"&"+i:"")+"&"+r}}});f.nette.ext("snippets",{success:function(e){if(e.snippets){this.updateSnippets(e.snippets)}}},{beforeQueue:f.Callbacks(),afterQueue:f.Callbacks(),completeQueue:f.Callbacks(),before:function(e){this.beforeQueue.add(e)},after:function(e){this.afterQueue.add(e)},complete:function(e){this.completeQueue.add(e)},updateSnippets:function(e,t){var n=this;var r=[];for(var i in e){var o=this.getElement(i);if(o.get(0)){r.push(o.get(0))}this.updateSnippet(o,e[i],t)}f(r).promise().done(function(){n.completeQueue.fire()})},updateSnippet:function(e,t,n){if(e.is("title")){document.title=t}else{this.beforeQueue.fire(e);this.applySnippet(e,t,n);this.afterQueue.fire(e)}},getElement:function(e){return f("#"+this.escapeSelector(e))},applySnippet:function(e,t,n){if(!n&&e.is("[data-ajax-append]")){e.append(t)}else if(!n&&e.is("[data-ajax-prepend]")){e.prepend(t)}else if(e.html()!=t){e.html(t)}},escapeSelector:function(e){return e.replace(/[\!"#\$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|\}~]/g,"\\$&")}});f.nette.ext("redirect",{success:function(e){if(e.redirect){c.location.href=e.redirect;return false}}});f.nette.ext("state",{success:function(e){if(e.state){this.state=e.state}}},{state:null});f.nette.ext("unique",{start:function(e){if(this.xhr){this.xhr.abort()}this.xhr=e},complete:function(){this.xhr=null}},{xhr:null});f.nette.ext("abort",{init:function(){f("body").keydown(f.proxy(function(e){if(this.xhr&&(e.keyCode.toString()==="27"&&!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey))){this.xhr.abort()}},this))},start:function(e){this.xhr=e},complete:function(){this.xhr=null}},{xhr:null});f.nette.ext("load",{success:function(){f.nette.load()}});f.nette.ext("init",{load:function(e){f("body").off("click.nette",this.linkSelector,e).on("click.nette",this.linkSelector,e).off("submit.nette",this.formSelector,e).on("submit.nette",this.formSelector,e).off("click.nette",this.formSelector+" :image",e).on("click.nette",this.formSelector+" :image",e).off("click.nette",this.formSelector+" :submit",e).on("click.nette",this.formSelector+" :submit",e).off("click.nette",this.buttonSelector,e).on("click.nette",this.buttonSelector,e)}},{linkSelector:"a.ajax",formSelector:"form.ajax",buttonSelector:'input.ajax[type="submit"], button.ajax[type="submit"], input.ajax[type="image"]'})})(window,window.jQuery);(function(e,t){if(!e.JSON){return}if(typeof define==="function"&&define.amd){define(function(){return t(e)})}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=t(e)}else{e.Nette=t(e);e.Nette.initOnLoad()}})(typeof window!=="undefined"?window:this,function(window){"use strict";var Nette={};var checkedAmbiguousEmails=[];Nette.addEvent=function(e,t,n){var r=e["on"+t];e["on"+t]=function(){if(typeof r==="function"&&r.apply(e,arguments)===false){return false}return n.apply(e,arguments)}};Nette.getValue=function(e){var t;if(!e){return null}else if(!e.tagName){return e[0]?Nette.getValue(e[0]):null}else if(e.type==="radio"){var n=e.form.elements;for(t=0;t<n.length;t++){if(n[t].name===e.name&&n[t].checked){return n[t].value}}return null}else if(e.type==="file"){return e.files||e.value}else if(e.tagName.toLowerCase()==="select"){var r=e.selectedIndex,i=e.options,o=[];if(e.type==="select-one"){return r<0?null:i[r].value}for(t=0;t<i.length;t++){if(i[t].selected){o.push(i[t].value)}}return o}else if(e.name&&e.name.match(/\[\]$/)){var n=e.form.elements[e.name].tagName?[e]:e.form.elements[e.name],o=[];for(t=0;t<n.length;t++){if(n[t].type!=="checkbox"||n[t].checked){o.push(n[t].value)}}return o}else if(e.type==="checkbox"){return e.checked}else if(e.tagName.toLowerCase()==="textarea"){return e.value.replace("\r","")}else{return e.value.replace("\r","").replace(/^\s+|\s+$/g,"")}};Nette.getEffectiveValue=function(e){var t=Nette.getValue(e);if(e.getAttribute){if(t===e.getAttribute("data-nette-empty-value")){t=""}}return t};Nette.validateControl=function(n,e,t,r){n=n.tagName?n:n[0];e=e||Nette.parseJSON(n.getAttribute("data-nette-rules"));r=r===undefined?{value:Nette.getEffectiveValue(n)}:r;for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.op.match(/(~)?([^?]+)/),l=a.control?n.form.elements.namedItem(a.control):n;if(!l){continue}a.neg=s[1];a.op=s[2];a.condition=!!a.rules;l=l.tagName?l:l[0];var u=n===l?r:{value:Nette.getEffectiveValue(l)},c=Nette.validateRule(l,a.op,a.arg,u);if(c===null){continue}else if(a.neg){c=!c}if(a.condition&&c){if(!Nette.validateControl(n,a.rules,t,r)){return false}}else if(!a.condition&&!c){if(Nette.isDisabled(l)){continue}if(!t){var f=Nette.isArray(a.arg)?a.arg:[a.arg],d=a.msg.replace(/%(value|\d+)/g,function(e,t){return Nette.getValue(t==="value"?l:n.form.elements.namedItem(f[t].control))});Nette.addError(l,d)}return false}}return true};Nette.validateForm=function(e){var t=e.form||e,n=false;if($(t).hasClass("ajax-spinner")&&$(t).find(".btn").hasClass("btn-loading")){return false}if(t["nette-submittedBy"]&&t["nette-submittedBy"].getAttribute("formnovalidate")!==null){var r=Nette.parseJSON(t["nette-submittedBy"].getAttribute("data-nette-validation-scope"));if(r.length){n=new RegExp("^("+r.join("-|")+"-)")}else{return true}}var i={},o,a;for(o=0;o<t.elements.length;o++){a=t.elements[o];if(a.tagName&&!(a.tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1})){continue}else if(a.type==="radio"){if(i[a.name]){continue}i[a.name]=true}if(n&&!a.name.replace(/]\[|\[|]|$/g,"-").match(n)||Nette.isDisabled(a)){continue}if(!Nette.validateControl(a)){return false}}if($(t).hasClass("ajax-spinner")){$(t).find(".btn").addClass("btn-loading")}return true};Nette.isDisabled=function(e){if(e.type==="radio"){for(var t=0,n=e.form.elements;t<n.length;t++){if(n[t].name===e.name&&!n[t].disabled){return false}}return true}return e.disabled};Nette.addError=function(e,n){if(n){if($(e).hasClass("taginput")){e=$(e).taginput("getInputElement").parents(".input")}var r;if(e.type=="checkbox"){r=$(e).siblings("span")}else{r=$(e)}if(!r.data("tooltipster-ns")){t.showTooltip(r,n)}}if(e.focus){e.focus()}};Nette.expandRuleArgument=function(e,t){if(t&&t.control){t=Nette.getEffectiveValue(e.elements.namedItem(t.control))}return t};Nette.validateRule=function(e,t,n,r){r=r===undefined?{value:Nette.getEffectiveValue(e)}:r;if(t.charAt(0)===":"){t=t.substr(1)}t=t.replace("::","_");t=t.replace(/\\/g,"");var i=Nette.isArray(n)?n.slice(0):[n];for(var o=0,a=i.length;o<a;o++){i[o]=Nette.expandRuleArgument(e.form,i[o])}return Nette.validators[t]?Nette.validators[t](e,Nette.isArray(n)?i:i[0],r.value,r):null};Nette.validators={filled:function(e,t,n){return n!==""&&n!==false&&n!==null&&(!Nette.isArray(n)||!!n.length)&&(!window.FileList||!(n instanceof window.FileList)||n.length)},blank:function(e,t,n){return!Nette.validators.filled(e,t,n)},valid:function(e,t,n){return Nette.validateControl(e,null,true)},equal:function(e,t,n){if(t===undefined){return null}function r(e){if(typeof e==="number"||typeof e==="string"){return""+e}else{return e===true?"1":""}}n=Nette.isArray(n)?n:[n];t=Nette.isArray(t)?t:[t];e:for(var i=0,o=n.length;i<o;i++){for(var a=0,s=t.length;a<s;a++){if(r(n[i])===r(t[a])){continue e}}return false}return true},notEqual:function(e,t,n){return t===undefined?null:!Nette.validators.equal(e,t,n)},minLength:function(e,t,n){return n.length>=t},maxLength:function(e,t,n){return n.length<=t},length:function(e,t,n){t=Nette.isArray(t)?t:[t,t];return(t[0]===null||n.length>=t[0])&&(t[1]===null||n.length<=t[1])},email:function(e,n,r){if(0!==window.isEmail.validate(r,{errorLevel:true})){return false}if(/^(_|([^\w\d]+))/.test(r)&&checkedAmbiguousEmails.indexOf(r)==-1){checkedAmbiguousEmails.push(r);t.showTooltip($(e),MESSAGES.alerts.emailAmbiguous);return false}return true},url:function(e,t,n,r){if(!/^[a-z\d+.-]+:/.test(n)){n="http://"+n}if(/^https?:\/\/((([-_0-9a-z\u00C0-\u02FF\u0370-\u1EFF]+\.)*[0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)?[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(n)){r.value=n;return true}return false},regexp:function(e,t,n){var r=typeof t==="string"?t.match(/^\/(.*)\/([imu]*)$/):false;try{return r&&new RegExp(r[1],r[2].replace("u","")).test(n)}catch(e){}},pattern:function(e,t,n){try{return typeof t==="string"?new RegExp("^("+t+")$").test(n):null}catch(e){}},integer:function(e,t,n){return/^-?[0-9]+$/.test(n)},float:function(e,t,n,r){n=n.replace(" ","").replace(",",".");if(/^-?[0-9]*[.,]?[0-9]+$/.test(n)){r.value=n;return true}return false},min:function(e,t,n){return Nette.validators.range(e,[t,null],n)},max:function(e,t,n){return Nette.validators.range(e,[null,t],n)},range:function(e,t,n){return Nette.isArray(t)?(t[0]===null||parseFloat(n)>=t[0])&&(t[1]===null||parseFloat(n)<=t[1]):null},submitted:function(e,t,n){return e.form["nette-submittedBy"]===e},fileSize:function(e,t,n){if(window.FileList){for(var r=0;r<n.length;r++){if(n[r].size>t){return false}}}return true},image:function(e,t,n){if(window.FileList&&n instanceof window.FileList){for(var r=0;r<n.length;r++){var i=n[r].type;if(i&&i!=="image/gif"&&i!=="image/png"&&i!=="image/jpeg"){return false}}}return true}};Nette.toggleForm=function(e,t){var n;Nette.toggles={};for(n=0;n<e.elements.length;n++){if(e.elements[n].tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}){Nette.toggleControl(e.elements[n],null,null,!t)}}for(n in Nette.toggles){Nette.toggle(n,Nette.toggles[n],t)}};Nette.toggleControl=function(e,t,n,r,i){t=t||Nette.parseJSON(e.getAttribute("data-nette-rules"));i=i===undefined?{value:Nette.getEffectiveValue(e)}:i;var o=false,a=function(){Nette.toggleForm(e.form,e)},s;for(var l=0,u=t.length;l<u;l++){var c=t[l],f=c.op.match(/(~)?([^?]+)/),d=c.control?e.form.elements.namedItem(c.control):e;if(!d){continue}s=n;if(n!==false){c.neg=f[1];c.op=f[2];var p=e===d?i:{value:Nette.getEffectiveValue(d)};s=Nette.validateRule(d,c.op,c.arg,p);if(s===null){continue}else if(c.neg){s=!s}if(!c.rules){n=s}}if(c.rules&&Nette.toggleControl(e,c.rules,s,r,i)||c.toggle){o=true;if(r){var h=!document.addEventListener,m=d.tagName?d.name:d[0].name,v=d.tagName?d.form.elements:d;for(var g=0;g<v.length;g++){if(v[g].name===m){if(h&&!v[g]["nette-toggleForm"]){Nette.addEvent(v[g],v[g].type in{checkbox:1,radio:1}?"click":"change",a)}v[g]["nette-toggleForm"]=true}}}for(var y in c.toggle||[]){if(Object.prototype.hasOwnProperty.call(c.toggle,y)){Nette.toggles[y]=Nette.toggles[y]||(c.toggle[y]?s:!s)}}}}return o};Nette.parseJSON=function(s){return(s||"").substr(0,3)==="{op"?eval("["+s+"]"):JSON.parse(s||"[]")};Nette.toggle=function(e,t,n){var r=document.getElementById(e);if(r){r.style.display=t?"":"none"}};Nette.initForm=function(t){t.noValidate="novalidate";Nette.addEvent(t,"submit",function(e){if(!Nette.validateForm(t)){if(e&&e.stopPropagation){e.stopPropagation()}else if(window.event){event.cancelBubble=true}return false}});Nette.toggleForm(t)};Nette.initOnLoad=function(){Nette.addEvent(window,"load",function(){for(var e=0;e<document.forms.length;e++){var t=document.forms[e];for(var n=0;n<t.elements.length;n++){if(t.elements[n].getAttribute("data-nette-rules")){Nette.initForm(t);break}}}Nette.addEvent(document.body,"click",function(e){var t=e?e.target:event.srcElement;if(t.form&&t.type in{submit:1,image:1}){t.form["nette-submittedBy"]=t}});Nette.addEvent(document.body,"change",function(e){if(e.target["nette-toggleForm"]){Nette.toggleForm(e.target.form,e.target)}})})};Nette.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"};Nette.inArray=function(e,t){if([].indexOf){return e.indexOf(t)>-1}else{for(var n=0;n<e.length;n++){if(e[n]===t){return true}}return false}};Nette.webalize=function(e){e=e.toLowerCase();var t="",n,r;for(n=0;n<e.length;n++){r=Nette.webalizeTable[e.charAt(n)];t+=r?r:e.charAt(n)}return t.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")};Nette.webalizeTable={"":"a","":"a","":"c","":"d","":"e","":"e","":"i","":"l","":"n","":"o","":"o","":"r","":"s","":"t","":"u","":"u","":"y","":"z"};return Nette});var Callbacks=function(){var n={popup:null};var r={};var i=null;this.init=function(){n.popup=new Popup(true);i=this};this.requireSuccessField=function(e){if(!e.success){throw new Error("Payload does not contain 'success' field, "+e+" given")}};this.addNamedCallback=function(e,t){if(r[e]!=undefined&&$("html").hasClass("dev")){console.log("Callback "+e+"already defined, will be overwritten")}r[e]=t};this.getNamedCallback=function(e){return this.existsNamedCallback(e)?r[e]:function(){}};this.existsNamedCallback=function(e){return r[e]!=undefined};this.eventTrigger=function(e){if(e.triggerEvent===undefined){return}for(var t in e.triggerEvent){var n=[];if(e.eventData!==undefined&&e.eventData[e.triggerEvent[t]]!==undefined){n=e.eventData[e.triggerEvent[t]]}$(document).trigger(e.triggerEvent[t],[n])}};this.applyCallback=function(e){if(e.applyCallback==undefined){return}var t=e.applyCallback;var n={};for(var r in t){if(!i.existsNamedCallback(r)){continue}n[r]={};n[r].function=i.getNamedCallback(r);n[r].data=t[r]}if(e.popup){ajaxContentAddedCallback=function(){i.fireCallbacks(n)}}else{i.fireCallbacks(n)}};this.fireCallbacks=function(e){for(var t in e){var n=e[t];n.function.apply(i,[n.data])}};this.openPopup=function(e){if(e.popup){var t=true;if(e.popup.enableClosing!==undefined){t=e.popup.enableClosing}n.popup.initialOpenAjax(e.popup.url,ajaxContentAddedCallback,closeCallback,t)}};this.init()};var PriceList=function(){var t;var n;var r={};var i={purchaseUrl:"[data-role=purchase-url]",paymentRegionSelect:"[name=payment-region-selector]",tariffRadio:"[name=tariff]"};var o={paymentRegionCode:"",tariffId:0};var a;this.init=function(){if(!this.isDisplayedInBrowser()){return}$(i.purchaseUrl).each(function(){r[$(this).data("paymentMethod")]=$(this).attr("href")});n=$("[name=prolong-automatically]");a=$("a.ajax");this.bindInitListeners();var e=$(i.paymentRegionSelect).val();this.selectPaymentRegionCode(e.length?e:$(i.paymentRegionSelect).data("defaultPaymentRegion"));this.selectTariffId($(i.tariffRadio+":checked").val());var t=false;$.nette.ext("goPayCheckout",{success:function(e){if(typeof e!=="object"||!e.hasOwnProperty("goPayCheckoutUrl")){return}if(t){return}t=true;_gopay.checkout({gatewayUrl:e.goPayCheckoutUrl,inline:true},function(e){t=false;$.nette.ajax(e.url)})}})};this.isDisplayedInBrowser=function(){return $(i.purchaseUrl).length>0};window.fastspringPopupClosed=function(e){a.removeClass("btn-loading");if(e!==null&&typeof e==="object"){window.location.href=a.data("fastspringThanksUrl")}};this.bindInitListeners=function(){var e=this;$(i.tariffRadio).on("click",function(){$("[data-role=price]").text($(this).data("price"));$("[data-role=sms-fee]").text($(this).data("smsFee"));$("[data-payment-method=sms] [data-role=price]").text($(this).data("smsPrice"));if($(this).val()==3){$("[data-role=btn-preparing]").removeClass("hidden").siblings("a.btn").addClass("hidden");$("[data-role=sms-fee-description]").addClass("hidden")}else{$("[data-role=btn-preparing]").addClass("hidden").siblings("a.btn").removeClass("hidden");$("[data-role=sms-fee-description]").removeClass("hidden")}e.selectTariffId($(this).val())});$(i.purchaseUrl).on("click",function(){t=$(this)});$(i.paymentRegionSelect).on("change",function(){e.selectPaymentRegionCode($(this).val())});a.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();var t=$(this);if(t.hasClass("btn-loading")){return}t.addClass("btn-loading");var n=t.attr("href");var r="?";if(n.indexOf("?")>=1){r="&"}$.nette.ajax({url:n+r+"no-popup=1"}).always(function(e){if(typeof e==="object"&&e.hasOwnProperty("applyCallback")&&typeof e["applyCallback"]==="object"&&e["applyCallback"].hasOwnProperty("fastspringCheckout")){}else{t.removeClass("btn-loading")}})});n.on("change",function(){e.updateUrls()})};this.clickLastTariffButton=function(){t.trigger("click")};this.selectPaymentRegionCode=function(e){o.paymentRegionCode=e;this.updateUrls()};this.selectTariffId=function(e){o.tariffId=e;this.updateUrls()};this.updateUrls=function(){$(i.purchaseUrl).each(function(){var e=r[$(this).data("paymentMethod")].replace("paymentRegionCode",o.paymentRegionCode).replace(0,o.tariffId);if(n.length&&n.prop("checked")&&$(this).attr("data-payment-method")===n.attr("data-payment-method")){e+="?prolong=1"}$(this).attr("href",e)})};this.init()};var EnterClicker=function(){$("[data-enter-click]").on("keypress",function(e){if(e.keyCode==13){e.preventDefault();$($(this).data("enterClick")).trigger("click")}})};var BrowserManager=function(){var i;this.init=function(){i=this};this.setTitle=function(e){document.title=e+MESSAGES.titles.baseTitle};this.setUrl=function(e){if(typeof e!="string"){throw new Error("Url is expected to be string, "+typeof e+" given.")}if(e.indexOf("/")==0){e=location.protocol+"//"+window.location.hostname+e}window.history.pushState(null,null,e)};this.replaceUrl=function(e){if(typeof e!="string"){throw new Error("Url is expected to be string, "+typeof e+" given.")}if(e.indexOf("/")==0){e=location.protocol+"//"+window.location.hostname+e}window.history.replaceState(null,null,e)};this.showErrorPage=function(e){if($.magnificPopup.instance){$.magnificPopup.instance.close()}i.setTitle(MESSAGES.titles.errorOccurred);$(".content").html($(".content[data-occasion=js-error]").html());var t=$("[data-role=contact-url]");if(t.length){var n=t.attr("href");var r=atob(n.substring(n.lastIndexOf("/")+1));r=r.replace("%errorId%",e);t.attr("href",n.substring(0,n.lastIndexOf("/")+1)+btoa(r))}};this.isMobile=function(){return/Android|webOS|BlackBerry/i.test(navigator.userAgent)||this.isIos()};this.isIos=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)};this.detectJavascript=function(){$("html").toggleClass("no-js js")};this.detectPlatform=function(){$("html").addClass(this.isMobile()?"mobile":"desktop")};this.preloadImages=function(){for(var e=0;e<arguments.length;e++){$("<img />").attr("src","/img/"+arguments[e])}};this.init()};var Application=function(){var e={uploadManager:null};this.init=function(){this.bindInitListeners()};this.bindInitListeners=function(){var n=this;$(document).on("alert",function(e,t){$(".ajax-spinner .btn-loading").removeClass("btn-loading");alert(t.message)});$(document).on("loginSuccessful",function(e,t){if(!t.state){return}$.magnificPopup.instance.close();if(t.occasion!="voucher"){n.refreshNavigation()}if(t.occasion){$(document).trigger("loginOccasion",[t.occasion])}});$(document).on("refreshNavigation",function(e,t){if(!t.state){return}n.refreshNavigation()});$("[data-action=immediate-click]").trigger("click")};this.refreshNavigation=function(){}};var UrlSwitcher=function(){var n={};this.init=function(){$("[data-role=url-switcher-source]").each(function(){var e=$(this).data();for(var t in e){if(t.indexOf("Url")>-1){n[t]=e[t]}}});this.bindInitListeners()};this.bindInitListeners=function(){$("[data-role=switch-url]").on("click",function(e){bm.replaceUrl(n[$(this).data("target")+"Url"])})};this.init()};function selectText(e){if(e[0].tagName=="INPUT"){e[0].select()}else if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e[0]);t.select()}else if(window.getSelection){var n=window.getSelection();var t=document.createRange();t.selectNodeContents(e[0]);n.removeAllRanges();n.addRange(t)}}"use strict";var _typeof2=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function c(o,a,s){function l(n,e){if(!a[n]){if(!o[n]){var t=typeof require=="function"&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t?t:e)},i,i.exports,c,o,a,s)}return a[n].exports}var u=typeof require=="function"&&require;for(var e=0;e<s.length;e++){l(s[e])}return l}return c})()({1:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./upload/gui/element/JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,"a.account.underline")||this;e._isUserAuthenticated=e.readAuthStateFromElement(e.$element);e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var n=this;$.nette.ext("watchAuthState",{success:function e(){var t=i.JQueryElementWrapper.getElementBySelector("a.account.underline");n.authState=n.readAuthStateFromElement(t)}})};Object.defineProperty(e.prototype,"isUserAuthenticated",{get:function e(){return this._isUserAuthenticated},enumerable:true,configurable:true});e.prototype.readAuthStateFromElement=function(e){return e.attr("data-authenticated")==="true"};Object.defineProperty(e.prototype,"authState",{set:function e(t){var n=false;if(t!=this._isUserAuthenticated){n=true}this._isUserAuthenticated=t;if(n){this.emit("authState.change.done",this._isUserAuthenticated)}},enumerable:true,configurable:true});return e}(i.JQueryElementWrapper);n.AuthStateWatcher=o},{"./upload/gui/element/JQueryElementWrapper":43}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){}e.isIos=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)};e.isMobile=function(){return/Android|webOS|BlackBerry/i.test(navigator.userAgent)||e.isIos()};e.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};e.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)};e.abortsPostRequestsOnOffline=function(){return e.isSafari()};return e}();n.BrowserManager=r},{}],3:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./upload/gui/element/JQueryElementWrapper");var o=e("./upload/abstract/entity/SizeInBytes");var a=e("../packages/ts.events");var s=function(n){r(e,n);function e(e){var t=n.call(this)||this;t.$checkboxes=e;t.$buttonLabelSpan=i.JQueryElementWrapper.getElementBySelector("#download-button span[data-label-delivery]");t.$mainCheckbox=i.JQueryElementWrapper.getElementBySelector(".toggle-all-checkboxes");t.$sizeWrapper=$("#download-button span[data-role=size]");t.filesCount=t.$checkboxes.length;if(t.$sizeWrapper.length){t.totalSize=t.$sizeWrapper.text();t.currentlySelectedBytes=t.totalBytes=t.$sizeWrapper.data("bytes")}else{t.$sizeWrapper=undefined;t.currentlySelectedBytes=t.totalBytes=0}t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var r=this;this.$mainCheckbox.on("change",function(){if(r.$mainCheckbox.prop("checked")){r.$checkboxes.prop("checked",true);r.currentlySelectedBytes=r.totalBytes}else{r.$checkboxes.prop("checked",false);r.currentlySelectedBytes=0}r.emit("check.done")});this.$checkboxes.on("change",function(e){var t=$(e.currentTarget);var n=t.data("downloadSize");if(t.prop("checked")){r.currentlySelectedBytes+=n}else{r.currentlySelectedBytes-=n}r.emit("check.done")});this.on("check.done",function(){var e=r.$checkboxes.filter(":checked").length;if(e){r.emit("files.select.some.done")}else{r.emit("files.select.none.done")}r.$mainCheckbox.prop("checked",e==r.filesCount);if(r.areAllSelected()||r.areNoneSelected()){if(r.$sizeWrapper){r.$sizeWrapper.text(r.totalSize)}r.$buttonLabelSpan.text(r.$buttonLabelSpan.data("labelDelivery"))}else{if(r.$sizeWrapper){r.$sizeWrapper.text(new o.SizeInBytes(r.currentlySelectedBytes,2).toString())}if(e==1){r.$buttonLabelSpan.text(r.$buttonLabelSpan.data("labelSingular"))}else{r.$buttonLabelSpan.text(r.$buttonLabelSpan.data(e>4?"labelPlural2":"labelPlural").replace("%d",e))}}})};e.prototype.areNoneSelected=function(){return this.$checkboxes.filter(":checked").length===0};e.prototype.areAllSelected=function(){return this.$checkboxes.filter(":checked").length===this.filesCount};Object.defineProperty(e.prototype,"currentSelection",{get:function e(){var t=[];var n;this.$checkboxes.each(function(){if($(this).prop("checked")){n=$(this).attr("name");t.push(n)}});return t},set:function e(t){var n;var r;this.$checkboxes.each(function(){r=$(this).attr("name");n=t.indexOf(r)>-1;$(this).prop("checked",n)})},enumerable:true,configurable:true});e.prototype.toggleFile=function(e){var t=this.$checkboxes.filter("[name="+e+"]");if(!t.length){throw new Error("Checkbox with name "+e+" not found")}t.prop("checked",!t.prop("checked"))};return e}(a.EventDispatcher);n.DownloadFilesChooser=s},{"../packages/ts.events":80,"./upload/abstract/entity/SizeInBytes":20,"./upload/gui/element/JQueryElementWrapper":43}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=e("./upload/UploadSupervisor");var i=e("./upload/gui/element/SingleEmailSuggestion");var o=e("./AuthStateWatcher");var a=e("./detail/DeliveryDetail");var s=function(){function e(){$(function(){new i.SingleEmailSuggestion;if($("#ulcontrol").length){var e=new o.AuthStateWatcher;var t=new r.UploadSupervisor(e);$(document).on("fatalError",function(){t.onFatalError()})}if($("#download-button").length){new a.DeliveryDetail}})}return e}();n.Main=s},{"./AuthStateWatcher":1,"./detail/DeliveryDetail":7,"./upload/UploadSupervisor":18,"./upload/gui/element/SingleEmailSuggestion":67}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){}e.isSupportedByObject=function(e){return Object[e]!==undefined};e.values=function(t){if(e.isSupportedByObject("values")){return Object.values(t)}else{return Object.keys(t).map(function(e){return t[e]})}};return e}();n.SmartObject=r},{}],6:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../packages/ts.events");var o=e("./gui/CommentForm");var a=function(t){r(e,t);function e(){var e=t.call(this)||this;e.commentForm=new o.CommentForm(e);e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var o=this;$.nette.ext("commentAdded",{success:function e(t){if(!t.triggerEvent){return}if(t.triggerEvent.indexOf("loginSuccessful")>-1){$.magnificPopup.instance.close();if(!t.eventData||!t.eventData.loginSuccessful||!t.eventData.loginSuccessful.occasion){return}var n=t.eventData.loginSuccessful.occasion;if(n==="privateComment"){var r=$("[data-occasion=private-comment]");if(!r.length){throw new Error("Missing privateCommentControl.")}var i=r.data("reloadCommentsUrl");$.nette.ajax({url:i,type:"POST"})}else if(n==="purchase"){o.emit("downloadButton.click.wanted")}else{o.emit("comment.submit.wanted")}}}})};return e}(i.EventDispatcher);n.CommentSupervisor=a},{"../../packages/ts.events":80,"./gui/CommentForm":9}],7:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../packages/ts.events");var a=e("./gui/DownloadButton");var s=e("../DownloadFilesChooser");var l=e("./gui/DeliveryDetailForm");var u=e("./MultipleDownloadCollisionWatcher");var c=e("./gui/CommentTextarea");var f=e("./CommentSupervisor");var d=e("../upload/gui/element/SharingContainer/ShareDeliveryForm");var p=e("./gui/GalleryStarter");var o=function(o){r(e,o);function e(){var n=o.call(this)||this;var e=new u.MultipleDownloadsCollisionWatcher;n.deliveryDetailForm=new l.DeliveryDetailForm(e);n.downloadFilesChooser=new s.DownloadFilesChooser(n.deliveryDetailForm.checkboxes);var t=new f.CommentSupervisor;n.downloadButton=new a.DownloadButton(n.downloadFilesChooser,n.deliveryDetailForm,e,t);e.deliveryDetailFormAction=n.deliveryDetailForm.action;new c.CommentTextarea;if($("#popup-share-delivery").length){var r=new d.ShareDeliveryForm([],n,undefined);r.on("delivery.shareForm.submit.wanted",function(e,t){$.nette.ajax({url:e,async:true,method:"POST",data:t}).done(function(e){n.emit("delivery.shareForm.submit.ajax.done");if((typeof e==="undefined"?"undefined":_typeof2(e))!="object"){throw new Error("Unexpected payload type.")}if(e.sent){n.emit("delivery.send.done")}else{throw new Error("Delivery was not sent properly.")}})})}if($("#gallery-enter").length){var i=new p.GalleryStarter(n.downloadFilesChooser)}return n}return e}(i.EventDispatcher);n.DeliveryDetail=o},{"../../packages/ts.events":80,"../DownloadFilesChooser":3,"../upload/gui/element/SharingContainer/ShareDeliveryForm":62,"./CommentSupervisor":6,"./MultipleDownloadCollisionWatcher":8,"./gui/CommentTextarea":10,"./gui/DeliveryDetailForm":11,"./gui/DownloadButton":12,"./gui/GalleryStarter":13}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){this.downloadInProgress=false;this.bindEventListeners()}e.prototype.isDownloadAllowed=function(){return!this.downloadInProgress};e.prototype.beginDownload=function(){this.downloadInProgress=true};Object.defineProperty(e.prototype,"deliveryDetailFormAction",{set:function e(t){this._deliveryDetailFormAction=t},enumerable:true,configurable:true});e.prototype.bindEventListeners=function(){var s=this;$.nette.ext("downloadInProgress",{complete:function e(t,n,r){var i;if(r.type){i=r.type}else if(r.method){i=r.method}else{i="GET"}var o=i.toUpperCase()==="POST";var a=r.url===s._deliveryDetailFormAction;if(o&&a){s.downloadInProgress=false}}})};return e}();n.MultipleDownloadsCollisionWatcher=r},{}],9:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../upload/gui/element/JQueryElementWrapper");var o=function(t){r(e,t);function e(e){var n=t.call(this,"#add-comment-form")||this;n.commentSupervisor=e;n.submit=function(e){if(e){e.preventDefault()}if(!Nette.validateForm(n.$element[0])){return}var t=n.$element.find("[name=text]");t.attr("readonly","readonly");$.nette.ajax({url:n.$element.attr("href"),data:n.$element.serialize(),type:"POST"}).done(function(e){$(".submit-comment-button").removeClass("btn-loading");if(e.popup){t.removeAttr("readonly")}else{t.removeAttr("readonly").val("")}})};n.bindEventListeners();return n}e.prototype.bindEventListeners=function(){this.$element.on("submit",this.submit);this.commentSupervisor.on("comment.submit.wanted",this.submit)};return e}(i.JQueryElementWrapper);n.CommentForm=o},{"../../upload/gui/element/JQueryElementWrapper":43}],10:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../upload/gui/element/JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,".js-comfortable-textarea")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("keypress",function(e){if(e.keyCode==13&&(e.metaKey||e.ctrlKey)){if(t.$element.val().replace(/\s+/g,"").length>0){t.$element.parents("form").submit()}}})};return e}(i.JQueryElementWrapper);n.CommentTextarea=o},{"../../upload/gui/element/JQueryElementWrapper":43}],11:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../upload/gui/element/JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"#delivery-detail-form")||this;t.multipleDownloadsCollisionWatcher=e;t.$singleFileDownloadButtons=i.JQueryElementWrapper.getElementBySelector(".download-single-file");t.emptyFormArray=t.createEmptyFormArray();t.bindEventListeners();return t}e.prototype.createEmptyFormArray=function(){var e=[];var t=this.$element.serializeArray();for(var n in t){if(t[n].value!=="on"){e.push(t[n])}}return e};e.prototype.bindEventListeners=function(){var i=this;this.$singleFileDownloadButtons.on("click",function(e){e.preventDefault();if(!i.multipleDownloadsCollisionWatcher.isDownloadAllowed()){return}i.multipleDownloadsCollisionWatcher.beginDownload();var t=i.emptyFormArray.slice();t.push({name:$(e.currentTarget).data("token"),value:"on"});var n="";for(var r in t){n+="&"+t[r].name+"="+t[r].value}$.nette.ajax({url:i.action,data:n.substr(1),type:"POST"})})};Object.defineProperty(e.prototype,"checkboxes",{get:function e(){return this.$element.find(".toggle-checkbox")},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"action",{get:function e(){return this.$element.attr("action")},enumerable:true,configurable:true});e.prototype.submit=function(){this.$element.submit()};return e}(i.JQueryElementWrapper);n.DeliveryDetailForm=o},{"../../upload/gui/element/JQueryElementWrapper":43}],12:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../upload/gui/element/JQueryElementWrapper");var o=function(o){r(e,o);function e(e,t,n,r){var i=o.call(this,"#download-button")||this;i.downloadFilesChooser=e;i.deliveryDetailForm=t;i.multipleDownloadsCollisionWatcher=n;i.commentSupervisor=r;i.isDisabled=false;i.bindEventListeners();return i}e.prototype.bindEventListeners=function(){var t=this;this.downloadFilesChooser.on("files.select.none.done",function(){t.$element.addClass("disabled");t.isDisabled=true});this.downloadFilesChooser.on("files.select.some.done",function(){t.$element.removeClass("disabled");t.isDisabled=false});this.commentSupervisor.on("downloadButton.click.wanted",function(){t.$element.trigger("click")});this.$element.on("click",function(e){e.preventDefault();if(t.isDisabled||t.$element.hasClass("btn-loading")||!t.multipleDownloadsCollisionWatcher.isDownloadAllowed()){return}t.multipleDownloadsCollisionWatcher.beginDownload();t.$element.addClass("btn-loading");t.deliveryDetailForm.submit()})};return e}(i.JQueryElementWrapper);n.DownloadButton=o},{"../../upload/gui/element/JQueryElementWrapper":43}],13:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../upload/gui/element/JQueryElementWrapper");var o=e("./SelectionToggleButton");var a=function(n){r(e,n);function e(e){var t=n.call(this,"#gallery-enter")||this;t.selectionToggleButton=new o.SelectionToggleButton(t,e);t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var i=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(i.list){i.openGallery(i.list)}else{$.nette.ajax({url:i.$element.data("listUrl"),method:"GET"}).done(function(e){if(!e){throw new Error("Missing payload")}if(!e.list){throw new Error("Missing list from payload")}i.list=e.list;i.activateProgressiveJpegSupport(window.blueimp.Gallery.prototype);var t=[];var n;for(var r in e.list){n=e.list[r];if(n.downloadSummary){continue}t.push(n.data.code)}i.selectionToggleButton.setAllPhotoCodes(t);i.openGallery(e.list)})}})};e.prototype.openGallery=function(e){var r=this;var t={fullscreen:false,container:this.$element.data("container"),urlProperty:"data.urls[0]",titleProperty:"data.title[0]",continuous:false,closeOnSideClick:false,onslideend:function e(t,n){r.emit("slideend.done",n)}};var n=window.blueimp.Gallery(e,t);n.container.addClass(n.options.controlsClass);var i=n.toggleSlideshow;n.toggleSlideshow=function(){n.toggleControls();i.apply(n)};this.emit("gallery.open.done")};e.prototype.activateProgressiveJpegSupport=function(e){var i=function e(t,n){var r=this;var i=this.imagePrototype.cloneNode(false);var o=t;var a=this.options.stretchImages;var s;var l;var u;var c;function f(e){if(!s){e={type:e.type,target:l};if(!l.parentNode){return r.setTimeout(f,[e])}s=true;$(i).off("load error",f);if(a){if(e.type==="load"){l.style.background='url("'+o+'") center no-repeat';l.style.backgroundSize=a}}n(e)}}if(typeof o!=="string"){o=this.getItemProperty(t,this.options.urlProperty);u=this.getItemProperty(t,this.options.titleProperty);c=this.getItemProperty(t,this.options.altTextProperty)||u}if(t.downloadSummary===true){l=this.elementPrototype.cloneNode(false);$(l).html(t.html);r.setTimeout(r.oncomplete,[{target:l}]);return l}if(a===true){a="contain"}a=this.support.backgroundSize&&this.support.backgroundSize[a]&&a;if(a){l=this.elementPrototype.cloneNode(false)}else{l=i;i.draggable=false}if(u){l.title=u}if(c){l.alt=c}if(this.getItemProperty(t,"data.code")){$(l).attr("data-code",this.getItemProperty(t,"data.code"))}$(i).on("load error",f);var d=Math.max(document.documentElement.clientWidth,window.innerWidth||0);i.src=o+"/"+d;return l};e.imageFactory=function(e,t){var n=this;var r=i.apply(n,[e,t]);n.slides[this.index].appendChild(r);n.oncomplete({target:r});return r}};return e}(i.JQueryElementWrapper);n.GalleryStarter=a},{"../../upload/gui/element/JQueryElementWrapper":43,"./SelectionToggleButton":14}],14:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../../upload/gui/element/JQueryElementWrapper");var o=function(r){i(e,r);function e(e,t){var n=r.call(this,"[data-role=selection-toggle]")||this;n.galleryStarter=e;n.downloadFilesChooser=t;n.allPhotoCodes=[];n.selectedPhotoCodes=[];n.setterCalled=false;n.proxyChecksToDownloadFilesChooser=false;n.updateCurrentPhotoCode=function(e){n.currentPhotoCode=$(e).children("img").attr("data-code")};n.redrawSelectionButton=function(){if(!n.currentPhotoCode){n.$element.hide();return}n.$element.show();var e;if(n.selectedPhotoCodes.length===0){e=n.$element.data("addFirstPlaceholder")}else if(n.selectedPhotoCodes.indexOf(n.currentPhotoCode)===-1){e=n.$element.data("addPlaceholder")}else{e=n.$element.data("removePlaceholder")}n.$element.text(e)};n.togglePhotoCodeSelected=function(){if(!n.currentPhotoCode){throw new Error("This should never happen")}var e=n.selectedPhotoCodes.indexOf(n.currentPhotoCode);if(e===-1){n.selectedPhotoCodes.push(n.currentPhotoCode)}else{n.selectedPhotoCodes.splice(e,1)}if(n.proxyChecksToDownloadFilesChooser){n.downloadFilesChooser.toggleFile(n.currentPhotoCode)}};n.bindEventListeners();return n}e.prototype.setAllPhotoCodes=function(e){this.allPhotoCodes=e;this.setterCalled=true};e.prototype.bindEventListeners=function(){var i=this;this.galleryStarter.on("gallery.open.done",function(){if(!i.setterCalled){throw new Error("Call setAllPhotoCodes() first")}if(i.downloadFilesChooser.areAllSelected()||i.downloadFilesChooser.areNoneSelected()){i.selectedPhotoCodes=[]}else{i.proxyChecksToDownloadFilesChooser=true;var e=[];for(var t=0,n=i.downloadFilesChooser.currentSelection;t<n.length;t++){var r=n[t];if(i.allPhotoCodes.indexOf(r)>-1){e.push(r)}}i.selectedPhotoCodes=e}});this.galleryStarter.on("slideend.done",this.redrawSelectionButton);this.galleryStarter.on("slideend.done",this.updateCurrentPhotoCode);this.$element.on("click",this.togglePhotoCodeSelected);this.$element.on("click",this.redrawSelectionButton)};return e}(r.JQueryElementWrapper);n.SelectionToggleButton=o},{"../../upload/gui/element/JQueryElementWrapper":43}],15:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=function(e){r(t,e);function t(){return e.call(this,"[UnsupportedBrowserError]")||this}return t}(Error);n.UnsupportedBrowserError=i},{}],16:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e,t){this.deliveryLink=e;this.facebookAppId=t;this.init();this.bindEventListeners()}e.prototype.init=function(){var e=this;window.fbAsyncInit=function(){FB.init({appId:e.facebookAppId,xfbml:true,version:"v2.5"})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src="//connect.facebook.net/en_US/sdk.js";i.parentNode.insertBefore(r,i)})(document,"script","facebook-jssdk")};e.prototype.bindEventListeners=function(){var t=this;$("#fbShareButton").click(function(e){FB.ui({method:"send",link:t.deliveryLink});e.preventDefault()})};return e}();n.FacebookScript=r},{}],17:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e){this.uploadSupervisor=e;this._wasUploadStarted=false;this._isUploadingInProgress=false;this._wasDeliverySent=false;this._wasDeliveryLinkTabFocused=false;this._isShareDeliveryFormEdited=false;this.bindEventListeners();this.watchShareDeliveryFormChanges()}e.prototype.bindEventListeners=function(){var e=this;this.uploadSupervisor.once("step.postChange.wanted",function(){e._wasUploadStarted=true});this.uploadSupervisor.on("file.upload.wanted",function(){e._isUploadingInProgress=true});this.uploadSupervisor.on("file.upload.complete.all.done",function(){e._isUploadingInProgress=false});this.uploadSupervisor.on("delivery.send.done",function(){e._wasDeliverySent=true;e._isShareDeliveryFormEdited=false;e.watchShareDeliveryFormChanges()});this.uploadSupervisor.once("tab.link.focus.done",function(){e._wasDeliveryLinkTabFocused=true})};e.prototype.canLeaveSafely=function(){return!this._isUploadingInProgress&&(!this._wasUploadStarted||!this.isShareDeliveryFormEdited()&&(this._wasDeliveryLinkTabFocused||this._wasDeliverySent))};e.prototype.isShareDeliveryFormEdited=function(){return this._isShareDeliveryFormEdited};e.prototype.watchShareDeliveryFormChanges=function(){var e=this;this.uploadSupervisor.once("delivery.shareForm.inputs.edit.done",function(){e._isShareDeliveryFormEdited=true})};Object.defineProperty(e.prototype,"promptMessage",{get:function e(){if(this._isUploadingInProgress){return MESSAGES.alerts.confirmUploadAbort}else if(!this._wasDeliverySent){return MESSAGES.alerts.confirmFilelistLeave}else{return MESSAGES.alerts.confirmShareLeave}},enumerable:true,configurable:true});return e}();n.SafePageLeavingWatcher=r},{}],18:[function(e,t,n){var o=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../../packages/ts.events/index");var a=e("./backend/model/DataTransferController");var s=e("./gui/element/Dropzone");var l=e("./gui/element/FileInput");var c=e("./gui/model/UploadProblemAnnouncer");var f=e("./backend/model/FileContainer");var d=e("./backend/entity/FileDecorator");var p=e("./gui/model/UploadStepController");var u=e("./abstract/entity/uploadStep/UploadStepChange");var h=e("history/createBrowserHistory");var m=e("./abstract/entity/uploadStep/FilelistUploadStep");var v=e("./abstract/entity/uploadStep/SharingUploadStep");var g=e("./SafePageLeavingWatcher");var y=e("../SmartObject");var b=e("../BrowserManager");var w=e("promise");var i=function(r){o(i,r);function i(e){var u=r.call(this)||this;u.authStateWatcher=e;u.isDeliveryCreated=false;u.latestFileUploadStartTimestamp=null;u.ignoreHistoryEvents=false;u.canFilesBeAdded=true;u.stepsPushedInHistory={filelist:false,sharing:false};u.filesUploadedBeforeLatestFileUploadStart={};u.shouldLeaveWithoutPrompting=false;u.canReturnToFilelist=true;u.stopIgnoringAfterNextHistoryEvent=false;u.noEmit=false;u.requestFileUpload=function(l){var e=new w(function(t,n){var r=[];var i=[];var o=0;var a=function e(){if(r.length||i.length){n({duplicateFiles:r,directories:i})}else{t({})}};var e=function e(t){var n=new d.FileDecorator(l[t]);n.isDirectory().then(function(){i.push(n);o++;if(o==l.length){a()}},function(){if(u.fileContainer.get(n.identifier)){r.push(n)}else if(n.size==0){u.emit("problem.file.empty.wanted")}else if(n.size>u.maxUploadBytes||n.size+u.fileContainer.totalBytes>u.maxUploadBytes){u.emit("problem.file.tooBig.wanted",u.maxUploadBytes)}else{u.emit("file.upload.wanted",u.fileContainer.add(n))}o++;if(o==l.length){a()}})};for(var s=0;s<l.length;s++){e(s)}});e.then(function(){},function(e){if(e.duplicateFiles.length){u.emit("problem.file.duplicate.wanted",e.duplicateFiles)}if(e.directories.length){u.emit("problem.file.directory.wanted",e.directories)}})};u.onFatalError=function(){u.noEmit=true};u.fileContainer=new f.FileContainer;u.dataTransferController=new a.DataTransferController(u);try{u.dropzone=new s.Dropzone(u)}catch(e){if(e instanceof s.DropzoneMissingError){u.dropzone=null}else{throw e}}u.fileInput=new l.FileInput;u.uploadProblemAnnouncer=new c.UploadProblemAnnouncer(u);u.uploadStepController=new p.UploadStepController(u,u.fileInput,u.authStateWatcher);u.browserHistory=h.default({forceRefresh:false});u.maxUploadBytes=u.uploadStepController.maxUploadBytes;u.safePageLeavingWatcher=new g.SafePageLeavingWatcher(u);new BeforeUnload(u.safePageLeavingWatcher.promptMessage,[function(){var e=!u.shouldLeaveWithoutPrompting&&!u.safePageLeavingWatcher.canLeaveSafely();if(e&&u.safePageLeavingWatcher.isShareDeliveryFormEdited()){setTimeout(function(){u.emit("shareDeliveryForm.tab.focus.wanted")},0)}return e?u.safePageLeavingWatcher.promptMessage:false}]);Offline.options={requests:false,reconnect:{initialDelay:5,delay:10}};var t=document.createElement("a");t.href=window.location.href;var n="/";if(typeof t.search==="string"&&t.search.length){n+=t.search}u.browserHistory.replace(n,{step:"start"});u.bindEventListeners();return u}i.convertFileListToArray=function(e){var t=[];for(var n=0;n<e.length;n++){t.push(e.item(n))}return t};i.prototype.bindEventListeners=function(){var r=this;if(this.dropzone){this.dropzone.on("files.drop.done",function(e){if(!r.canFilesBeAdded){return}r.emit("drop.done");r.requestFileUpload(i.convertFileListToArray(e.files))});this.dropzone.on("drag.enter.wanted",function(e){if(r.canFilesBeAdded){r.emit("drag.enter.wanted",e)}});this.dropzone.on("drag.leave.wanted",function(){r.emit("drag.leave.wanted")});this.dropzone.on("drop.wanted",function(e,t){if(r.canFilesBeAdded){r.emit("drop.wanted",e,t)}});this.dropzone.on("problem.unsupportedDrop.wanted",function(){r.emit("problem.unsupportedDrop.wanted")})}this.fileInput.on("files.choose.done",function(e){if(!r.canFilesBeAdded){return}r.requestFileUpload(i.convertFileListToArray(e))});Offline.on("down",function(){r.emit("connection.down.done")});Offline.on("up",function(){r.emit("connection.up.done")});this.dataTransferController.on("upload.retrieveDetails.done",function(e){r._upload=e;r.emit("step.postChange.wanted",new u.UploadStepChange)});this.dataTransferController.on("problem.upload.retrieveDetails.wanted",function(e){r.emit("upload.cannotStart.done",e.error)});this.on("upload.cannotStart.done",function(){r.canFilesBeAdded=false});this.on("delivery.send.done",function(){r.canReturnToFilelist=false});this.uploadProblemAnnouncer.on("file.retry.wanted",function(e){r.requestFileUpload([e.fileInstance])});this.uploadProblemAnnouncer.on("file.omit.wanted",function(e){if(r.areFilesPresentAndAllUploaded){r.emit("delivery.create.wanted")}});this.dataTransferController.once("upload.start.wanted",function(){r.lockUserActions()});this.dataTransferController.on("file.add.done",function(e){r.refreshTimestampIfSuitable();r.emit("file.add.done",e)});this.dataTransferController.on("file.add.wanted",function(e){r.emit("file.add.wanted",e)});this.dataTransferController.on("file.upload.done",function(e,t){var n=r.fileContainer.get(e.identifier);if(!n){throw new Error("File with identifier "+e.identifier+" not found in container, cannot perform file.upload.done.")}n.token=t;r.emit("file.upload.complete.done")});this.dataTransferController.on("upload.progress.refresh.done",function(e){var t=e.loaded+r.bytesUploadedPreviously;r._uploadProgress={loaded:t,total:r.fileContainer.totalBytes};if(r.latestFileUploadStartTimestamp){var n=i.getCurrentTimestamp()-r.latestFileUploadStartTimestamp;r._uploadProgress.averageBitrate=e.loaded*(1e3/n)*8}r.emit("upload.progress.refresh.done")});this.dataTransferController.on("problem.file.upload.wanted",function(e,t){r.emit("file.upload.complete.done");r.emit("file.remove.wanted",e);r.emit("fileUpload.failed.done",e,t)});this.on("file.upload.complete.done",function(){if(!r.dataTransferController.activeUploads){r.filesUploadedBeforeLatestFileUploadStart=r.fileContainer.uploadedBytesWithIdentifiers;r.latestFileUploadStartTimestamp=null;r.emit("file.upload.complete.all.done")}});this.on("file.upload.complete.all.done",function(){if(r.uploadStepController.currentUploadStep instanceof v.SharingUploadStep&&r.areFilesPresentAndAllUploaded){r.emit("delivery.create.wanted")}});this.on("step.postChange.done",function(e){if(e instanceof v.SharingUploadStep){if(r.onSharingUploadStep){setTimeout(function(){r.onSharingUploadStep&&r.onSharingUploadStep();r.onSharingUploadStep=undefined},0)}if(r.areFilesPresentAndAllUploaded){r.emit("delivery.create.wanted")}}});this.once("delivery.create.wanted",function(){if(r.isDeliveryCreated){throw new Error("Delivery is created already.")}if(!r._upload){throw new Error("Upload should have been instantiated already.")}$.nette.ajax({url:r.dataTransferController.createDeliveryUrl,async:true,method:"POST",data:{token:r._upload.token}}).done(function(e,t,n){if((typeof n==="undefined"?"undefined":_typeof2(n))!="object"){throw new Error("Unexpected jqXHR given.")}if(n.status!=201){throw new Error("Delivery could not be created from upload.")}r.isDeliveryCreated=true;if((typeof e==="undefined"?"undefined":_typeof2(e))!="object"){throw new Error("Unexpected payload type.")}if(e.deliveryLink){r.emit("delivery.link.available.done",e.deliveryLink)}else{throw new Error("DeliveryLink is missing from payload.")}r.emit("delivery.create.done");r.emit("upload.progress.refresh.done")})});this.on("delivery.link.available.done",function(e){if(r.uploadStepController.currentUploadStep instanceof v.SharingUploadStep){r.changeUrlToDeliveryLink(e)}else{r.onSharingUploadStep=function(){r.changeUrlToDeliveryLink(e)}}});this.on("connection.down.done",function(){r.latestFileUploadStartTimestamp=null});this.on("connection.up.done",function(){r.refreshTimestampIfSuitable()});this.uploadStepController.on("tab.link.focus.done",function(){r.emit("tab.link.focus.done")});this.uploadStepController.on("file.remove.wanted",function(e){var t=r.fileContainer.get(e);if(t){r.emit("file.remove.wanted",t)}});this.uploadStepController.on("maxUploadBytes.change.detected.done",function(){r.maxUploadBytes=r.uploadStepController.maxUploadBytes});this.uploadStepController.on("delivery.shareForm.inputs.edit.done",function(){r.emit("delivery.shareForm.inputs.edit.done")});this.uploadStepController.on("delivery.shareForm.redraw.wanted",function(e,t){$.nette.ajax({url:e,method:"POST",data:{token:r.upload.token}}).done(function(e){if(!e){throw new Error("Missing refreshShareDeliveryForm payload.")}if(_typeof2(e.recipients)!="object"){throw new Error("Missing recipients from refreshShareDeliveryForm payload.")}r.emit("delivery.shareForm.redraw.done",e.recipients,t)})});this.uploadStepController.on("filelist.nextStep.wanted",function(){if(!r._upload){throw new Error("Entity Upload has not been set yet, cannot continue to sharing.")}r.lockUserActions();if(r.stepsPushedInHistory.sharing){r.ignoreHistoryEvents=true;r.browserHistory.goForward()}r.emit("filelist.nextStep.wanted")});this.uploadStepController.on("filelist.nextStep.ajax.wanted",function(){r.emit("filelist.nextStep.ajax.wanted")});this.uploadStepController.on("filelist.nextStep.done",function(){r.emit("step.postChange.wanted",new u.UploadStepChange)});this.uploadStepController.on("sharing.previousStep.done",function(){r.emit("step.postChange.wanted",new u.UploadStepChange(false))});this.uploadStepController.on("step.postChange.done",function(e){r.ignoreHistoryEvents=true;if(e instanceof m.FilelistUploadStep&&!r.stepsPushedInHistory.filelist){r.browserHistory.push(r.dataTransferController.newDeliveryUrl,{step:"filelist"});r.stepsPushedInHistory.filelist=true}else if(e instanceof v.SharingUploadStep&&!r.stepsPushedInHistory.sharing){r.browserHistory.push(r.dataTransferController.newDeliveryUrl,{step:"sharing"});r.stepsPushedInHistory.sharing=true}setTimeout(function(){r.ignoreHistoryEvents=false},0);r.unlockUserActions();r.emit("step.postChange.done",e)});this.browserHistory.listen(function(e,t){if(!r.ignoreHistoryEvents){if(t=="REPLACE"){throw new Error("Unexpected history replace action.")}var n=e.state;if(!n){r.ignoreHistoryEvents=true;return}if(t=="POP"&&(!r.canReturnToFilelist||!n||n.step!="sharing"&&n.step!="filelist")){if(!r._upload){return}r.ignoreHistoryEvents=true;if(window.confirm(r.safePageLeavingWatcher.promptMessage)){r.shouldLeaveWithoutPrompting=true;if(n.step=="start"||n.step=="filelist"){window.location.href=e.pathname}}else{r.browserHistory.goForward();if(b.BrowserManager.isChrome()){r.stopIgnoringAfterNextHistoryEvent=true}else{setTimeout(function(){r.ignoreHistoryEvents=false},0)}}}else{if(!n){throw new Error("State information is missing from location.")}if(typeof n.step!="string"){throw new Error("Step information is missing from location.state.")}if(n.step=="filelist"){if(t!="POP"){throw new Error("Unexpected pop action received on sharing.")}r.emit("sharing.previousStep.wanted")}else if(n.step=="sharing"){if(t!="POP"){throw new Error("Unexpected pop action received on filelist.")}r.emit("filelist.nextStep.wanted")}else{throw new Error("Unexpected history location state step "+n.step+".")}}}else if(r.stopIgnoringAfterNextHistoryEvent){r.ignoreHistoryEvents=false;r.stopIgnoringAfterNextHistoryEvent=false}});this.dataTransferController.on("file.remove.done",function(t){r.fileContainer.remove(t);if(r.filesUploadedBeforeLatestFileUploadStart.hasOwnProperty(t.identifier)){delete r.filesUploadedBeforeLatestFileUploadStart[t.identifier]}if(t.token){if(!r._upload){throw new Error("File cannot be removed prior to upload initialization.")}$.nette.ajax({url:r.dataTransferController.removeFileUrl,async:true,method:"POST",data:{token:r._upload.token,fileToken:t.token}}).done(function(e){if(!e.token){throw new Error("Missing file token in payload.")}if(e.token!=t.token){throw new Error("Expected token "+t.token+", received "+e.token+".")}})}r.emit("file.remove.done",t)});this.dataTransferController.on("upload.start.wanted",function(){r.emit("upload.start.wanted")});this.uploadStepController.on("delivery.shareForm.submit.wanted",function(e,t){$.nette.ajax({url:e,async:true,method:"POST",data:t}).done(function(e){r.emit("delivery.shareForm.submit.ajax.done");if((typeof e==="undefined"?"undefined":_typeof2(e))!="object"){throw new Error("Unexpected payload type.")}if(e.popup){return}if(e.automaticSubmitAllowed){r.emit("delivery.shareForm.automaticSubmit.enable.wanted")}else if(e.sent){r.emit("delivery.send.done",e.ownerEmail)}else{throw new Error("Delivery was not sent properly.")}})});this.uploadStepController.on("sharing.previousStep.wanted",function(){r.lockUserActions();r.ignoreHistoryEvents=true;r.browserHistory.goBack();r.emit("sharing.previousStep.wanted")});this.uploadStepController.on("upperRightNavButton.action.wanted",function(e){if(!r._upload){throw new Error("Upload should have been initialized already.")}$.nette.ajax({url:e,method:"POST",data:{token:r._upload.token,isUserAuthenticated:r.authStateWatcher.isUserAuthenticated}}).done(function(e){if(e){if(e.openNewTabWithUrl){var t=window.open(e.openNewTabWithUrl,"_blank");if(t){t.focus()}else{alert("This action is not supported with your current browser settings.")}}if(e.snippets){for(var n in e.snippets){if(n.indexOf("share-delivery-form")){if(_typeof2(e.recipients)=="object"){r.emit("delivery.shareForm.redraw.done",e.recipients)}else{throw new Error("No recipients supplied when redrawing shareDeliveryForm.")}break}}}}})});this.uploadStepController.on("delivery.name.save.wanted",function(e,t){if(!r.upload){throw new Error("Cannot update name if upload not yet started.")}$.nette.ajax({url:e,method:"POST",data:{name:t,token:r.upload.token}}).done(function(e){if(!e){throw new Error("Missing payload in setName callback.")}if(!e.name){throw new Error('Missing property "name" from payload of setName callback.')}r.emit("delivery.name.save.done",e.name)})});this.uploadStepController.on("delivery.security.password.save.wanted",function(e,t,n){if(!r.upload){throw new Error("Cannot update password if upload not yet started.")}$.nette.ajax({url:e,method:"POST",data:{password:t,sendToEmail:n,token:r.upload.token}}).done(function(e){if(!e){throw new Error("Missing payload in setPassword callback.")}if(e.popup){r.emit("password.authPopup.done");return}if(typeof e.password==="undefined"){throw new Error('Missing property "password" from payload of setPassword callback.')}if(typeof e.sendToEmail==="undefined"){throw new Error('Missing property "sendPasswordToEmail" from payload of setPassword callback.')}r.emit("delivery.security.password.save.done",e.password,e.sendToEmail)})})};i.getCurrentTimestamp=function(){return Date.now?Date.now():(new Date).getTime()};i.prototype.lockUserActions=function(){this.emit("actions.lock.wanted")};i.prototype.unlockUserActions=function(){this.emit("actions.unlock.wanted")};i.prototype.changeUrlToDeliveryLink=function(e){this.ignoreHistoryEvents=true;var t=document.createElement("a");t.href=e;this.browserHistory.replace(t.pathname,{step:"sharing"});this.ignoreHistoryEvents=false};i.prototype.refreshTimestampIfSuitable=function(){if(!this.latestFileUploadStartTimestamp){this.latestFileUploadStartTimestamp=i.getCurrentTimestamp()}};Object.defineProperty(i.prototype,"uploadProgress",{get:function e(){return this._uploadProgress},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"filesInArray",{get:function e(){return y.SmartObject.values(this.fileContainer.files)},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"uploadProgressPercentage",{get:function e(){if(this.uploadProgress===undefined){return"0"}var t=0;if(this.uploadProgress.total>1073741824){t=2}else if(this.uploadProgress.total>104857600){t=1}return(this.uploadProgress.loaded/this.uploadProgress.total*100).toFixed(t)},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"upload",{get:function e(){if(!this._upload){throw new Error("Upload is not yet initialized.")}return this._upload},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"bytesUploadedPreviously",{get:function e(){return y.SmartObject.values(this.filesUploadedBeforeLatestFileUploadStart).reduce(function(e,t){return e+t},0)},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"canDeliveryBeSent",{get:function e(){return this.isDeliveryCreated&&!this.fileContainer.unfinishedFilesCount},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"areFilesPresentAndAllUploaded",{get:function e(){return!this.fileContainer.unfinishedFilesCount&&this.fileContainer.totalFilesCount>0},enumerable:true,configurable:true});i.prototype.emit=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}if(this.noEmit){return this}return r.prototype.emit.apply(this,[e].concat(t))};return i}(r.EventDispatcher);n.UploadSupervisor=i},{"../../packages/ts.events/index":80,"../BrowserManager":2,"../SmartObject":5,"./SafePageLeavingWatcher":17,"./abstract/entity/uploadStep/FilelistUploadStep":22,"./abstract/entity/uploadStep/SharingUploadStep":23,"./abstract/entity/uploadStep/UploadStepChange":25,"./backend/entity/FileDecorator":26,"./backend/model/DataTransferController":29,"./backend/model/FileContainer":30,"./gui/element/Dropzone":40,"./gui/element/FileInput":41,"./gui/model/UploadProblemAnnouncer":78,"./gui/model/UploadStepController":79,"history/createBrowserHistory":94,promise:101}],19:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e){this.seconds=e}e.prototype.toString=function(){return e.format(this.seconds)};e.format=function(e){var t=new Date(e*1e3);var n=Math.floor(e/86400),r=t.getUTCHours(),i=t.getUTCMinutes();var o=n>0?n+MESSAGES.time.shortcuts.days+" ":"";var a=r>0?r+MESSAGES.time.shortcuts.hours+" ":"";var s=i>0?i+MESSAGES.time.shortcuts.minutes+" ":"";return o+a+s+t.getUTCSeconds()+MESSAGES.time.shortcuts.seconds};return e}();n.RemainingTime=r},{}],20:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function r(e,t){if(t===void 0){t=1}var n=this;this.bytes=e;this.precision=t;this.toString=function(){return r.format(n.bytes,n.precision)}}r.format=function(e,t){if(Math.abs(e)<r.thresh){return e+" B"}var n=-1;do{e/=r.thresh;n++}while(Math.abs(e)>=r.thresh&&n<r.units.length-1);return e.toFixed(t)+" "+r.units[n]};r.thresh=1024;r.units=["KB","MB","GB","TB","PB","EB","ZB","YB"];return r}();n.SizeInBytes=r},{}],21:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=function(r){i(l,r);function l(e){var t=r.call(this)||this;t.name=null;t.single=false;if(e.length==1){t.single=true;t.name=e[0].name}else{var n=[];e.forEach(function(e){n.push(e.type)});t.name=l.getDominantFileType(n)}return t}l.getDominantFileType=function(e,t){if(t===void 0){t=false}var n=.9;var r=e.length;var i={};var o;for(var a=0;a<r;a++){if(t){o=e[a].split("/")[0]}else{o=e[a]}if(i.hasOwnProperty(o)){i[o]++}else{i[o]=1}}for(var s in i){if(i.hasOwnProperty(s)&&i[s]/r>=n){return s}}if(t){return null}else{return l.getDominantFileType(e,true)}};return l}(Object);n.DeliveryNameDetails=r},{}],22:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){}e.prototype.allowsGoingBack=function(){return false};e.prototype.getName=function(){return"filelist"};return e}();n.FilelistUploadStep=r},{}],23:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){}e.prototype.allowsGoingBack=function(){return true};e.prototype.getName=function(){return"sharing"};return e}();n.SharingUploadStep=r},{}],24:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){}e.prototype.allowsGoingBack=function(){return false};e.prototype.getName=function(){return"start"};return e}();n.StartUploadStep=r},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e){if(e===void 0){e=true}this.changeToNext=e}return e}();n.UploadStepChange=r},{}],26:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var i=e("../../../error/errors");var o=e("promise");var r=function(){function t(e){var r=this;this.file=e;this.msClose=function(){return r.file.msClose()};this.msDetachStream=function(){return r.file.msDetachStream()};this.slice=function(e,t,n){if(typeof r.file.slice!=="function"){throw new i.UnsupportedBrowserError}return r.file.slice(e,t,n)};this.lastModifiedDate=e.lastModifiedDate;this.lastModified=e.lastModified;this.name=t.sanitizeFilename(e.name);this.size=e.size;this.type=e.type;this.webkitRelativePath=e.webkitRelativePath;this.identifier=t.getFileIdentifier(e);t.filesCount++;this._order=t.filesCount}t.getFileIdentifier=function(e){var t=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,"")};t.prototype.isDirectory=function(){var r=this;return new o(function(t,n){if(r.type){n(null)}var e=new FileReader;e.onload=function(e){n(null)};e.onerror=function(e){t(true)};e.readAsText(r.slice(0,1))})};Object.defineProperty(t.prototype,"token",{get:function e(){if(this._token){return this._token}else{return null}},set:function e(t){if(this._token){throw new Error("Token "+this._token+" cannot be overwritten with "+(t?'"'+t+'"':null)+" for file "+this.identifier+".")}else if(!t){throw new Error("Token cannot be set to null.")}else if(t.length!=12){throw new Error("Bad token "+t+" given")}this._token=t},enumerable:true,configurable:true});t.sanitizeFilename=function(e){var t={94:{i:"",o:"",u:""},769:{a:"",e:"",i:"",o:"",u:"",y:""},776:{a:"",e:"",i:"",o:"",u:"",y:""},778:{a:"",u:""},780:{e:"",s:"",c:"",r:"",z:""},126:{n:"",o:""}};var n="";var r="";for(var i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>600||o==94||o==126){var a=n.lastIndexOf(r);r=r.toString().toLowerCase();if(t.hasOwnProperty(o.toString())&&t[o].hasOwnProperty(r)){var s=t[o][r];n=n.substring(0,a)+(/A-Z/.test(r)?s.toUpperCase():s)}}else{r=e.charAt(i);n+=r}}return n};Object.defineProperty(t.prototype,"order",{get:function e(){return this._order},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fileInstance",{get:function e(){return this.file},enumerable:true,configurable:true});t.filesCount=0;return t}();n.FileDecorator=r},{"../../../error/errors":15,promise:101}],27:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=function(i){r(e,i);function e(e,t,n){var r=i.call(this)||this;r.token=e.token;r.progress=t;r.name=n.name;r.single=n.single;return r}return e}(Object);n.GoToShareAjaxData=i},{}],28:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e,t,n){this.token=e;this.url=t;this.chunkBytes=n;if(this.token.length!=32){throw new Error("Bad token "+this.token+" given")}}return e}();n.Upload=r},{}],29:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./SessionIdController");var o=e("../../../../packages/ts.events/index");var a=e("../entity/Upload");var s=e("./XhrContainer");var u=e("../../../BrowserManager");var l=function(t){r(e,t);function e(e){var l=t.call(this)||this;l.uploadCannotStart=false;l.interruptedFileUploads=[];l.isConnectionDown=false;l.isTus=false;l.bindEventListeners=function(){l.uploadSupervisor.on("file.upload.wanted",l.addFile);l.once("upload.start.wanted",l.requestUploadDetailsFromServers);l.once("upload.retrieveDetails.done",l.initUploadWidget);l.on("upload.interrupted.done",function(e){l.interruptedFileUploads.push(e)});l.uploadSupervisor.on("connection.up.done",function(){l.isConnectionDown=false;for(var e=0,t=l.interruptedFileUploads;e<t.length;e++){var n=t[e];l.startFileUpload(n)}l.interruptedFileUploads=[]});l.uploadSupervisor.on("connection.down.done",function(){l.isConnectionDown=true;if(!u.BrowserManager.abortsPostRequestsOnOffline()){for(var e in l.xhrContainer.xhrObjects){l.xhrContainer.xhrObjects[e].abort()}}});l.uploadSupervisor.on("file.remove.wanted",l.removeFile)};l.requestUploadDetailsFromServers=function(){var e={url:l.uploadWidget.data("uploadStartUrl"),type:"GET",async:true};var t=$.nette.ajax(e);t.done(function(e){if(!e.uploadToken){throw new Error("Missing upload token from payload.")}if(!e.uploadUrl){throw new Error("Missing upload url from payload.")}l.upload=new a.Upload(e.uploadToken,e.uploadUrl,l.uploadWidget.data("chunkBytes"));if(l.upload.url.indexOf("upload-new")>-1){l.isTus=true}l.emit("upload.retrieveDetails.done",l.upload)}).fail(function(e,t,n){var r={};if(_typeof2(e.responseJSON)=="object"){r=e.responseJSON}l.uploadCannotStart=true;l.emit("problem.upload.retrieveDetails.wanted",r)})};l.initUploadWidget=function(){if(!l.upload){throw new Error("Upload has to be set by this time since requestUploadDetailsFromServers() was called before.")}var e={url:l.upload.url,autoUpload:false,multipart:false,dropZone:undefined,maxChunkSize:l.upload.chunkBytes,limitConcurrentUploads:10,add:function e(t,s){if(!s.submit){throw new Error("Function submit() is missing from data.")}var n=l.xhrContainer.add(s.submit(),s.files[0].identifier);n.always(function(e,t,n){var r=typeof n=="string";if(r){var i=e;var o=n;if(l.isConnectionDown||t!="abort"){l.singleFileFailed(s.files[0],i,t,o)}}else{var a=e;var i=n;if((typeof a==="undefined"?"undefined":_typeof2(a))!="object"){if(typeof a=="string"){a=JSON.parse(a)}else{throw new Error("Unexpected payload of type "+(typeof a==="undefined"?"undefined":_typeof2(a))+".")}}l.singleFileUploaded(s.files[0],a)}})},send:function e(t,n){if(_typeof2(n.headers)!="object"){n.headers={}}if(l.isTus){}else{n.headers["session-id"]=l.sessionIdController.getSessionId(n.files[0])}n.headers["file-order"]=n.files[0].order}};if(l.isTus){}else{l.uploadWidget.fileupload(e);l.uploadWidget.on("fileuploadprogressall",l.onProgress)}};l.addFile=function(e){l.emit("upload.start.wanted");if(!l.upload){if(!l.uploadCannotStart){setTimeout(function(){l.addFile(e)},50)}return}l.emit("file.add.wanted",e);l.forgetFileProgress(e);l.startFileUpload(e);l.emit("file.add.done",e)};l.removeFile=function(e){var t=l.xhrContainer.get(e.identifier);if(!t){throw new Error("Unregistered xhr for identifier "+e.identifier+".")}t.abort();l.emit("file.remove.done",e)};l.singleFileUploaded=function(e,t){if(!t.token){throw new Error("Missing token in payload.")}l.emit("file.upload.done",e,t.token)};l.singleFileFailed=function(e,t,n,r){if(l.isConnectionDown||u.BrowserManager.isSafari()&&n=="error"&&r==""){l.emit("upload.interrupted.done",e)}else{l.emit("problem.file.upload.wanted",e,t)}};l.onProgress=function(e,t){l.emit("upload.progress.refresh.done",t)};l.uploadSupervisor=e;l.sessionIdController=new i.SessionIdController;l.xhrContainer=new s.XhrContainer;l.uploadWidget=$("#ulcontrol");if(!l.uploadWidget.length){throw new Error("Missing upload widget.")}l.bindEventListeners();return l}e.prototype.startFileUpload=function(e){if(!this.upload){throw new Error("Upload should have been initialized already")}if(this.isTus){}else{this.uploadWidget.fileupload("add",{files:e})}};e.prototype.forgetFileProgress=function(e){if(this.isTus){}else{this.uploadWidget.fileupload("forget",e)}};Object.defineProperty(e.prototype,"activeUploads",{get:function e(){if(this.isTus){return 0}else{return this.uploadWidget.fileupload("active")}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"removeFileUrl",{get:function e(){return this.uploadWidget.data("removeFileUrl")},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"createDeliveryUrl",{get:function e(){return this.uploadWidget.data("createDeliveryUrl")},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"newDeliveryUrl",{get:function e(){return this.uploadWidget.data("newDeliveryUrl")},enumerable:true,configurable:true});return e}(o.EventDispatcher);n.DataTransferController=l},{"../../../../packages/ts.events/index":80,"../../../BrowserManager":2,"../entity/Upload":28,"./SessionIdController":31,"./XhrContainer":32}],30:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){var t=this;this.add=function(e){t.files[e.identifier]=e;return e};this.get=function(e){if(t.files.hasOwnProperty(e)){return t.files[e]}else{return null}};this.remove=function(e){if(t.files.hasOwnProperty(e.identifier)){delete t.files[e.identifier]}else{throw new Error("File with identifier "+e.identifier+" which should be removed from container is not present in it.")}};this.files={}}Object.defineProperty(e.prototype,"unfinishedFilesCount",{get:function e(){var t=0;for(var n in this.files){if(!this.files[n].token){t++}}return t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"totalFilesCount",{get:function e(){var t=0;for(var n in this.files){t++}return t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uploadedBytes",{get:function e(){var t=0;for(var n in this.files){if(!this.files[n].token){continue}t+=this.files[n].size}return t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"totalBytes",{get:function e(){var t=0;for(var n in this.files){t+=this.files[n].size}return t},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"uploadedBytesWithIdentifiers",{get:function e(){var t={};for(var n in this.files){if(!this.files[n].token){continue}t[n]=this.files[n].size}return t},enumerable:true,configurable:true});return e}();n.FileContainer=r},{}],31:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=e("../entity/FileDecorator");var i=function(){function n(){var t=this;this.getSessionId=function(e){if(typeof e.identifier!="string"){throw new Error("File identifier is of type "+_typeof2(e.identifier)+" for file "+e.name+". File "+(e instanceof r.FileDecorator?"is":"is not")+" of type FileDecorator.")}if(!t.sessionIds.hasOwnProperty(e.identifier)){t.sessionIds[e.identifier]=n.createSessionId(e)}return t.sessionIds[e.identifier]};this.sessionIds={}}n.createSessionId=function(e){var t=0,n,r;for(n=0;n<e.identifier.length;n++){r=e.identifier.charCodeAt(n);t=(t<<5)-t+r;t|=0}return e.size+(new Date).getTime()+t};return n}();n.SessionIdController=i},{"../entity/FileDecorator":26}],32:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){this.xhrObjects={}}e.prototype.add=function(e,t){if(!t.length){throw new Error("Bad identifier given.")}this.xhrObjects[t]=e;return e};e.prototype.get=function(e){if(this.xhrObjects.hasOwnProperty(e)){return this.xhrObjects[e]}else{return null}};return e}();n.XhrContainer=r},{}],33:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=e("../../BrowserManager");var i=function(){function e(e,t,n){this.$element=e;if(!this.$element.length){throw new Error("Cannot initialize autocomplete on empty collection.")}var r={source:t,delay:0,autoFocus:false,minLength:3};this.$element.autocomplete($.extend({},r,n));this.bindEventListeners()}e.prototype.bindEventListeners=function(){var n=this;if(!this.$element.attr("data-steady-on-autocomplete-select")){this.$element.on("autocompleteselect",function(){var e=$(":input:eq("+($(":input").index(n.$element)+1)+")");if(e.length){e.focus()}})}this.$element.on("autocompletefocus",function(e,t){if(r.BrowserManager.isMobile()){n.$element.autocomplete("close");n.addOnMobileFocus(e,t.item);n.$element.trigger("autocompleteselect")}})};e.prototype.addOnMobileFocus=function(e,t){if(!t.value){throw new Error("Missing property value from addedItem.")}this.$element.val(t.value)};e.prototype.close=function(){this.$element.autocomplete("close")};return e}();n.Autocomplete=i},{"../../BrowserManager":2}],34:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e){if(e.tagName=="INPUT"){e.select()}else if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e);t.select()}else if(window.getSelection){var n=window.getSelection();var t=document.createRange();t.selectNodeContents(e);n.removeAllRanges();n.addRange(t)}}e.clear=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection){document.selection.empty()}};return e}();n.TextSelection=r},{}],35:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function r(){}r.showTooltip=function(t,n){t.tooltipster({content:n,position:"right",trigger:"custom",onlyOne:true,functionReady:function e(){setTimeout(function(){r.hideTooltip(t)},r.getMessageDisplaySeconds(n)*1e3)}}).tooltipster("show")};r.hideTooltip=function(e){if(e.data("tooltipster-ns")){e.tooltipster("destroy")}};r.getMessageDisplaySeconds=function(e){var t=e.replace(/\s+/gi,"").length;if(t<25){return 2}else if(t<40){return 3}else if(t<60){return 4}else{return 5}};return r}();n.TooltipDisplayer=r},{}],36:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(i){r(e,i);function e(e,t,n){var r=i.call(this,n)||this;r.supervisor=e;r.name=t;r.show=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(r.beforeShow!=undefined){r.beforeShow(r.$element,e)}r.$element.removeClass("alert-hidden")};r.hide=function(){r.$element.addClass("alert-hidden")};r.supervisor.on("banner."+r.name+".show",r.show);r.supervisor.on("banner."+r.name+".hide",r.hide);return r}return e}(i.JQueryElementWrapper);n.Alert=o},{"./JQueryElementWrapper":43}],37:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"a[name=show-filelist]")||this;t.uploadSupervisor=e;t.isInteractionAllowed=true;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(t.isInteractionAllowed){t.emit("click.done")}});this.uploadSupervisor.on("delivery.send.done",function(){t.$element.addClass("hidden");t.isInteractionAllowed=false})};return e}(i.JQueryElementWrapper);n.BackToFileListButton=o},{"./JQueryElementWrapper":43}],38:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(e){r(t,e);function t(){var t=e.call(this,".select-files")||this;t.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("fileInput.dialogue.open.wanted")});return t}t.prototype.disable=function(){this.$element.addClass("disabled")};return t}(i.JQueryElementWrapper);n.ChooseFilesButton=o},{"./JQueryElementWrapper":43}],39:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("../../abstract/entity/uploadStep/SharingUploadStep");var a=function(t){r(e,t);function e(e){var n=t.call(this,".btn[name=continue],.btn[name=continue-top]")||this;n.uploadSupervisor=e;n.counter=0;n.onClick=function(e){e.preventDefault();e.stopImmediatePropagation();var t=$(e.currentTarget);if(!t.hasClass("disabled")&&!t.hasClass("btn-loading")){n.emit("filelist.nextStep.wanted")}};n.getSharingStepUrl=function(){return n.$element.attr("href")};n.$element.on("click",n.onClick);n.uploadSupervisor.on("file.remove.done",function(){n.counter--;if(!n.counter){n.$element.addClass("disabled")}else if(n.counter<=5){n.$element.filter(".btn[name=continue-top]").addClass("hidden")}});n.uploadSupervisor.on("file.add.done",function(){if(!n.counter){n.$element.removeClass("disabled")}n.counter++;if(n.counter>5){n.$element.removeClass("hidden")}});n.uploadSupervisor.on("step.postChange.done",function(e){if(e instanceof o.SharingUploadStep){n.$element.removeClass("btn-loading")}});n.uploadSupervisor.on("filelist.nextStep.ajax.wanted",function(){n.$element.addClass("btn-loading")});return n}return e}(i.JQueryElementWrapper);n.ContinueButton=a},{"../../abstract/entity/uploadStep/SharingUploadStep":23,"./JQueryElementWrapper":43}],40:[function(e,t,n){var o=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../../../../packages/ts.events/index");var i=function(t){o(i,t);function i(e){var r=t.call(this)||this;r.uploadSupervisor=e;r.bindListeners=function(){r.$body.dragster({enter:function e(t,n){r.emit("drag.enter.wanted",n)},leave:function e(){r.emit("drag.leave.wanted")}});r.uploadSupervisor.on("drag.enter.wanted",function(e){if(r.containsFiles(i.getDataTransfer(e))){r.addBlur()}else{r.emit("problem.unsupportedDrop.wanted")}r.emit("drag.enter.done")});r.uploadSupervisor.on("drag.leave.wanted",function(){r.removeBlur()});r.$body.on("dragster:drop",function(e,t){r.emit("drop.wanted",e,t)});r.uploadSupervisor.on("drop.wanted",function(e,t){r.removeBlur();var n=i.getDataTransfer(t);if(n.files.length){t.preventDefault();t.stopImmediatePropagation();r.emit("files.drop.done",{files:n.files})}else{r.emit("problem.unsupportedDrag.wanted")}})};r.$guiDropZone=$(".drop-here");r.$guiBlur=$(".blur");r.$body=$("body");if(!r.$guiDropZone.length||!r.$guiBlur.length){throw new a("Cannot initialize dropzone because corresponding html element is missing.")}r.bindListeners();return r}i.prototype.addBlur=function(){this.$guiDropZone.addClass("active");this.$guiBlur.addClass("active")};i.prototype.removeBlur=function(){this.$guiDropZone.removeClass("active");this.$guiBlur.removeClass("active")};i.getDataTransfer=function(e){return e.dataTransfer||e.originalEvent.dataTransfer};i.prototype.containsFiles=function(e){if(e.types instanceof DOMStringList){return e.types.contains("Files")}else return e.types.indexOf("Files")>-1};return i}(r.EventDispatcher);n.Dropzone=i;var a=function(n){o(r,n);function r(e){var t=n.call(this,e)||this;Object.setPrototypeOf(t,r.prototype);return t}return r}(Error);n.DropzoneMissingError=a},{"../../../../packages/ts.events/index":80}],41:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(e){r(t,e);function t(){var t=e.call(this,"#select-files-input")||this;t.bindOnChange=function(e){e.on("change",function(e){t.emit("files.choose.done",e.currentTarget.files);$(e.currentTarget).replaceWith($(e.currentTarget).clone(true));t.bindOnChange($(e.currentTarget))})};t.openDialogue=function(){t.$element.click()};t.bindOnChange(t.$element);return t}return t}(i.JQueryElementWrapper);n.FileInput=o},{"./JQueryElementWrapper":43}],42:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../abstract/entity/SizeInBytes");var o=e("./JQueryElementWrapper");var a=function(t){r(e,t);function e(e){var r=t.call(this,"#filelist")||this;r.uploadSupervisor=e;r.displayFile=function(e,t,n){r.$element.loadTemplate(r.fileRecordTemplate,{name:t,size:n.toString(),identifier:e},{append:true})};r.removeFile=function(e){$("[data-file-identifier="+e+"]",r.$element).remove()};r.fileRecordTemplate=o.JQueryElementWrapper.getElementBySelector("#upload-file-record");r.uploadSupervisor.on("file.add.done",function(e){r.displayFile(e.identifier,e.name,new i.SizeInBytes(e.size))});r.uploadSupervisor.on("file.remove.done",function(e){r.removeFile(e.identifier)});r.$element.on("click",".remove-file-record",function(e){e.preventDefault();var t=$(e.target).parents(".file-record").data("fileIdentifier");r.emit("file.remove.wanted",t)});return r}Object.defineProperty(e.prototype,"element",{get:function e(){return this.$element},enumerable:true,configurable:true});return e}(o.JQueryElementWrapper);n.FileList=a},{"../../abstract/entity/SizeInBytes":20,"./JQueryElementWrapper":43}],43:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../../../../packages/ts.events/index");var o=function(n){i(r,n);function r(e){var t=n.call(this)||this;t.selector=e;if(typeof t.selector!="string"){throw new Error("Element selector has to be string, "+_typeof2(t.selector)+" given.")}if(!t.selector.length){throw new Error('Element selector has to be specified in property "selector".')}t.$element=r.getElementBySelector(t.selector);return t}r.getElementBySelector=function(e){var t=$(e);if(!t.length){throw new Error('Missing element with selector "'+e+'".')}return t};r.prototype.detachAllListeners=function(){this._listeners={}};return r}(r.EventDispatcher);n.JQueryElementWrapper=o},{"../../../../packages/ts.events/index":80}],44:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,".spinner-wrapper-large")||this;t.uploadSupervisor=e;t.uploadSupervisor.once("upload.start.wanted",function(){t.$element.removeClass("hidden")});t.uploadSupervisor.once("upload.cannotStart.done",function(){t.$element.addClass("hidden")});return t}return e}(i.JQueryElementWrapper);n.LargeSpinner=o},{"./JQueryElementWrapper":43}],45:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("clipboard");var a=function(t){r(e,t);function e(){var e=t.call(this,".clipboard")||this;e.clipboard=new o(e.$element[0]);e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var n=this;this.clipboard.on("success",function(){n.changeLabelForInterval(MESSAGES.labels.linkCopied)});this.clipboard.on("error",function(e){var t="ctrl";if(navigator.platform.toUpperCase().indexOf("MAC")>=0){t="cmd"}n.changeLabelForInterval(MESSAGES.labels.copyManually[t])})};e.prototype.changeLabelForInterval=function(e,t){var n=this;if(t===void 0){t=5e3}var r=this.$element.text();this.$element.text(e);setTimeout(function(){n.$element.text(r)},t)};return e}(i.JQueryElementWrapper);n.LinkClipboard=a},{"./JQueryElementWrapper":43,clipboard:86}],46:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,"button[data-show-prompt]")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();prompt(MESSAGES.alerts.copyLink,t.link)})};Object.defineProperty(e.prototype,"link",{get:function e(){return i.JQueryElementWrapper.getElementBySelector("#copylink").text()},enumerable:true,configurable:true});return e}(i.JQueryElementWrapper);n.LinkPrompt=o},{"./JQueryElementWrapper":43}],47:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,".progress-percents")||this;e.percentSpan=i.JQueryElementWrapper.getElementBySelector("[data-role=progress]");return e}e.prototype.update=function(e){this.percentSpan.text(e)};return e}(i.JQueryElementWrapper);n.PercentDisplay=o},{"./JQueryElementWrapper":43}],48:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(e){r(t,e);function t(){var r=e.call(this,"#popup-upload-problem")||this;r.isPopupOpen=false;r.popupOpener=i.JQueryElementWrapper.getElementBySelector("[href=#popup-upload-problem]");r.$element.find("[data-action]").on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(!r.fileToSolve){throw new Error("No actions can be done with file before it is rendered.")}var t=$(e.currentTarget).data("action");var n;if(t=="retry"){r.emit("uploadFile.retry.wanted",r.fileToSolve)}else if(t=="omit-file"){r.emit("uploadFile.omit.wanted",r.fileToSolve)}else{throw new Error("Unknown action "+t+".")}r.emit("uploadFile.problem.solved.done")});return r}t.prototype.open=function(){this.popupOpener.magnificPopup("open");this.isPopupOpen=true};t.prototype.close=function(){this.popupOpener.magnificPopup("close");this.isPopupOpen=false};t.prototype.renderFile=function(e){this.fileToSolve=e;var t=e.hasMd5Blocked?"md5-blocked":"upload-failed";if(e.hasMd5Blocked){this.$element.find("[data-role=btn-cancel-upload]").removeClass("hidden")}this.$element.find(".popup-content").addClass("hidden");this.$element.find("[data-role=filename]").text(e.name);this.$element.find("[data-content="+t+"]").removeClass("hidden")};return t}(i.JQueryElementWrapper);n.ProblemPopup=o},{"./JQueryElementWrapper":43}],49:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(e){r(t,e);function t(){return e.call(this,".progress-bar-fill")||this}t.prototype.update=function(e){this.$element.css("width",e+"%")};return t}(i.JQueryElementWrapper);n.ProgressBar=o},{"./JQueryElementWrapper":43}],50:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("./ProgressBar");var a=e("./PercentDisplay");var s=function(n){r(e,n);function e(e){var t=n.call(this,".progress")||this;t.uploadSupervisor=e;t.waitingIterations=0;t.update=function(){var e=t.uploadSupervisor.uploadProgressPercentage;if(e==="0"||e==="1"){if(t.waitingIterations<3){t.waitingIterations++;return}}else{t.waitingIterations=0}t.progressBar.update(e);t.percentDisplay.update(e);if(e.substr(0,3)=="100"&&t.uploadSupervisor.areFilesPresentAndAllUploaded){t.uploadProgressDiv.addClass("hidden");t.uploadCompleteDiv.removeClass("hidden")}else{t.uploadCompleteDiv.addClass("hidden");t.uploadProgressDiv.removeClass("hidden")}};t.progressBar=new o.ProgressBar;t.percentDisplay=new a.PercentDisplay;t.uploadProgressDiv=i.JQueryElementWrapper.getElementBySelector("[data-role=upload-progress]");t.uploadCompleteDiv=i.JQueryElementWrapper.getElementBySelector("[data-role=upload-complete]");t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){this.uploadSupervisor.on("upload.progress.refresh.done",this.update);this.uploadSupervisor.on("file.upload.complete.all.done",this.update)};return e}(i.JQueryElementWrapper);n.ProgressReporter=s},{"./JQueryElementWrapper":43,"./PercentDisplay":47,"./ProgressBar":49}],51:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("./RemainingTimeSpan");var a=function(n){r(e,n);function e(e){var t=n.call(this,"[data-role=remaining-time-container]")||this;t.uploadSupervisor=e;t.iterationCount=10;t.shown=false;t.disabled=false;t.remainingTimeSpan=new o.RemainingTimeSpan;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var n=this;this.uploadSupervisor.on("upload.progress.refresh.done",function(){if(n.disabled){return}if(n.iterationCount%10==0){n.iterationCount=0}else{n.iterationCount++;return}var e=n.uploadSupervisor.uploadProgress;if(!e){throw new Error("Progress not known.")}if(!e.averageBitrate){n.disabled=true;return}var t=(e.total-e.loaded-n.uploadSupervisor.bytesUploadedPreviously)*8/e.averageBitrate;if(!n.shown&&t>=5){n.shown=true}if(n.shown){if(n.$element.hasClass("hidden")){n.$element.removeClass("hidden")}n.remainingTimeSpan.update(t)}});this.uploadSupervisor.on("connection.down.done",function(){if(n.shown){n.$element.addClass("hidden")}n.disabled=true})};return e}(i.JQueryElementWrapper);n.RemainingTimeReporter=a},{"./JQueryElementWrapper":43,"./RemainingTimeSpan":52}],52:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("../../abstract/entity/RemainingTime");var a=function(e){r(t,e);function t(){return e.call(this,"[data-role=remaining-time]")||this}t.prototype.update=function(e){this.$element.text(new o.RemainingTime(e).toString())};return t}(i.JQueryElementWrapper);n.RemainingTimeSpan=a},{"../../abstract/entity/RemainingTime":19,"./JQueryElementWrapper":43}],53:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=e("../TextSelection");var a=e("../../../BrowserManager");var s=function(t){r(e,t);function e(){var e=t.call(this,".link-selectable")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(a.BrowserManager.isIos()){t.$element.attr("contenteditable","true").focus()}new o.TextSelection(t.$element[0])})};return e}(i.JQueryElementWrapper);n.SelectableLink=s},{"../../../BrowserManager":2,"../TextSelection":34,"./JQueryElementWrapper":43}],54:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var o=e("../JQueryElementWrapper");var r=function(r){i(e,r);function e(e,t){var n=r.call(this,".package-sended")||this;n.shareDeliveryForm=e;n.uploadSupervisor=t;n.isDeliveryDetailLinkAvailable=false;n.$sendToOtherMailsLink=o.JQueryElementWrapper.getElementBySelector(".package-sended-another");if($(".package-sended-action a[data-role=delivery-detail]").length){n.$deliveryDetailLink=o.JQueryElementWrapper.getElementBySelector(".package-sended-action a[data-role=delivery-detail]")}n.$newDeliveryLink=o.JQueryElementWrapper.getElementBySelector(".package-sended-action a[data-role=new-delivery]");n.bindEventListeners();return n}e.prototype.bindEventListeners=function(){var t=this;this.uploadSupervisor.on("delivery.send.done",function(){t.$element.removeClass("hidden")});this.shareDeliveryForm.on("delivery.sendToOtherMails.wanted",function(){t.$element.addClass("hidden")});this.$sendToOtherMailsLink.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("sendToOtherMails.click.done")});this.uploadSupervisor.on("delivery.link.available.done",function(e){t.$deliveryDetailLink.attr("href",e);t.isDeliveryDetailLinkAvailable=true});if(this.$deliveryDetailLink){this.$deliveryDetailLink.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(!t.isDeliveryDetailLinkAvailable){throw new Error("Cannot go to delivery detail, link is not available yet.")}window.location.href=t.$deliveryDetailLink.attr("href")})}};return e}(o.JQueryElementWrapper);n.DeliverySentSuccessfullyBox=r},{"../JQueryElementWrapper":43}],55:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=e("../../../FacebookScript");var a=function(n){r(e,n);function e(e){var t=n.call(this,"#fbShareButton")||this;t.linkTabActivator=e;t.createScript=function(){new o.FacebookScript(t.$element.data("link"),t.$element.data("appId"))};t.init();return t}e.prototype.init=function(){if(this.linkTabActivator.isLinkTabActive()){this.createScript()}else{this.linkTabActivator.on("click.done",this.createScript)}};return e}(i.JQueryElementWrapper);n.FacebookShareButton=a},{"../../../FacebookScript":16,"../JQueryElementWrapper":43}],56:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(e,t,n){this.message=e;this.currentRecipients=t;this.unknownRecipients=n}return e}();n.FormValues=r},{}],57:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,".tabs-nav [href=#tab-link]")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var e=this;this.$element.on("click",function(){e.emit("click.done")})};e.prototype.isLinkTabActive=function(){return this.$element.parent("li").hasClass("active")};Object.defineProperty(e.prototype,"tabGroup",{get:function e(){return this.$element.closest(".tabs-nav").data("group")},enumerable:true,configurable:true});return e}(i.JQueryElementWrapper);n.LinkTabActivator=o},{"../JQueryElementWrapper":43}],58:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"textarea[name=message]")||this;t.shareDeliveryForm=e;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var e=this;this.shareDeliveryForm.on("delivery.shareForm.inputs.disable.wanted",function(){e.$element.attr("disabled","disabled")});this.shareDeliveryForm.on("delivery.shareForm.inputs.enable.wanted",function(){e.$element.removeAttr("disabled")});this.$element.on("keypress",function(){e.emit("edit.done")})};Object.defineProperty(e.prototype,"value",{get:function e(){return this.$element.val()},set:function e(t){this.$element.val(t)},enumerable:true,configurable:true});e.prototype.focus=function(){this.$element.focus()};return e}(i.JQueryElementWrapper);n.MessageInput=o},{"../JQueryElementWrapper":43}],59:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../JQueryElementWrapper");var o=e("./TagInput");var a=e("../../Autocomplete");var s=e("./TagInputWrapper");var l=function(r){i(u,r);function u(e,t,n){var l=r.call(this,"[name=recipientEmails]")||this;l._suggestedRecipients=e;l.shareDeliveryForm=t;l.uploadSupervisor=n;l.dontFocusRecipientInput=false;l.shouldRemoveEventBeIgnored=false;l.addedRecipients=[];l.focusDisallowed=false;l.getAutocompleteSuggestions=function(e,t){var n=[];var r=l.currentRecipients;for(var i=0,o=l._suggestedRecipients.concat(l.addedRecipients);i<o.length;i++){var a=o[i];if(!a.value){throw new Error("Missing recipient email.")}if(!a.label){throw new Error("Missing recipient label.")}if(r.indexOf(a.value)>-1){continue}if(e.term.length<3&&a.label.indexOf(u.getLabelForAlreadyUsedRecipient())!=-1){continue}if(u.foldAccents(a.label).toLowerCase().indexOf(u.foldAccents(e.term).toLowerCase())>-1){n.push(a)}if(n.length==5){break}}t(n)};l.onRecipientInputKeydown=function(e){if(e.which==9){l.emit("input.next.focus.wanted")}};l.onBlur=function(t){if(!l.$recipientTagInputElement.val().length){return}l.dontFocusRecipientInput=true;setTimeout(function(){var e=l.$recipientTagInputElement.val();if(e.length){l.$element.taginput("add",e);setTimeout(function(){if(l.currentRecipients.indexOf(e)!=-1){l.$recipientTagInputElement.val("")}$(t.relatedTarget).trigger("click")},10)}},10)};l.editTagByEmail=function(e){l.$recipientTagInputElement.val(e).focus();var t=false;for(var n=0,r=l.addedRecipients;n<r.length;n++){var i=r[n];if(i.value==e){l.addedRecipients.splice(l.addedRecipients.indexOf(i),1);t=true;break}}if(!t){for(var o=0,a=l._suggestedRecipients;o<a.length;o++){var i=a[o];if(i.value==e){l._suggestedRecipients.splice(l._suggestedRecipients.indexOf(i),1);t=true;break}}}};l.onMobileAutocompleteFocus=function(e,t){if(!t.value){throw new Error("Missing property value from addedItem.")}l.$element.taginput("add",t.value)};l.onFocus=function(){l.$recipientTagInputElement.autocomplete("search")};l.onAutocompleteSelect=function(e,t){e.preventDefault();if(e.which!=13){if(t!==undefined){l.$element.taginput("add",t.item.value)}}setTimeout(function(){l.focus();l.$recipientTagInputElement.val("")},0)};l.onPaste=function(e){var t=(window.clipboardData||e.originalEvent.clipboardData).getData("Text");if(t.indexOf("@")==-1){return true}l.closeAutocompleteSuggestions();var n=[];for(var r=0,i=t.split(/[,\s]+/);r<i.length;r++){var o=i[r];if(!o.length){continue}if(u.isEmailValid(o)){l.$element.taginput("add",o)}else if(o.match(/^<?.+>?$/)){var a=o.replace("<","").replace(">","");if(u.isEmailValid(a)){l.$element.taginput("add",a)}else{n.push(o)}}else{n.push(o)}}if(n.length){l.$recipientTagInputElement.val(l.$recipientTagInputElement.val()+n.join(""))}return false};l.onRecipientAdd=function(e){l.emit("edit.done");if(!u.isEmailValid(e)){if(e.indexOf("<")===0||e.indexOf(">")===e.length-1){var t=e.replace("<","").replace(">","");setTimeout(function(){l.$element.taginput("add",t)})}else{setTimeout(function(){l.emit("email.invalid.warning.wanted",e)},0)}return false}var n=true;for(var r=0,i=l._suggestedRecipients;r<i.length;r++){var o=i[r];if(e==o.value){n=false;break}}if(n){for(var a=0,s=l.addedRecipients;a<s.length;a++){var o=s[a];if(e==o.value){n=false;break}}}if(n){l.addedRecipients.push({label:e,value:e})}l.emit("recipient.add.done");return true};l.onRecipientRemove=function(e){if(!l.shouldRemoveEventBeIgnored){l.emit("edit.done")}return true};new o.TagInput(MESSAGES.placeholders.taginput,l.onRecipientAdd,l.onRecipientRemove);l.tagInputWrapper=new s.TagInputWrapper;l.$recipientTagInputElement=l.$element.taginput("getInputElement");l.autocomplete=new a.Autocomplete(l.$recipientTagInputElement,l.getAutocompleteSuggestions,{autoFocus:false,minLength:0});l.setup();l.bindEventListeners();return l}u.prototype.setup=function(){this.$recipientTagInputElement.attr("type","email");this.$recipientTagInputElement.attr("name","recipient-email-input");this.$recipientTagInputElement.css("width","100%");this.$recipientTagInputElement.on("keydown",this.onRecipientInputKeydown);this.autocomplete.addOnMobileFocus=this.onMobileAutocompleteFocus};u.prototype.bindEventListeners=function(){var t=this;this.$recipientTagInputElement.on("focus",this.onFocus);this.$recipientTagInputElement.on("paste",this.onPaste);this.$recipientTagInputElement.on("autocompleteselect",this.onAutocompleteSelect);this.tagInputWrapper.on("tag.edit.wanted",this.editTagByEmail);this.on("recipient.add.done",function(){t.closeAutocompleteSuggestions();if(t.dontFocusRecipientInput){t.dontFocusRecipientInput=false}else{setTimeout(function(){t.focus()},0)}});this.$recipientTagInputElement.on("blur",this.onBlur);this.on("email.invalid.warning.wanted",function(e){t.$recipientTagInputElement.val(e)});if(this.uploadSupervisor){this.uploadSupervisor.on("step.postChange.done",function(){t.closeAutocompleteSuggestions()});this.uploadSupervisor.uploadStepController.on("upperRightNavButton.action.wanted",function(){t.saveCurrentRecipients()})}this.shareDeliveryForm.on("delivery.sendToOtherMails.wanted",function(){t.markCurrentRecipientsAsUsed();t.resetInput()});this.shareDeliveryForm.on("delivery.shareForm.inputs.disable.wanted",function(){t.$element.parent(".input").attr("disabled","disabled");t.$recipientTagInputElement.attr("disabled","disabled")});this.shareDeliveryForm.on("delivery.shareForm.inputs.enable.wanted",function(){t.$element.parent(".input").removeAttr("disabled");t.$recipientTagInputElement.removeAttr("disabled")});this.shareDeliveryForm.on("delivery.shareForm.redraw.wanted",function(){t.saveCurrentRecipients()})};u.prototype.isTouchedAndInvalid=function(){return this.$recipientTagInputElement.val().length>0&&!u.isEmailValid(this.$recipientTagInputElement.val())};u.foldAccents=function(e){if(!e.length){return""}var t={"":"a","":"c","":"d","":"e","":"i","":"o","":"o","":"s","":"r","":"t","":"u","":"u","":"u","":"y","":"z"};var n="";for(var r=0,i=e;r<i.length;r++){var o=i[r];n+=t[o]||o}return n};u.prototype.markCurrentRecipientsAsUsed=function(){var e=this.currentRecipients;for(var t=0,n=this._suggestedRecipients;t<n.length;t++){var r=n[t];if(e.indexOf(r.value)==-1){continue}r.label+=u.getLabelForAlreadyUsedRecipient()}};u.prototype.resetInput=function(){this.shouldRemoveEventBeIgnored=true;this.$element.taginput("clear");this.shouldRemoveEventBeIgnored=false};u.getLabelForAlreadyUsedRecipient=function(){return" ("+MESSAGES.labels.alreadyRecipient+")"};Object.defineProperty(u.prototype,"inputElement",{get:function e(){return this.$recipientTagInputElement},enumerable:true,configurable:true});u.prototype.focus=function(){if(!this.focusDisallowed){this.$recipientTagInputElement.focus()}};u.prototype.disallowFocus=function(){this.focusDisallowed=true};u.prototype.allowFocus=function(){this.focusDisallowed=false};u.isEmailValid=function(e){return Nette.validators.email(null,null,e)};u.prototype.closeAutocompleteSuggestions=function(){this.autocomplete.close()};Object.defineProperty(u.prototype,"unknownRecipients",{get:function e(){return this.addedRecipients},set:function e(t){for(var n=0,r=t;n<r.length;n++){var i=r[n];var o=true;for(var a=0,s=this._suggestedRecipients;a<s.length;a++){var l=s[a];if(i.value==l.value){o=false;break}}if(o){this.addedRecipients.push(i)}}},enumerable:true,configurable:true});Object.defineProperty(u.prototype,"currentRecipients",{get:function e(){if(typeof this.savedCurrentRecipients!="undefined"){return this.savedCurrentRecipients}else{return this.$element.taginput("get")}},set:function e(t){this.$element.taginput("set",t)},enumerable:true,configurable:true});u.prototype.saveCurrentRecipients=function(){this.savedCurrentRecipients=this.currentRecipients};return u}(r.JQueryElementWrapper);n.RecipientsInput=l},{"../../Autocomplete":33,"../JQueryElementWrapper":43,"./TagInput":65,"./TagInputWrapper":66}],60:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"input[name=sendToOwner]")||this;t.shareDeliveryForm=e;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var e=this;this.shareDeliveryForm.on("delivery.shareForm.inputs.disable.wanted",function(){e.$element.attr("disabled","disabled")});this.shareDeliveryForm.on("delivery.shareForm.inputs.enable.wanted",function(){e.$element.removeAttr("disabled")});this.$element.on("change",function(){e.emit("edit.done")})};Object.defineProperty(e.prototype,"checked",{get:function e(){return this.$element.prop("checked")},set:function e(t){this.$element.prop("checked",t)},enumerable:true,configurable:true});return e}(i.JQueryElementWrapper);n.SendInfoToMyEmailCheckbox=o},{"../JQueryElementWrapper":43}],61:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=e("../SingleEmailSuggestion");var a=function(n){r(e,n);function e(e){var t=n.call(this,"[name=senderEmail]")||this;t.shareDeliveryForm=e;new o.SingleEmailSuggestion;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var e=this;this.shareDeliveryForm.on("delivery.shareForm.inputs.disable.wanted",function(){e.$element.attr("disabled","disabled")});this.shareDeliveryForm.on("delivery.shareForm.inputs.enable.wanted",function(){e.$element.removeAttr("disabled")});this.shareDeliveryForm.on("email.another.choose.wanted",function(){e.$element.val("")});this.$element.on("keypress",function(){e.emit("edit.done")})};e.prototype.focus=function(){this.$element.focus()};Object.defineProperty(e.prototype,"refreshShareDeliveryFormUrl",{get:function e(){return this.$element.data("updateUrl")},enumerable:true,configurable:true});e.prototype.readonly=function(e){this.$element.val(e);this.$element.attr("readonly","readonly");this.$element.attr("disabled","disabled")};e.prototype.isReadonly=function(){return this.$element.attr("readonly")!==undefined};return e}(i.JQueryElementWrapper);n.SenderEmailInput=a},{"../JQueryElementWrapper":43,"../SingleEmailSuggestion":67}],62:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=e("./RecipientsInput");var a=e("./SenderEmailInput");var s=e("./SendInfoToMyEmailCheckbox");var l=e("./DeliverySentSuccessfullyBox");var u=e("./ShareDeliveryFormSubmit");var c=e("../../../UploadSupervisor");var f=e("./MessageInput");var d=e("../../TooltipDisplayer");var p=e("./FormValues");var h=function(i){r(e,i);function e(e,t,n){var r=i.call(this,"#share-delivery-form")||this;r.uploadSupervisor=t;r.sharingContainer=n;r.shouldBeSubmittedAutomatically=false;r.isShareDeliveryFormBeingSubmitted=false;r.emitInputEditedEvent=function(){r.emit("delivery.shareForm.inputs.edit.done")};r.recipientsInput=new o.RecipientsInput(e,r,r.uploadSupervisor instanceof c.UploadSupervisor?r.uploadSupervisor:undefined);if(r.$element.find("[name=senderEmail]").length){r.senderEmailInput=new a.SenderEmailInput(r)}else{r.sendInfoToMyEmailCheckbox=new s.SendInfoToMyEmailCheckbox(r)}r.deliverySentSuccessfullyBox=new l.DeliverySentSuccessfullyBox(r,r.uploadSupervisor);r.shareDeliveryFormSubmit=new u.ShareDeliveryFormSubmit(r,r.uploadSupervisor);r.messageInput=new f.MessageInput(r);r.bindEventListeners();return r}e.prototype.bindEventListeners=function(){var n=this;this.recipientsInput.on("email.invalid.warning.wanted",function(){d.TooltipDisplayer.showTooltip(n.recipientsInput.inputElement,MESSAGES.alerts.emailRequired);n.recipientsInput.focus()});this.recipientsInput.on("recipient.add.done",function(){d.TooltipDisplayer.hideTooltip(n.recipientsInput.inputElement);setTimeout(function(){if(n.recipientsInput.currentRecipients.length>5){$("#recaptcha-input").removeClass("hidden")}else{$("#recaptcha-input").addClass("hidden")}},10)});this.recipientsInput.on("input.next.focus.wanted",function(){if(n.senderEmailInput){n.senderEmailInput.focus()}else{n.messageInput.focus()}});this.uploadSupervisor.on("delivery.send.done",function(e){n.$element.addClass("hidden");if(e&&n.senderEmailInput){n.senderEmailInput.readonly(e)}});this.uploadSupervisor.on("delivery.shareForm.automaticSubmit.enable.wanted",function(){n.emit("delivery.shareForm.automaticSubmit.enable.wanted")});this.on("delivery.sendToOtherMails.wanted",function(){n.$element.removeClass("hidden");n.emit("delivery.shareForm.automaticSubmit.disable.wanted");n.recipientsInput.focus();n.serializedFormData=undefined;if(n.sendInfoToMyEmailCheckbox&&n.sendInfoToMyEmailCheckbox.checked){n.sendInfoToMyEmailCheckbox.checked=false}});this.deliverySentSuccessfullyBox.on("sendToOtherMails.click.done",function(){n.emit("delivery.sendToOtherMails.wanted")});this.$element[0].submit=function(){n.shareDeliveryFormSubmit.clickSubmitButton()};this.shareDeliveryFormSubmit.on("submitButton.click.done",function(){if(n.recipientsInput.isTouchedAndInvalid()||!Nette.validateForm(n.$element[0])){return}n.requestFormSubmit()});this.shareDeliveryFormSubmit.on("editButton.click.done",function(){n.emit("delivery.shareForm.automaticSubmit.disable.wanted")});this.uploadSupervisor.on("delivery.create.done",function(){if(n.shouldBeSubmittedAutomatically){n.requestFormSubmit()}});if(this.sharingContainer){this.sharingContainer.on("delivery.shareForm.submit.request.wanted",function(){n.recipientsInput.disallowFocus();n.requestFormSubmit()})}this.uploadSupervisor.on("delivery.shareForm.submit.ajax.done",function(){n.recipientsInput.allowFocus();n.isShareDeliveryFormBeingSubmitted=false});this.on("delivery.shareForm.automaticSubmit.enable.wanted",function(){if(n.shouldBeSubmittedAutomatically){return}n.emit("delivery.shareForm.inputs.disable.wanted");n.once("delivery.shareForm.inputs.edit.done",function(){n.emit("delivery.shareForm.automaticSubmit.disable.wanted")});n.shouldBeSubmittedAutomatically=true});this.on("delivery.shareForm.automaticSubmit.disable.wanted",function(){if(!n.shouldBeSubmittedAutomatically){return}n.emit("delivery.shareForm.inputs.enable.wanted");n.shouldBeSubmittedAutomatically=false;n.serializedFormData=undefined});this.uploadSupervisor.on("file.add.wanted",function(){n.emit("delivery.shareForm.automaticSubmit.disable.wanted")});this.uploadSupervisor.on("sharing.previousStep.wanted",function(){n.emit("delivery.shareForm.automaticSubmit.disable.wanted")});$(document).on("loginSuccessful",function(e,t){if(!t){throw new Error("No data given as loginSuccessful event argument.")}if(!t.occasion){throw new Error("Missing login occasion in loginSuccessful listener.")}if(!t.state){throw new Error("Expected successful login in loginSuccessful listener.")}if(n.senderEmailInput){n.emit("delivery.shareForm.redraw.wanted",n.senderEmailInput.refreshShareDeliveryFormUrl,t.occasion)}});$(document).on("chooseAnotherEmail",function(){n.emit("email.another.choose.wanted");n.serializedFormData=undefined;if(n.senderEmailInput){n.senderEmailInput.focus()}else{throw new Error("ChooseAnotherEmail was retrieved, but senderEmailInput is undefined.")}});$(document).on("closeTooManyRecipientsPopup",function(){n.recipientsInput.focus()});this.recipientsInput.on("edit.done",this.emitInputEditedEvent);this.messageInput.on("edit.done",this.emitInputEditedEvent);if(this.senderEmailInput){this.senderEmailInput.on("edit.done",this.emitInputEditedEvent)}else if(this.sendInfoToMyEmailCheckbox){this.sendInfoToMyEmailCheckbox.on("edit.done",this.emitInputEditedEvent)}else{throw new Error("Neither senderEmailInput nor sendInfoToMyEmailCheckbox are set.")}};e.prototype.focusRecipientsInput=function(){this.recipientsInput.focus()};e.prototype.getSerializedData=function(){if(!this.serializedFormData){this.serializedFormData=this.$element.serialize();if(this.senderEmailInput&&this.senderEmailInput.isReadonly()){this.serializedFormData=this.serializedFormData+"&sendToOwner=1"}}return this.serializedFormData};Object.defineProperty(e.prototype,"formUrl",{get:function e(){var t=this.uploadSupervisor instanceof c.UploadSupervisor?this.uploadSupervisor.canDeliveryBeSent:true;var n;if(this.$element.attr("data-action-url")===undefined){n=this.$element.attr("action")}else{n=this.$element.data("actionUrl")}return n+"?finished="+(t?"1":"0")},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"formValues",{get:function e(){return new p.FormValues(this.messageInput.value,this.recipientsInput.currentRecipients,this.recipientsInput.unknownRecipients)},set:function e(t){this.messageInput.value=t.message;this.recipientsInput.currentRecipients=t.currentRecipients;this.recipientsInput.unknownRecipients=t.unknownRecipients},enumerable:true,configurable:true});e.prototype.requestFormSubmit=function(){if(this.isShareDeliveryFormBeingSubmitted){return}this.isShareDeliveryFormBeingSubmitted=true;this.emit("delivery.shareForm.submit.wanted",this.formUrl,this.getSerializedData())};return e}(i.JQueryElementWrapper);n.ShareDeliveryForm=h},{"../../../UploadSupervisor":18,"../../TooltipDisplayer":35,"../JQueryElementWrapper":43,"./DeliverySentSuccessfullyBox":54,"./FormValues":56,"./MessageInput":58,"./RecipientsInput":59,"./SendInfoToMyEmailCheckbox":60,"./SenderEmailInput":61,"./ShareDeliveryFormSubmit":63}],63:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var o=e("../JQueryElementWrapper");var a=e("../../../UploadSupervisor");var r=function(r){i(e,r);function e(e,t){var n=r.call(this,"[data-role=submit-share-delivery-form]")||this;n.shareDeliveryForm=e;n.uploadSupervisor=t;n.startLoading=function(){n.$submitButton.removeClass("hidden");n.$submitButton.addClass("btn-loading")};n.stopLoading=function(){n.$submitButton.removeClass("btn-loading")};n.refreshProgress=function(){if(!(n.uploadSupervisor instanceof a.UploadSupervisor)){return}var e=n.uploadSupervisor.uploadProgressPercentage;if(e.substr(0,3)=="100"){n.showImmediateSubmit()}else{n.$label.text(n.$submitButton.data("labelSubmitAutomatically"));n.$infoBox.removeClass("hidden")}};n.hideSubmitButton=function(){n.$submitButton.addClass("hidden");n.$editButton.removeClass("hidden");n.$infoBoxLineBreak.addClass("hidden")};n.showSubmitButton=function(){n.$submitButton.removeClass("hidden");n.$editButton.addClass("hidden");n.$infoBoxLineBreak.removeClass("hidden")};n.submitButtonOnClick=function(e){e.preventDefault();e.stopImmediatePropagation();if(!n.$submitButton.hasClass("btn-loading")){n.emit("submitButton.click.done")}};n.editButtonOnClick=function(e){e.preventDefault();e.stopImmediatePropagation();n.emit("editButton.click.done")};n.$submitButton=o.JQueryElementWrapper.getElementBySelector(".share-delivery-button");n.$infoBox=o.JQueryElementWrapper.getElementBySelector(".control-field span.btn-info");n.$infoBoxLineBreak=n.$infoBox.find("br");if(!n.$infoBoxLineBreak.length){throw new Error("Missing lineBreak in infoBox.")}n.$label=n.$submitButton.find("span.btn-loading-text");if(!n.$label.length){throw new Error("Missing shareDeliveryButton label span.")}n.$editButton=n.$infoBox.find("[data-role=edit-form]");if(!n.$editButton.length){throw new Error("Missing shareDeliveryForm edit button.")}n.bindEventListeners();n.setStartingState();return n}e.prototype.setStartingState=function(){var e=this.uploadSupervisor instanceof a.UploadSupervisor?this.uploadSupervisor.canDeliveryBeSent:true;if(e){this.showImmediateSubmit()}else{this.$label.text(this.$submitButton.data("labelSubmitAutomatically"))}this.$editButton.addClass("hidden")};e.prototype.bindEventListeners=function(){this.uploadSupervisor.on("upload.progress.refresh.done",this.refreshProgress);this.shareDeliveryForm.on("delivery.shareForm.automaticSubmit.enable.wanted",this.hideSubmitButton);this.shareDeliveryForm.on("delivery.shareForm.automaticSubmit.disable.wanted",this.showSubmitButton);this.shareDeliveryForm.on("delivery.shareForm.submit.wanted",this.startLoading);this.shareDeliveryForm.on("email.another.choose.wanted",this.stopLoading);this.shareDeliveryForm.on("email.authorization.done",this.stopLoading);this.uploadSupervisor.on("delivery.send.done",this.stopLoading);this.uploadSupervisor.on("delivery.shareForm.submit.ajax.done",this.stopLoading);this.$submitButton.on("click",this.submitButtonOnClick);this.$editButton.on("click",this.editButtonOnClick)};e.prototype.showImmediateSubmit=function(){this.$label.text(this.$submitButton.data("labelSubmitImmediately"));this.$infoBox.addClass("hidden")};e.prototype.clickSubmitButton=function(){this.$submitButton.trigger("click")};return e}(o.JQueryElementWrapper);n.ShareDeliveryFormSubmit=r},{"../../../UploadSupervisor":18,"../JQueryElementWrapper":43}],64:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var o=e("../JQueryElementWrapper");var a=e("./ShareDeliveryForm");var s=e("../../../../BrowserManager");var l=e("../LinkClipboard");var u=e("./FacebookShareButton");var c=e("../SelectableLink");var f=e("./LinkTabActivator");var d=e("../LinkPrompt");var i=function(i){r(e,i);function e(e,t,n){var r=i.call(this,"div.tabs")||this;r.uploadSupervisor=e;r.uploadStepController=t;r.suggestedRecipients=n;r.emitDeliveryShareFormRedrawWanted=function(e,t){r.emit("delivery.shareForm.redraw.wanted",e,t)};r.emitDeliveryShareFormSubmitWanted=function(e,t){r.emit("delivery.shareForm.submit.wanted",e,t)};r.emitDeliveryShareFormInputsEditDone=function(){r.emit("delivery.shareForm.inputs.edit.done")};r.emitTabLinkFocusDone=function(){r.emit("tab.link.focus.done")};r.linkTabActivator=new f.LinkTabActivator;r.$shareDeliveryFormTabActivator=o.JQueryElementWrapper.getElementBySelector(".tabs-nav [href=#tab-email]");r.bindEventListeners();r.shareDeliveryForm=r.instantiateShareDeliveryForm();return r}e.prototype.bindEventListeners=function(){var n=this;this.uploadSupervisor.on("shareDeliveryForm.tab.focus.wanted",function(){if(n.linkTabActivator.isLinkTabActive()){(new Tabs).changeTab(n.$shareDeliveryFormTabActivator,n.linkTabActivator.tabGroup)}});this.uploadSupervisor.once("delivery.shareForm.redraw.done",function(e,t){setTimeout(function(){n.shareDeliveryForm.detachAllListeners();var e=n.instantiateShareDeliveryForm();e.formValues=n.shareDeliveryForm.formValues;n.shareDeliveryForm=e;if(t==="emailAuthorization"){n.emit("delivery.shareForm.submit.request.wanted")}},0)});this.uploadSupervisor.once("delivery.link.available.done",function(){if(!s.BrowserManager.isMobile()){new u.FacebookShareButton(n.linkTabActivator)}if($("button[data-clipboard-target]").length){new l.LinkClipboard}else if($("button[data-show-prompt]").length){new d.LinkPrompt}else{throw new Error("Either clipboard or prompt should be available, none found")}new c.SelectableLink});this.linkTabActivator.on("click.done",function(){n.emit("tab.link.focus.done")});this.uploadStepController.on("delivery.shareForm.recipients.focus.wanted",function(){n.shareDeliveryForm.focusRecipientsInput()})};e.prototype.instantiateShareDeliveryForm=function(){var e=new a.ShareDeliveryForm(this.suggestedRecipients.recipients,this.uploadSupervisor,this);e.on("delivery.shareForm.redraw.wanted",this.emitDeliveryShareFormRedrawWanted);e.on("delivery.shareForm.inputs.edit.done",this.emitDeliveryShareFormInputsEditDone);e.on("tab.link.focus.done",this.emitTabLinkFocusDone);e.on("delivery.shareForm.submit.wanted",this.emitDeliveryShareFormSubmitWanted);return e};return e}(o.JQueryElementWrapper);n.SharingContainer=i},{"../../../../BrowserManager":2,"../JQueryElementWrapper":43,"../LinkClipboard":45,"../LinkPrompt":46,"../SelectableLink":53,"./FacebookShareButton":55,"./LinkTabActivator":57,"./ShareDeliveryForm":62}],65:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(i){r(e,i);function e(e,t,n){var r=i.call(this,".taginput")||this;r.$element.taginput({placeholder:e,separateKeyCodes:[32,13,188],onAdd:t,onRemove:n});return r}return e}(i.JQueryElementWrapper);n.TagInput=o},{"../JQueryElementWrapper":43}],66:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,".taginput-wrapper")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var n=this;this.$element.on("click",function(e){var t=$(e.target);if(t.hasClass("ui-button-text")){n.emit("tag.edit.wanted",t.text())}})};return e}(i.JQueryElementWrapper);n.TagInputWrapper=o},{"../JQueryElementWrapper":43}],67:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=e("../Autocomplete");var i=function(){function e(){var e=$("[data-suggest-email]");e.each(function(e,t){new r.Autocomplete($(t),[$(t).attr("data-suggest-email")],{});$(t).removeAttr("data-suggest-email")})}return e}();n.SingleEmailSuggestion=i},{"../Autocomplete":33}],68:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("./JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,"a.account.underline")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("click.done")})};Object.defineProperty(e.prototype,"url",{get:function e(){return this.$element.attr("href")},enumerable:true,configurable:true});e.prototype.isPresentOnCurrentPage=function(){return $.contains(document,this.$element[0])};return e}(i.JQueryElementWrapper);n.UpperRightNavButton=o},{"./JQueryElementWrapper":43}],69:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=e("./DeliveryTitle");var a=e("./RenameButton");var s=e("../../TooltipDisplayer");var l=function(n){r(e,n);function e(e){var t=n.call(this,".package-header")||this;t.uploadSupervisor=e;t.isEditMode=false;t.changesCount=0;t.clickRenameButton=function(){setTimeout(function(){if(t.isEditMode){t.renameButton.click()}},5)};t.deliveryTitle=new o.DeliveryTitle(t);t.renameButton=new a.RenameButton(t);t.lastSavedName=t.deliveryTitle.getName();t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var t=this;this.renameButton.on("click.done",function(){if(t.isEditMode){var e=t.deliveryTitle.hasError();if(e){t.emit("delivery.name.error.wanted",e)}else if(t.lastSavedName.localeCompare(t.deliveryTitle.getName())!==0){t.emit("delivery.name.save.wanted",t.deliveryTitle.getName())}else{t.emit("delivery.name.editing.done")}}else{t.emit("delivery.name.edit.enter.wanted")}});this.on("delivery.name.editing.done",function(){t.emit("delivery.name.edit.exit.wanted")});this.uploadSupervisor.on("delivery.name.save.done",function(e){t.changesCount++;t.deliveryTitle.setName(e);t.lastSavedName=e;t.emit("delivery.name.edit.exit.wanted")});this.deliveryTitle.on("delivery.name.edit.enter.done",function(){t.isEditMode=true;if(!t.changesCount){t.deliveryTitle.selectText()}t.emit("delivery.name.edit.enter.done")});this.deliveryTitle.on("delivery.name.edit.exit.done",function(){t.isEditMode=false;t.deliveryTitle.unselectText();t.emit("delivery.name.edit.exit.done")});this.deliveryTitle.on("delivery.name.blur.wanted",this.clickRenameButton);this.deliveryTitle.on("delivery.name.enter.wanted",this.clickRenameButton);this.on("delivery.name.error.wanted",function(e){s.TooltipDisplayer.showTooltip(t.deliveryTitle.getElement(),e);t.deliveryTitle.focus()})};e.prototype.getSaveUrl=function(){return this.deliveryTitle.getSaveUrl()};return e}(i.JQueryElementWrapper);n.DeliveryName=l},{"../../TooltipDisplayer":35,"../JQueryElementWrapper":43,"./DeliveryTitle":70,"./RenameButton":71}],70:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=e("../../TextSelection");var a=function(n){r(e,n);function e(e){var t=n.call(this,".package-title")||this;t.deliveryName=e;t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var t=this;this.deliveryName.on("delivery.name.edit.enter.wanted",function(){t.$element.addClass("editable");t.$element.attr("contenteditable","true");t.focus();t.emit("delivery.name.edit.enter.done")});this.deliveryName.on("delivery.name.edit.exit.wanted",function(){t.$element.removeClass("editable");t.$element.removeAttr("contenteditable");t.emit("delivery.name.edit.exit.done")});this.$element.on("blur",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("delivery.name.blur.wanted")});this.$element.on("keypress",function(e){if(e.keyCode===13){e.preventDefault();e.stopImmediatePropagation();t.emit("delivery.name.enter.wanted")}})};e.prototype.setName=function(e){this.$element.text(e)};e.prototype.getName=function(){return this.$element.text()};e.prototype.focus=function(){this.$element.focus()};e.prototype.selectText=function(){new o.TextSelection(this.$element[0])};e.prototype.unselectText=function(){o.TextSelection.clear()};e.prototype.getElement=function(){return this.$element};e.prototype.getSaveUrl=function(){return this.$element.data("updateUrl")};e.prototype.hasError=function(){var e=this.$element.text();var t=parseInt(this.$element.attr("data-min-length"));var n=parseInt(this.$element.attr("data-max-length"));var r;if(e.length<t){r=this.$element.attr("data-min-length-message")}else if(e.length>n){r=this.$element.attr("data-max-length-message")}return r};return e}(i.JQueryElementWrapper);n.DeliveryTitle=a},{"../../TextSelection":34,"../JQueryElementWrapper":43}],71:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,".toggle-edit")||this;t.deliveryName=e;t.onJQueryClick=function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("click.done")};t.$label=i.JQueryElementWrapper.getElementBySelector(".toggle-edit .underline-item");t.$icon=i.JQueryElementWrapper.getElementBySelector(".toggle-edit .icon-pencil");t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var e=this;this.$element.on("click",this.onJQueryClick);this.deliveryName.on("delivery.name.edit.enter.done",function(){e.$label.text(e.$label.data("labelSave"));e.$icon.removeClass("icon-pencil").addClass("icon-check")});this.deliveryName.on("delivery.name.edit.exit.done",function(){e.$label.text(e.$label.data("labelEdit"));e.$icon.removeClass("icon-check").addClass("icon-pencil")})};e.prototype.click=function(){this.$label.trigger("click")};return e}(i.JQueryElementWrapper);n.RenameButton=o},{"../JQueryElementWrapper":43}],72:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var o=e("../JQueryElementWrapper");var a=e("./deliveryPassword/DeliveryPasswordForm");var s=e("./deliveryPassword/PasswordNotSavedPopup");var r=function(r){i(e,r);function e(e,t){var n=r.call(this,".package-locked")||this;n.uploadSupervisor=e;n.isDropdownOpen=false;n.isPasswordBeingSaved=false;n.onBodyClick=function(e){if(!$(e.target).hasClass(".package-locked")&&!$(e.target).parents(".package-locked").length){n.emit("dropdown.close.wanted")}};n.trigger=o.JQueryElementWrapper.getElementBySelector("a.package-locked-trigger");n.deliveryPasswordForm=new a.DeliveryPasswordForm(n.uploadSupervisor,t);n.passwordNotSavedPopup=new s.PasswordNotSavedPopup(n);n.$body=$("body");n.bindEventListeners();return n}e.prototype.bindEventListeners=function(){var n=this;this.trigger.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();n.emit("dropdown.opener.click.done")});this.uploadSupervisor.on("step.postChange.done",function(){n.emit("dropdown.close.wanted")});this.on("dropdown.opener.click.done",function(){if(n.isDropdownOpen){n.emit("dropdown.close.wanted")}else{n.emit("dropdown.open.wanted")}});this.on("dropdown.open.wanted",function(){if(n.isDropdownOpen){return}n.$element.addClass("is-open");n.$body.on("click",n.onBodyClick);n.deliveryPasswordForm.removeUnsavedPasswordChanges();n.deliveryPasswordForm.removeUnsavedSendToEmailChanges();n.deliveryPasswordForm.refreshSaveButton();n.emit("dropdown.open.done")});this.on("dropdown.close.wanted",function(){if(!n.isDropdownOpen){return}if(n.isPasswordBeingSaved){return}if(n.deliveryPasswordForm.isPasswordChanged()){n.emit("delivery.password.unsaved.popup.open.wanted")}else{n.$element.removeClass("is-open");n.$body.off("click",n.onBodyClick);n.emit("dropdown.close.done")}});this.on("dropdown.open.done",function(){n.isDropdownOpen=true});this.on("dropdown.close.done",function(){n.isDropdownOpen=false});this.deliveryPasswordForm.on("dropdown.close.wanted",function(){n.emit("dropdown.close.wanted")});this.deliveryPasswordForm.on("delivery.security.cancel.wanted",function(){n.emit("delivery.security.password.save.wanted","")});this.deliveryPasswordForm.on("delivery.security.password.save.wanted",function(e,t){n.emit("delivery.security.password.save.wanted",e,t)});this.on("delivery.security.password.save.wanted",function(){n.isPasswordBeingSaved=true});this.uploadSupervisor.on("delivery.security.password.save.done",function(){n.isPasswordBeingSaved=false;setTimeout(function(){n.emit("dropdown.close.wanted")},0)});this.passwordNotSavedPopup.on("delivery.password.unsaved.dismiss.wanted",function(){n.deliveryPasswordForm.removeUnsavedPasswordChanges();n.emit("dropdown.close.wanted")});this.passwordNotSavedPopup.on("delivery.password.unsaved.save.wanted",function(){n.deliveryPasswordForm.clickSubmitButton()})};e.prototype.getPasswordSaveUrl=function(){return this.deliveryPasswordForm.getPasswordUpdateUrl()};return e}(o.JQueryElementWrapper);n.DeliverySecurity=r},{"../JQueryElementWrapper":43,"./deliveryPassword/DeliveryPasswordForm":73,"./deliveryPassword/PasswordNotSavedPopup":74}],73:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var o=e("../../JQueryElementWrapper");var a=e("./TogglePassword");var s=e("./SendPasswordToMyEmailCheckbox");var r=function(r){i(e,r);function e(e,t){var n=r.call(this,"#delivery-password-form")||this;n.uploadSupervisor=e;n.authStateWatcher=t;n.lastSavedSendPasswordToEmail=false;n.isPasswordBeingSaved=false;n.isLoginAwaited=false;n.refreshSaveButton=function(){if(n.isFormChanged()){n.submitButton.removeClass("disabled")}else{n.submitButton.addClass("disabled")}};new a.TogglePassword;n.passwordInput=n.$element.find("[name=password]");n.submitButton=n.$element.find("a[data-role=save]");n.sendPasswordToMyEmailCheckbox=new s.SendPasswordToMyEmailCheckbox(n);n.cancelButton=o.JQueryElementWrapper.getElementBySelector("a.package-locked-cancel");n.lastSavedPassword=n.currentlyEnteredPassword;n.refreshSaveButton();n.bindEventListeners();return n}e.prototype.removeUnsavedPasswordChanges=function(){this.passwordInput.val(this.lastSavedPassword)};e.prototype.removeUnsavedSendToEmailChanges=function(){this.sendPasswordToMyEmailCheckbox.checked=this.lastSavedSendPasswordToEmail};e.prototype.clickSubmitButton=function(){this.submitButton.trigger("click")};e.prototype.bindEventListeners=function(){var n=this;this.passwordInput.on("keydown",function(e){if(n.isPasswordBeingSaved){e.preventDefault();e.stopImmediatePropagation()}});this.passwordInput.on("keyup",this.refreshSaveButton);this.uploadSupervisor.on("password.authPopup.done",function(){n.submitButton.removeClass("btn-loading");n.isLoginAwaited=true;n.isPasswordBeingSaved=false});this.authStateWatcher.on("authState.change.done",function(e){if(!n.isLoginAwaited||!e){return}n.isLoginAwaited=false;n.clickSubmitButton()});$(document).on("authPopupIgnored",function(){if(n.isLoginAwaited){n.sendPasswordToMyEmailCheckbox.checked=false}n.isLoginAwaited=false});this.sendPasswordToMyEmailCheckbox.on("change.done",this.refreshSaveButton);this.cancelButton.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();if(!n.lastSavedPassword.length||n.isPasswordBeingSaved){n.removeUnsavedPasswordChanges();n.removeUnsavedSendToEmailChanges();n.emit("dropdown.close.wanted");return}n.isPasswordBeingSaved=true;n.emit("delivery.security.cancel.wanted");n.emit("dropdown.close.wanted")});this.uploadSupervisor.on("delivery.security.password.save.done",function(e,t){n.isPasswordBeingSaved=false;n.lastSavedPassword=e;n.lastSavedSendPasswordToEmail=t;n.passwordInput.val(n.lastSavedPassword);n.sendPasswordToMyEmailCheckbox.checked=n.lastSavedSendPasswordToEmail;n.submitButton.removeClass("btn-loading");n.refreshSaveButton()});this.submitButton.on("click",function(e){if(n.isPasswordBeingSaved||n.submitButton.hasClass("disabled")){e.preventDefault();e.stopImmediatePropagation();return}n.$element.trigger("submit")});this.$element.on("submit",function(e){e.preventDefault();e.stopImmediatePropagation();if(n.isPasswordBeingSaved){return}if(!Nette.validateControl(n.passwordInput[0])){return}n.isPasswordBeingSaved=true;n.submitButton.addClass("btn-loading");n.emit("delivery.security.password.save.wanted",n.currentlyEnteredPassword,n.sendPasswordToMyEmailCheckbox.isChecked())});this.sendPasswordToMyEmailCheckbox.on("toggle.wanted",function(){if(n.isPasswordBeingSaved){return}n.emit("sendPasswordToMyEmailCheckbox.toggle.wanted")})};e.prototype.isFormChanged=function(){return this.isPasswordChanged()||this.isSendToEmailChanged()};e.prototype.isPasswordChanged=function(){return this.currentlyEnteredPassword.localeCompare(this.lastSavedPassword)!==0};e.prototype.isSendToEmailChanged=function(){return this.sendPasswordToMyEmailCheckbox.isChecked()!=this.lastSavedSendPasswordToEmail};Object.defineProperty(e.prototype,"currentlyEnteredPassword",{get:function e(){return this.passwordInput.val()},enumerable:true,configurable:true});e.prototype.getPasswordUpdateUrl=function(){return this.$element.data("updateUrl")};return e}(o.JQueryElementWrapper);n.DeliveryPasswordForm=r},{"../../JQueryElementWrapper":43,"./SendPasswordToMyEmailCheckbox":75,"./TogglePassword":76}],74:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"#popup-password-not-saved")||this;t.deliverySecurity=e;t.isPopupOpen=false;t.popupOpener=i.JQueryElementWrapper.getElementBySelector("[href=#popup-password-not-saved]");t.savePasswordButton=i.JQueryElementWrapper.getElementBySelector("[data-action=set-password]");t.dismissPasswordButton=i.JQueryElementWrapper.getElementBySelector("[data-action=dismiss-password]");t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var t=this;this.deliverySecurity.on("delivery.password.unsaved.popup.open.wanted",function(){if(!t.isPopupOpen){t.popupOpener.magnificPopup("open");t.emit("delivery.password.unsaved.popup.open.done")}});this.on("delivery.password.unsaved.popup.open.done",function(){t.isPopupOpen=true});this.on("delivery.password.unsaved.popup.close.done",function(){t.isPopupOpen=false});this.savePasswordButton.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("delivery.password.unsaved.popup.close.wanted");t.emit("delivery.password.unsaved.save.wanted")});this.dismissPasswordButton.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("delivery.password.unsaved.popup.close.wanted");t.emit("delivery.password.unsaved.dismiss.wanted")});this.on("delivery.password.unsaved.popup.close.wanted",function(){t.popupOpener.magnificPopup("close");t.emit("delivery.password.unsaved.popup.close.done")})};return e}(i.JQueryElementWrapper);n.PasswordNotSavedPopup=o},{"../../JQueryElementWrapper":43}],75:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../JQueryElementWrapper");var o=function(n){r(e,n);function e(e){var t=n.call(this,"input[name=sendToEmail]")||this;t.deliveryPasswordForm=e;t.toggle=function(){setTimeout(function(){t.checked=!t.isChecked();t.emit("change.done")},0)};t.bindEventListeners();return t}e.prototype.bindEventListeners=function(){var t=this;this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();t.emit("toggle.wanted")});this.deliveryPasswordForm.on("sendPasswordToMyEmailCheckbox.toggle.wanted",this.toggle)};e.prototype.isChecked=function(){return this.$element.prop("checked")};Object.defineProperty(e.prototype,"checked",{set:function e(t){this.$element.prop("checked",t)},enumerable:true,configurable:true});return e}(i.JQueryElementWrapper);n.SendPasswordToMyEmailCheckbox=o},{"../../JQueryElementWrapper":43}],76:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../JQueryElementWrapper");var o=function(t){r(e,t);function e(){var e=t.call(this,".toggle-password")||this;e.bindEventListeners();return e}e.prototype.bindEventListeners=function(){this.$element.on("click",function(e){e.preventDefault();e.stopImmediatePropagation();var t=$(e.currentTarget).closest(".control-group").find("input");var n=$(e.currentTarget).find('[class*="icon-"]');t.attr("type",t.attr("type")=="password"?"text":"password");n.toggleClass("icon-eye icon-eye-slash");t.focus()})};return e}(i.JQueryElementWrapper);n.TogglePassword=o},{"../../JQueryElementWrapper":43}],77:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){this._recipients=[];this.areRecipientsSet=false}Object.defineProperty(e.prototype,"recipients",{get:function e(){return this._recipients},set:function e(t){if(this.areRecipientsSet){throw new Error("Recipients have been set already.")}this._recipients=t;this.areRecipientsSet=true},enumerable:true,configurable:true});return e}();n.SuggestedRecipients=r},{}],78:[function(e,t,n){var r=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var i=e("../../../../packages/ts.events/index");var a=e("../element/Alert");var s=e("../../abstract/entity/uploadStep/FilelistUploadStep");var l=e("../element/ProblemPopup");var u=e("../../abstract/entity/SizeInBytes");var o=function(o){r(e,o);function e(e){var r=o.call(this)||this;r.uploadSupervisor=e;r.failedFileQueue=[];r.isProblematicFileBeingSolved=false;r.bindListeners=function(){r.uploadSupervisor.on("problem.unsupportedDrop.wanted",function(){r.emit("banner.unsupportedDrop.show")});r.uploadSupervisor.on("problem.file.directory.wanted",function(e){r.emit("banner.directory.show",e)});r.uploadSupervisor.on("problem.file.empty.wanted",function(e){r.emit("banner.emptyFile.show",e)});r.uploadSupervisor.on("problem.file.tooBig.wanted",function(e){r.emit("banner.tooBig.show",e)});r.uploadSupervisor.on("problem.file.duplicate.wanted",function(e){r.emit("banner.duplicate.show",e)});r.uploadSupervisor.on("connection.down.done",function(){r.emit("banner.disconnected.show")});r.uploadSupervisor.on("connection.up.done",function(){r.emit("banner.disconnected.hide")});r.uploadSupervisor.on("step.postChange.done",function(e){if(e instanceof s.FilelistUploadStep){r.emit("banner.duplicate.init.wanted");r.emit("popup.fileUpload.failed.init.wanted")}});r.uploadSupervisor.on("fileUpload.failed.done",function(e,t){var n={};if(_typeof2(t.responseJSON)=="object"){n=t.responseJSON}e.hasMd5Blocked=n.hasOwnProperty("error")&&n.error=="md5 blocked";r.emit("file.failed.add.wanted",e)});r.on("file.failed.add.wanted",function(e){r.failedFileQueue.push(e);if(!r.isProblematicFileBeingSolved){r.emit("popup.fileUpload.failed.refresh.wanted")}});r.uploadSupervisor.on("upload.cannotStart.done",function(e){var t;switch(e){case"Limit exceeded":t="limit";break;case"IP blocked":t="ip";break;case"Quota exceeded":t="quota";break;default:t="error"}r.emit("banner.failed.show",t)});r.on("popup.fileUpload.failed.refresh.wanted",function(){if(!r.problemPopup){throw new Error("ProblemPopup was not yet initialized.")}var e=r.failedFileQueue.shift();if(e){r.renderFileProblemInPopup(e);r.isProblematicFileBeingSolved=true}else{r.problemPopup.close();r.isProblematicFileBeingSolved=false}});r.once("banner.duplicate.init.wanted",function(){var e=new a.Alert(r,"duplicate","[data-alert-occasion=duplicate]");e.beforeShow=function(e,t){r.updateNamesInElement("filenames",e,t[0])}});r.once("popup.fileUpload.failed.init.wanted",function(){r.problemPopup=new l.ProblemPopup;r.problemPopup.on("uploadFile.problem.solved.done",function(){r.emit("popup.fileUpload.failed.refresh.wanted")});r.problemPopup.on("uploadFile.retry.wanted",function(e){r.emit("file.retry.wanted",e)});r.problemPopup.on("uploadFile.omit.wanted",function(e){r.emit("file.omit.wanted",e)})})};r.renderFileProblemInPopup=function(e){if(!r.problemPopup){throw new Error("ProblemPopup was not yet initialized.")}r.problemPopup.renderFile(e);if(!r.problemPopup.isPopupOpen){r.problemPopup.open()}};var t=new a.Alert(r,"tooBig","[data-alert-occasion=too-big]");new a.Alert(r,"unsupportedDrop","[data-alert-occasion=unsupported-drop]");new a.Alert(r,"emptyFile","[data-alert-occasion=empty-file]");var n=new a.Alert(r,"directory","[data-alert-occasion=directories]");new a.Alert(r,"disconnected","[data-alert-occasion=disconnected]");var i=new a.Alert(r,"failed","[data-alert-occasion=failed]");t.beforeShow=function(e,t){e.children(".max-bytes").text(new u.SizeInBytes(t[0],0).toString)};n.beforeShow=function(e,t){r.updateNamesInElement("dirnames",e,t[0])};i.beforeShow=function(e,t){e.children("[data-reason]").addClass("hidden");e.children("[data-reason="+t[0]+"]").removeClass("hidden")};r.bindListeners();return r}e.prototype.updateNamesInElement=function(e,t,n){var r=[];var i=[".single",".multiple"];var o=i[n.length==1?0:1];var a=i[n.length==1?1:0];n.forEach(function(e){r.push(e.name)});t.children(a).addClass("hidden");t.children(o).removeClass("hidden");t.children(o).children("[data-content="+e+"]").text(r.join(", "))};return e}(i.EventDispatcher);n.UploadProblemAnnouncer=o},{"../../../../packages/ts.events/index":80,"../../abstract/entity/SizeInBytes":20,"../../abstract/entity/uploadStep/FilelistUploadStep":22,"../element/Alert":36,"../element/ProblemPopup":48}],79:[function(e,t,n){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t){if(t.hasOwnProperty(n))e[n]=t[n]}};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(n,"__esModule",{value:true});var r=e("../../../../packages/ts.events/index");var l=e("../element/ChooseFilesButton");var u=e("../element/FileList");var c=e("../../abstract/entity/uploadStep/StartUploadStep");var f=e("../../abstract/entity/uploadStep/SharingUploadStep");var d=e("../../abstract/entity/uploadStep/FilelistUploadStep");var p=e("../element/LargeSpinner");var o=e("../../backend/entity/GoToShareAjaxData");var a=e("../../abstract/entity/uploadStep/DeliveryNameDetails");var h=e("../element/RemainingTimeReporter");var m=e("../element/ProgressReporter");var v=e("../element/ContinueButton");var g=e("../element/BackToFileListButton");var y=e("../element/deliveryName/DeliveryName");var b=e("../element/deliverySecurity/DeliverySecurity");var w=e("../element/UpperRightNavButton");var _=e("./SuggestedRecipients");var S=e("../element/SharingContainer/SharingContainer");var s=function(r){i(e,r);function e(e,t,n){var s=r.call(this)||this;s.uploadSupervisor=e;s.fileInput=t;s.authStateWatcher=n;s.loadedSnippets={"#snippet--upload-progress":false};s.areClassesInstantiatedForStep={start:false,filelist:false,sharing:false};s.areActionsLocked=false;s.areSnippetsLoaded=false;s.bindEventListeners=function(){s.uploadSupervisor.on("step.postChange.wanted",function(e){if(e.changeToNext){if(s._currentUploadStep instanceof c.StartUploadStep){s._currentUploadStep=new d.FilelistUploadStep}else if(s._currentUploadStep instanceof d.FilelistUploadStep){s._currentUploadStep=new f.SharingUploadStep}else if(s._currentUploadStep instanceof f.SharingUploadStep){throw new Error("Cannot go to next step from the last one.")}else{throw new Error("Invalid inner state; unknown currentUploadStep.")}}else{if(!s._currentUploadStep.allowsGoingBack()){throw new Error("Cannot go back from current upload step.")}if(s._currentUploadStep instanceof f.SharingUploadStep){s._currentUploadStep=new d.FilelistUploadStep}else{throw new Error("Cannot go back from current upload step (even though it states otherwise).")}}s.instantiateClassesForCurrentStep();s.emit("step.postChange.done",s._currentUploadStep)});s.uploadSupervisor.on("delivery.shareForm.redraw.done",function(e){s.updateSuggestedRecipients(e)});$.nette.ext("authStateChange",{success:function e(){if(!s.upperRightNavButton||!s.upperRightNavButton.isPresentOnCurrentPage()){s.upperRightNavButton=new w.UpperRightNavButton;s.upperRightNavButton.on("click.done",function(){s.emit("upperRightNavButton.click.done")})}}});s.on("upperRightNavButton.click.done",function(){if(!s.upperRightNavButton){throw new Error("UpperRightNavButton should have been initialized already.")}s.emit("upperRightNavButton.action.wanted",s.upperRightNavButton.url)});s.uploadSupervisor.on("actions.lock.wanted",function(){s.areActionsLocked=true;s.emit("actions.lock.done")});s.uploadSupervisor.on("actions.unlock.wanted",function(){s.areActionsLocked=false;s.emit("actions.unlock.done")});s.on("step.postChange.done",s.checkMaxUploadBytesChange);s.once("filelist.nextStep.ajax.wanted",function(){if(!s.uploadSupervisor.upload){throw new Error("Upload has not yet been initialized.")}if(!s.continueToShareUrl){throw new Error("continueToShareUrl has not yet been set (Filelist has probably not been initialized yet).")}var e=new o.GoToShareAjaxData(s.uploadSupervisor.upload,s.uploadSupervisor.uploadProgressPercentage,new a.DeliveryNameDetails(s.uploadSupervisor.filesInArray));$.nette.ajax({method:"POST",url:s.continueToShareUrl,data:e}).done(function(e){if(!e){throw new Error("Missing payload from continueToShare ajax request.")}if(e.recipients){s.updateSuggestedRecipients(e.recipients)}s.emit("filelist.nextStep.done",e)}).fail(function(){throw new Error("Ajax request to go to SharingUploadStep failed.")})});s.uploadSupervisor.on("filelist.nextStep.wanted",function(){if(s.areSnippetsLoaded){s.toggleSnippetVisibility(false);s.emit("filelist.nextStep.done")}else{s.emit("filelist.nextStep.ajax.wanted")}});s.uploadSupervisor.on("sharing.previousStep.wanted",function(){s.toggleSnippetVisibility(true);s.emit("sharing.previousStep.done")});s.uploadSupervisor.on("drop.done",function(){if(s._currentUploadStep instanceof f.SharingUploadStep){s.emit("sharing.previousStep.wanted")}});s.uploadSupervisor.on("shareDeliveryForm.tab.focus.wanted",function(){if(s.currentUploadStep instanceof d.FilelistUploadStep){s.emit("filelist.nextStep.wanted")}})};s.checkMaxUploadBytesChange=function(e){if(e instanceof d.FilelistUploadStep){s.emit("maxUploadBytes.change.detected.done");s.removeListener("step.postChange.done",s.checkMaxUploadBytesChange)}};s.toggleSnippetVisibility=function(e){if(!s.areSnippetsLoaded){throw new Error("Snippets should have been loaded already.")}var t=["filelist","sharing"];var n=e?0:1;for(var r in s.loadedSnippets){$(r).children("[data-step="+t[n]+"]").removeClass("hidden");$(r).children("[data-step="+t[1-n]+"]").addClass("hidden")}};s.registerSnippetSaving=function(){var o=$.nette.ext("snippets").applySnippet;$.nette.ext("snippets").applySnippet=function(e,t,n){if(s.loadedSnippets.hasOwnProperty(e.selector)){var r=$(document.createElement("div"));r.attr("data-step","filelist");r.addClass("hidden");e.children().appendTo(r);r.appendTo(e);var i=$(document.createElement("div"));i.attr("data-step","sharing");i.html(t);i.appendTo(e);s.loadedSnippets[e.selector]=true}else{o.apply(s,[e,t,n])}};$.nette.ext("snippets").complete(function(){if(s.areSnippetsLoaded){return}for(var e in s.loadedSnippets){if(!s.loadedSnippets[e]){return}}s.areSnippetsLoaded=true})};s.instantiateClassesForCurrentStep=function(){if(!s.areClassesInstantiatedForStep.hasOwnProperty(s._currentUploadStep.getName())){throw new Error("Unknown upload step "+s._currentUploadStep.getName())}if(s.areClassesInstantiatedForStep[s._currentUploadStep.getName()]){return}if(s._currentUploadStep instanceof c.StartUploadStep){var e=new l.ChooseFilesButton;e.on("fileInput.dialogue.open.wanted",s.openFileInputDialogue);s.uploadSupervisor.on("upload.cannotStart.done",function(){e.disable()});new p.LargeSpinner(s.uploadSupervisor)}else if(s._currentUploadStep instanceof d.FilelistUploadStep){s.registerSnippetSaving();$("div.alert:not([data-alert-occasion])").remove();s.fileList=new u.FileList(s.uploadSupervisor);var t=new v.ContinueButton(s.uploadSupervisor);s.continueToShareUrl=t.getSharingStepUrl();var n=new l.ChooseFilesButton;n.on("fileInput.dialogue.open.wanted",s.openFileInputDialogue);s.fileList.on("file.remove.wanted",function(e){if(!s.areActionsLocked){s.emit("file.remove.wanted",e)}});t.on("filelist.nextStep.wanted",function(){s.emit("filelist.nextStep.wanted")})}else if(s._currentUploadStep instanceof f.SharingUploadStep){var r=new g.BackToFileListButton(s.uploadSupervisor);new h.RemainingTimeReporter(s.uploadSupervisor);new m.ProgressReporter(s.uploadSupervisor);r.on("click.done",function(){s.emit("sharing.previousStep.wanted")});var i=new y.DeliveryName(s.uploadSupervisor);i.on("delivery.name.save.wanted",function(e){s.emit("delivery.name.save.wanted",i.getSaveUrl(),e)});var o=new b.DeliverySecurity(s.uploadSupervisor,s.authStateWatcher);o.on("delivery.security.password.save.wanted",function(e,t){if(t===void 0){t=false}s.emit("delivery.security.password.save.wanted",o.getPasswordSaveUrl(),e,t)});var a=new S.SharingContainer(s.uploadSupervisor,s,s.suggestedRecipients);a.on("tab.link.focus.done",s.emitTabLinkFocusDone);a.on("delivery.shareForm.submit.wanted",s.emitDeliveryShareFormSubmitWanted);a.on("delivery.shareForm.inputs.edit.done",s.emitDeliveryShareFormInputEditsDone);a.on("delivery.shareForm.redraw.wanted",s.emitDeliveryShareFormRedrawWanted);s.emit("delivery.shareForm.recipients.focus.wanted")}else{throw new Error("Invalid inner state; unknown currentUploadStep.")}s.areClassesInstantiatedForStep[s._currentUploadStep.getName()]=true};s.emitDeliveryShareFormSubmitWanted=function(e,t){s.emit("delivery.shareForm.submit.wanted",e,t)};s.emitTabLinkFocusDone=function(){s.emit("tab.link.focus.done")};s.emitDeliveryShareFormInputEditsDone=function(){s.emit("delivery.shareForm.inputs.edit.done")};s.emitDeliveryShareFormRedrawWanted=function(e,t){s.emit("delivery.shareForm.redraw.wanted",e,t)};s.openFileInputDialogue=function(){if(s.uploadSupervisor.canFilesBeAdded){s.fileInput.openDialogue()}};s.bindEventListeners();s.suggestedRecipients=new _.SuggestedRecipients;s._currentUploadStep=new c.StartUploadStep;s.instantiateClassesForCurrentStep();return s}e.prototype.updateSuggestedRecipients=function(e){this.suggestedRecipients.recipients=e};Object.defineProperty(e.prototype,"maxUploadBytes",{get:function e(){if(this._currentUploadStep instanceof c.StartUploadStep){return $(".intro").data("maxUploadBytes")}else if(this._currentUploadStep instanceof d.FilelistUploadStep){if(!this.fileList){throw new Error("FileList should have been initialized by now.")}return this.fileList.element.data("maxUploadBytes")}else{throw new Error("Detecting maxUploadBytes is supported only on start / filelist upload steps.")}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"currentUploadStep",{get:function e(){return this._currentUploadStep},enumerable:true,configurable:true});return e}(r.EventDispatcher);n.UploadStepController=s},{"../../../../packages/ts.events/index":80,"../../abstract/entity/uploadStep/DeliveryNameDetails":21,"../../abstract/entity/uploadStep/FilelistUploadStep":22,"../../abstract/entity/uploadStep/SharingUploadStep":23,"../../abstract/entity/uploadStep/StartUploadStep":24,"../../backend/entity/GoToShareAjaxData":27,"../element/BackToFileListButton":37,"../element/ChooseFilesButton":38,"../element/ContinueButton":39,"../element/FileList":42,"../element/LargeSpinner":44,"../element/ProgressReporter":50,"../element/RemainingTimeReporter":51,"../element/SharingContainer/SharingContainer":64,"../element/UpperRightNavButton":68,"../element/deliveryName/DeliveryName":69,"../element/deliverySecurity/DeliverySecurity":72,"./SuggestedRecipients":77}],80:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function e(){this._listeners={}}e.prototype.addListener=function(e,t){return this.on(e,t)};e.prototype.dispatch=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return this.emit.apply(this,[e].concat(t))};e.prototype.emit=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=this._listeners[e];if(r){r.forEach(function(e){return e.listener.apply({},t||[])});this._listeners[e]=this._listeners[e].filter(function(e){return!e.once})}return this};e.prototype.listenerCount=function(e){return this._listeners[e].length};e.prototype.listeners=function(e){return this._listeners[e]};e.prototype.on=function(e,t){this._register(e,t,false);return this};e.prototype.once=function(e,t){this._register(e,t,true);return this};e.prototype.removeAllListeners=function(e){this._listeners[e]=[];return this};e.prototype.removeListener=function(t,n){this._listeners[t]=this._listeners[t].filter(function(e){return!(e.event===t&&e.listener===n)});return this};e.prototype._register=function(e,t,n){var r=false;if(this._listeners[e]){for(var i=0,o=this._listeners[e];i<o.length;i++){var a=o[i];if(a.listener==t){r=true;if(a.once&&!n){a.once=n}}}}else{this._listeners[e]=[]}!r&&this._listeners[e].unshift({event:e,listener:t,once:n})};e.prototype.allListeners=function(){var e=[];for(var t in this._listeners){e=e.concat(this._listeners[t])}return e};return e}();n.EventDispatcher=r},{}],81:[function(e,t,n){"use strict";var r=e("./raw");var i=[];var o=[];var a=r.makeRequestCallFromTimer(s);function s(){if(o.length){throw o.shift()}}t.exports=l;function l(e){var t;if(i.length){t=i.pop()}else{t=new u}t.task=e;r(t)}function u(){this.task=null}u.prototype.call=function(){try{this.task.call()}catch(e){if(l.onerror){l.onerror(e)}else{o.push(e);a()}}finally{this.task=null;i[i.length]=this}}},{"./raw":82}],82:[function(e,d,t){(function(e){"use strict";d.exports=t;function t(e){if(!r.length){n();i=true}r[r.length]=e}var r=[];var i=false;var n;var o=0;var a=1024;function s(){while(o<r.length){var e=o;o=o+1;r[e].call();if(o>a){for(var t=0,n=r.length-o;t<n;t++){r[t]=r[t+o]}r.length-=o;o=0}}r.length=0;o=0;i=false}var l=typeof e!=="undefined"?e:self;var u=l.MutationObserver||l.WebKitMutationObserver;if(typeof u==="function"){n=c(s)}else{n=f(s)}t.requestFlush=n;function c(e){var t=1;var n=new u(e);var r=document.createTextNode("");n.observe(r,{characterData:true});return function e(){t=-t;r.data=t}}function f(i){return function e(){var t=setTimeout(r,0);var n=setInterval(r,50);function r(){clearTimeout(t);clearInterval(n);i()}}}t.makeRequestCallFromTimer=f}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],83:[function(e,n,r){(function(e,t){if((typeof r==="undefined"?"undefined":_typeof2(r))==="object"){n.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{e.BeforeUnload=t()}})(this,function(){function e(e,t,n){this.message=this.validateMessage(e);this.conditions=this.validateConditions(t);this.handlerReference=null;if(typeof n==="undefined"||n){this.register()}}e.prototype.validateConditions=function(e){if(typeof e==="function"){return[e]}else if(Array.isArray(e)){return e}else{this.throwException("You must provide either a list of functions, a function, or nothing as the second parameter.")}};e.prototype.validateMessage=function(e){if(typeof e!=="string"){this.throwException("You must provide a message.")}return e};e.prototype.check=function(){var n=false;this.conditions.some(function(e){var t=e();if(t){n=t}return t});return n};e.prototype.handler=function(e){var t=this.check();var n=t&&typeof t==="string"?t:this.message;if(t){(e||window.event).returnValue=n;return n}return void 0};e.prototype.register=function(e,t){e=e?e:window;this.handlerReference=t?t:this.handler.bind(this);if(e.addEventListener){e.addEventListener("beforeunload",this.handlerReference)}else{e.attachEvent("onbeforeunload",this.handlerReference)}};e.prototype.unregister=function(e){e=e?e:window;if(this.handlerReference!==null){if(e.removeEventListener){e.removeEventListener("beforeunload",this.handlerReference)}else{e.detachEvent("onbeforeunload",this.handlerReference)}this.handlerReference=null}};e.prototype.confirmedIfNecessary=function(e,t){var n=this.check();if(!n||window.confirm(typeof n==="string"?n:this.message)){if(!t){this.unregister()}e()}};e.prototype.throwException=function(e){throw new Error("before-unload: "+e)};return e})},{}],84:[function(e,t,n){},{}],85:[function(r,i,o){(function(e,t){if(typeof define==="function"&&define.amd){define(["module","select"],t)}else if(typeof o!=="undefined"){t(i,r("select"))}else{var n={exports:{}};t(n,e.select);e.clipboardAction=n.exports}})(this,function(e,t){"use strict";var i=n(t);function n(e){return e&&e.__esModule?e:{default:e}}var r=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof2(e)}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof2(e)};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,n){if(t)r(e.prototype,t);if(n)r(e,n);return e}}();var s=function(){function t(e){o(this,t);this.resolveOptions(e);this.initSelection()}a(t,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action;this.container=t.container;this.emitter=t.emitter;this.target=t.target;this.text=t.text;this.trigger=t.trigger;this.selectedText=""}},{key:"initSelection",value:function e(){if(this.text){this.selectFake()}else if(this.target){this.selectTarget()}}},{key:"selectFake",value:function e(){var t=this;var n=document.documentElement.getAttribute("dir")=="rtl";this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||true;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[n?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=(0,i.default)(this.fakeElem);this.copyText()}},{key:"removeFake",value:function e(){if(this.fakeHandler){this.container.removeEventListener("click",this.fakeHandlerCallback);this.fakeHandler=null;this.fakeHandlerCallback=null}if(this.fakeElem){this.container.removeChild(this.fakeElem);this.fakeElem=null}}},{key:"selectTarget",value:function e(){this.selectedText=(0,i.default)(this.target);this.copyText()}},{key:"copyText",value:function e(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=false}this.handleResult(t)}},{key:"handleResult",value:function e(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function e(){if(this.trigger){this.trigger.focus()}window.getSelection().removeAllRanges()}},{key:"destroy",value:function e(){this.removeFake()}},{key:"action",set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";this._action=t;if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"')}},get:function e(){return this._action}},{key:"target",set:function e(t){if(t!==undefined){if(t&&(typeof t==="undefined"?"undefined":r(t))==="object"&&t.nodeType===1){if(this.action==="copy"&&t.hasAttribute("disabled")){throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute')}if(this.action==="cut"&&(t.hasAttribute("readonly")||t.hasAttribute("disabled"))){throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}this._target=t}else{throw new Error('Invalid "target" value, use a valid Element')}}},get:function e(){return this._target}}]);return t}();e.exports=s})},{select:117}],86:[function(r,i,o){(function(e,t){if(typeof define==="function"&&define.amd){define(["module","./clipboard-action","tiny-emitter","good-listener"],t)}else if(typeof o!=="undefined"){t(i,r("./clipboard-action"),r("tiny-emitter"),r("good-listener"))}else{var n={exports:{}};t(n,e.clipboardAction,e.tinyEmitter,e.goodListener);e.clipboard=n.exports}})(this,function(e,t,n,r){"use strict";var i=s(t);var o=s(n);var a=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var l=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof2(e)}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof2(e)};function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,n){if(t)r(e.prototype,t);if(n)r(e,n);return e}}();function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&((typeof t==="undefined"?"undefined":_typeof2(t))==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof2(t)))}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){d(r,e);function r(e,t){u(this,r);var n=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));n.resolveOptions(t);n.listenClick(e);return n}c(r,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=typeof t.action==="function"?t.action:this.defaultAction;this.target=typeof t.target==="function"?t.target:this.defaultTarget;this.text=typeof t.text==="function"?t.text:this.defaultText;this.container=l(t.container)==="object"?t.container:document.body}},{key:"listenClick",value:function e(t){var n=this;this.listener=(0,a.default)(t,"click",function(e){return n.onClick(e)})}},{key:"onClick",value:function e(t){var n=t.delegateTarget||t.currentTarget;if(this.clipboardAction){this.clipboardAction=null}this.clipboardAction=new i.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:"defaultAction",value:function e(t){return h("action",t)}},{key:"defaultTarget",value:function e(t){var n=h("target",t);if(n){return document.querySelector(n)}}},{key:"defaultText",value:function e(t){return h("text",t)}},{key:"destroy",value:function e(){this.listener.destroy();if(this.clipboardAction){this.clipboardAction.destroy();this.clipboardAction=null}}}],[{key:"isSupported",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["copy","cut"];var n=typeof t==="string"?[t]:t;var r=!!document.queryCommandSupported;n.forEach(function(e){r=r&&!!document.queryCommandSupported(e)});return r}}]);return r}(o.default);function h(e,t){var n="data-clipboard-"+e;if(!t.hasAttribute(n)){return}return t.getAttribute(n)}e.exports=p})},{"./clipboard-action":85,"good-listener":90,"tiny-emitter":119}],87:[function(e,t,n){var r=9;if(typeof Element!=="undefined"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function o(e,t){while(e&&e.nodeType!==r){if(typeof e.matches==="function"&&e.matches(t)){return e}e=e.parentNode}}t.exports=o},{}],88:[function(e,t,n){var i=e("./closest");function o(t,e,n,r,i){var o=a.apply(this,arguments);t.addEventListener(n,o,i);return{destroy:function e(){t.removeEventListener(n,o,i)}}}function r(e,t,n,r,i){if(typeof e.addEventListener==="function"){return o.apply(null,arguments)}if(typeof n==="function"){return o.bind(null,document).apply(null,arguments)}if(typeof e==="string"){e=document.querySelectorAll(e)}return Array.prototype.map.call(e,function(e){return o(e,t,n,r,i)})}function a(t,n,e,r){return function(e){e.delegateTarget=i(e.target,n);if(e.delegateTarget){r.call(t,e)}}}t.exports=r},{"./closest":87}],89:[function(e,t,n){n.node=function(e){return e!==undefined&&e instanceof HTMLElement&&e.nodeType===1};n.nodeList=function(e){var t=Object.prototype.toString.call(e);return e!==undefined&&(t==="[object NodeList]"||t==="[object HTMLCollection]")&&"length"in e&&(e.length===0||n.node(e[0]))};n.string=function(e){return typeof e==="string"||e instanceof String};n.fn=function(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"}},{}],90:[function(e,t,n){var r=e("./is");var i=e("delegate");function o(e,t,n){if(!e&&!t&&!n){throw new Error("Missing required arguments")}if(!r.string(t)){throw new TypeError("Second argument must be a String")}if(!r.fn(n)){throw new TypeError("Third argument must be a Function")}if(r.node(e)){return a(e,t,n)}else if(r.nodeList(e)){return s(e,t,n)}else if(r.string(e)){return l(e,t,n)}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}}function a(t,n,r){t.addEventListener(n,r);return{destroy:function e(){t.removeEventListener(n,r)}}}function s(t,n,r){Array.prototype.forEach.call(t,function(e){e.addEventListener(n,r)});return{destroy:function e(){Array.prototype.forEach.call(t,function(e){e.removeEventListener(n,r)})}}}function l(e,t,n){return i(document.body,e,t,n)}t.exports=o},{"./is":89,delegate:88}],91:[function(e,t,n){"use strict";n.__esModule=true;var r=n.canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var i=n.addEventListener=function e(t,n,r){return t.addEventListener?t.addEventListener(n,r,false):t.attachEvent("on"+n,r)};var o=n.removeEventListener=function e(t,n,r){return t.removeEventListener?t.removeEventListener(n,r,false):t.detachEvent("on"+n,r)};var a=n.getConfirmation=function e(t,n){return n(window.confirm(t))};var s=n.supportsHistory=function e(){var t=window.navigator.userAgent;if((t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1)return false;return window.history&&"pushState"in window.history};var l=n.supportsPopStateOnHashChange=function e(){return window.navigator.userAgent.indexOf("Trident")===-1};var u=n.supportsGoWithoutReloadUsingHash=function e(){return window.navigator.userAgent.indexOf("Firefox")===-1};var c=n.isExtraneousPopstateEvent=function e(t){return t.state===undefined&&navigator.userAgent.indexOf("CriOS")===-1}},{}],92:[function(e,t,n){"use strict";n.__esModule=true;n.locationsAreEqual=n.createLocation=undefined;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r=e("resolve-pathname");var s=u(r);var i=e("value-equal");var o=u(i);var l=e("./PathUtils");function u(e){return e&&e.__esModule?e:{default:e}}var c=n.createLocation=function e(t,n,r,i){var o=void 0;if(typeof t==="string"){o=(0,l.parsePath)(t);o.state=n}else{o=a({},t);if(o.pathname===undefined)o.pathname="";if(o.search){if(o.search.charAt(0)!=="?")o.search="?"+o.search}else{o.search=""}if(o.hash){if(o.hash.charAt(0)!=="#")o.hash="#"+o.hash}else{o.hash=""}if(n!==undefined&&o.state===undefined)o.state=n}try{o.pathname=decodeURI(o.pathname)}catch(e){if(e instanceof URIError){throw new URIError('Pathname "'+o.pathname+'" could not be decoded. '+"This is likely caused by an invalid percent-encoding.")}else{throw e}}if(r)o.key=r;if(i){if(!o.pathname){o.pathname=i.pathname}else if(o.pathname.charAt(0)!=="/"){o.pathname=(0,s.default)(o.pathname,i.pathname)}}else{if(!o.pathname){o.pathname="/"}}return o};var f=n.locationsAreEqual=function e(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&(0,o.default)(t.state,n.state)}},{"./PathUtils":93,"resolve-pathname":116,"value-equal":120}],93:[function(e,t,n){"use strict";n.__esModule=true;var r=n.addLeadingSlash=function e(t){return t.charAt(0)==="/"?t:"/"+t};var i=n.stripLeadingSlash=function e(t){return t.charAt(0)==="/"?t.substr(1):t};var o=n.hasBasename=function e(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)};var a=n.stripBasename=function e(t,n){return o(t,n)?t.substr(n.length):t};var s=n.stripTrailingSlash=function e(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t};var l=n.parsePath=function e(t){var n=t||"/";var r="";var i="";var o=n.indexOf("#");if(o!==-1){i=n.substr(o);n=n.substr(0,o)}var a=n.indexOf("?");if(a!==-1){r=n.substr(a);n=n.substr(0,a)}return{pathname:n,search:r==="?"?"":r,hash:i==="#"?"":i}};var u=n.createPath=function e(t){var n=t.pathname,r=t.search,i=t.hash;var o=n||"/";if(r&&r!=="?")o+=r.charAt(0)==="?"?r:"?"+r;if(i&&i!=="#")o+=i.charAt(0)==="#"?i:"#"+i;return o}},{}],94:[function(e,t,n){"use strict";n.__esModule=true;var A=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof2(e)}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof2(e)};var B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var r=e("warning");var U=a(r);var i=e("invariant");var L=a(i);var M=e("./LocationUtils");var R=e("./PathUtils");var o=e("./createTransitionManager");var N=a(o);var W=e("./DOMUtils");function a(e){return e&&e.__esModule?e:{default:e}}var H="popstate";var z="hashchange";var Q=function e(){try{return window.history.state||{}}catch(e){return{}}};var s=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,L.default)(W.canUseDOM,"Browser history needs a DOM");var l=window.history;var u=(0,W.supportsHistory)();var n=!(0,W.supportsPopStateOnHashChange)();var r=t.forceRefresh,c=r===undefined?false:r,i=t.getUserConfirmation,f=i===undefined?W.getConfirmation:i,o=t.keyLength,a=o===undefined?6:o;var d=t.basename?(0,R.stripTrailingSlash)((0,R.addLeadingSlash)(t.basename)):"";var s=function e(t){var n=t||{},r=n.key,i=n.state;var o=window.location,a=o.pathname,s=o.search,l=o.hash;var u=a+s+l;(0,U.default)(!d||(0,R.hasBasename)(u,d),"You are attempting to use a basename on a page whose URL path does not begin "+'with the basename. Expected path "'+u+'" to begin with "'+d+'".');if(d)u=(0,R.stripBasename)(u,d);return(0,M.createLocation)(u,i,r)};var p=function e(){return Math.random().toString(36).substr(2,a)};var h=(0,N.default)();var m=function e(t){B(j,t);j.length=l.length;h.notifyListeners(j.location,j.action)};var v=function e(t){if((0,W.isExtraneousPopstateEvent)(t))return;b(s(t.state))};var g=function e(){b(s(Q()))};var y=false;var b=function e(t){if(y){y=false;m()}else{var n="POP";h.confirmTransitionTo(t,n,f,function(e){if(e){m({action:n,location:t})}else{w(t)}})}};var w=function e(t){var n=j.location;var r=S.indexOf(n.key);if(r===-1)r=0;var i=S.indexOf(t.key);if(i===-1)i=0;var o=r-i;if(o){y=true;k(o)}};var _=s(Q());var S=[_.key];var x=function e(t){return d+(0,R.createPath)(t)};var E=function e(t,n){(0,U.default)(!((typeof t==="undefined"?"undefined":A(t))==="object"&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to push when the 1st "+"argument is a location-like object that already has state; it is ignored");var a="PUSH";var s=(0,M.createLocation)(t,n,p(),j.location);h.confirmTransitionTo(s,a,f,function(e){if(!e)return;var t=x(s);var n=s.key,r=s.state;if(u){l.pushState({key:n,state:r},null,t);if(c){window.location.href=t}else{var i=S.indexOf(j.location.key);var o=S.slice(0,i===-1?0:i+1);o.push(s.key);S=o;m({action:a,location:s})}}else{(0,U.default)(r===undefined,"Browser history cannot push state in browsers that do not support HTML5 history");window.location.href=t}})};var C=function e(t,n){(0,U.default)(!((typeof t==="undefined"?"undefined":A(t))==="object"&&t.state!==undefined&&n!==undefined),"You should avoid providing a 2nd state argument to replace when the 1st "+"argument is a location-like object that already has state; it is ignored");var o="REPLACE";var a=(0,M.createLocation)(t,n,p(),j.location);h.confirmTransitionTo(a,o,f,function(e){if(!e)return;var t=x(a);var n=a.key,r=a.state;if(u){l.replaceState({key:n,state:r},null,t);if(c){window.location.replace(t)}else{var i=S.indexOf(j.location.key);if(i!==-1)S[i]=a.key;m({action:o,location:a})}}else{(0,U.default)(r===undefined,"Browser history cannot replace state in browsers that do not support HTML5 history");window.location.replace(t)}})};var k=function e(t){l.go(t)};var T=function e(){return k(-1)};var P=function e(){return k(1)};var O=0;var $=function e(t){O+=t;if(O===1){(0,W.addEventListener)(window,H,v);if(n)(0,W.addEventListener)(window,z,g)}else if(O===0){(0,W.removeEventListener)(window,H,v);if(n)(0,W.removeEventListener)(window,z,g)}};var F=false;var I=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n=h.setPrompt(t);if(!F){$(1);F=true}return function(){if(F){F=false;$(-1)}return n()}};var D=function e(t){var n=h.appendListener(t);$(1);return function(){$(-1);n()}};var j={length:l.length,action:"POP",location:_,createHref:x,push:E,replace:C,go:k,goBack:T,goForward:P,block:I,listen:D};return j};n.default=s},{"./DOMUtils":91,"./LocationUtils":92,"./PathUtils":93,"./createTransitionManager":95,invariant:96,warning:121}],95:[function(e,t,n){"use strict";n.__esModule=true;var r=e("warning");var s=i(r);function i(e){return e&&e.__esModule?e:{default:e}}var o=function e(){var a=null;var t=function e(t){(0,s.default)(a==null,"A history supports only one prompt at a time");a=t;return function(){if(a===t)a=null}};var n=function e(t,n,r,i){if(a!=null){var o=typeof a==="function"?a(t,n):a;if(typeof o==="string"){if(typeof r==="function"){r(o,i)}else{(0,s.default)(false,"A history needs a getUserConfirmation function in order to use a prompt message");i(true)}}else{i(o!==false)}}else{i(true)}};var i=[];var r=function e(t){var n=true;var r=function e(){if(n)t.apply(undefined,arguments)};i.push(r);return function(){n=false;i=i.filter(function(e){return e!==r})}};var o=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++){n[r]=arguments[r]}i.forEach(function(e){return e.apply(undefined,n)})};return{setPrompt:t,confirmTransitionTo:n,appendListener:r,notifyListeners:o}};n.default=o},{warning:121}],96:[function(e,t,n){(function(d){"use strict";var e=function e(t,n,r,i,o,a,s,l){if(d.env.NODE_ENV!=="production"){if(n===undefined){throw new Error("invariant requires an error message argument")}}if(!t){var u;if(n===undefined){u=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var c=[r,i,o,a,s,l];var f=0;u=new Error(n.replace(/%s/g,function(){return c[f++]}));u.name="Invariant Violation"}u.framesToPop=1;throw u}};t.exports=e}).call(this,e("_process"))},{_process:100}],97:[function(t,e,n){(function(e){"use strict";var I=t("dns");var D={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,dnsWarnNoMXRecord:5,dnsWarnNoRecord:6,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};D.defer=typeof e!=="undefined"&&e&&typeof e.nextTick==="function"?e.nextTick.bind(e):function(e){return setTimeout(e,0)};D.specials=function(){var e='()<>[]:;@\\,."';var t=new Array(256);for(var n=255;n>=0;--n){t[n]=false}for(var r=0;r<e.length;++r){t[e.charCodeAt(r)]=true}return function(e){return t[e]}}();D.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/};D.checkIpV6=function(e){return e.every(function(e){return D.regex.ipV6.test(e)})};D.validDomain=function(e,t){if(t.tldBlacklist){if(Array.isArray(t.tldBlacklist)){return D.indexOf.call(t.tldBlacklist,e)===-1}return!D.hasOwn.call(t.tldBlacklist,e)}if(Array.isArray(t.tldWhitelist)){return D.indexOf.call(t.tldWhitelist,e)!==-1}return D.hasOwn.call(t.tldWhitelist,e)};n.validate=D.validate=function(e,t,r){t=t||{};if(typeof t==="function"){r=t;t={}}if(typeof r!=="function"){if(t.checkDNS){throw new TypeError("expected callback function for checkDNS option")}r=null}var i=void 0;var o=void 0;if(typeof t.errorLevel==="number"){i=true;o=t.errorLevel}else{i=!!t.errorLevel;o=D.diagnoses.valid}if(t.tldWhitelist){if(typeof t.tldWhitelist==="string"){t.tldWhitelist=[t.tldWhitelist]}else if(_typeof2(t.tldWhitelist)!=="object"){throw new TypeError("expected array or object tldWhitelist")}}if(t.tldBlacklist){if(typeof t.tldBlacklist==="string"){t.tldBlacklist=[t.tldBlacklist]}else if(_typeof2(t.tldBlacklist)!=="object"){throw new TypeError("expected array or object tldBlacklist")}}if(t.minDomainAtoms&&(t.minDomainAtoms!==(+t.minDomainAtoms|0)||t.minDomainAtoms<0)){throw new TypeError("expected positive integer minDomainAtoms")}var a=D.diagnoses.valid;var s=function e(t){if(t>a){a=t}};var n={now:D.components.localpart,prev:D.components.localpart,stack:[D.components.localpart]};var l="";var u={local:"",domain:""};var c={locals:[""],domains:[""]};var f=0;var d=0;var p=0;var h=void 0;var m=false;var v=false;var g=e.length;var y=void 0;for(var b=0;b<g;++b){y=e[b];switch(n.now){case D.components.localpart:switch(y){case"(":if(d===0){s(f===0?D.diagnoses.cfwsComment:D.diagnoses.deprecatedComment)}else{s(D.diagnoses.cfwsComment);v=true}n.stack.push(n.now);n.now=D.components.contextComment;break;case".":if(d===0){s(f===0?D.diagnoses.errDotStart:D.diagnoses.errConsecutiveDots)}else{if(v){s(D.diagnoses.deprecatedLocalPart)}v=false;d=0;++f;u.local+=y;c.locals[f]=""}break;case'"':if(d===0){s(f===0?D.diagnoses.rfc5321QuotedString:D.diagnoses.deprecatedLocalPart);u.local+=y;c.locals[f]+=y;++d;v=true;n.stack.push(n.now);n.now=D.components.contextQuotedString}else{s(D.diagnoses.errExpectingATEXT)}break;case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF);break}case" ":case"\t":if(d===0){s(f===0?D.diagnoses.cfwsFWS:D.diagnoses.deprecatedFWS)}else{v=true}n.stack.push(n.now);n.now=D.components.contextFWS;l=y;break;case"@":if(n.stack.length!==1){throw new Error("unexpected item on context stack")}if(u.local.length===0){s(D.diagnoses.errNoLocalPart)}else if(d===0){s(D.diagnoses.errDotEnd)}else if(u.local.length>64){s(D.diagnoses.rfc5322LocalTooLong)}else if(n.prev===D.components.contextComment||n.prev===D.components.contextFWS){s(D.diagnoses.deprecatedCFWSNearAt)}n.now=D.components.domain;n.stack[0]=D.components.domain;f=0;d=0;v=false;break;default:if(v){switch(n.prev){case D.components.contextComment:case D.components.contextFWS:s(D.diagnoses.errATEXTAfterCFWS);break;case D.components.contextQuotedString:s(D.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+n.prev)}}else{n.prev=n.now;h=y.charCodeAt(0);if(h<33||h>126||D.specials(h)){s(D.diagnoses.errExpectingATEXT)}u.local+=y;c.locals[f]+=y;++d}}break;case D.components.domain:switch(y){case"(":if(d===0){s(f===0?D.diagnoses.deprecatedCFWSNearAt:D.diagnoses.deprecatedComment)}else{v=true;s(D.diagnoses.cfwsComment)}n.stack.push(n.now);n.now=D.components.contextComment;break;case".":if(d===0){s(f===0?D.diagnoses.errDotStart:D.diagnoses.errConsecutiveDots)}else if(m){s(D.diagnoses.errDomainHyphenEnd)}else if(d>63){s(D.diagnoses.rfc5322LabelTooLong)}v=false;d=0;++f;c.domains[f]="";u.domain+=y;break;case"[":if(u.domain.length===0){v=true;++d;n.stack.push(n.now);n.now=D.components.literal;u.domain+=y;c.domains[f]+=y;u.literal=""}else{s(D.diagnoses.errExpectingATEXT)}break;case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF);break}case" ":case"\t":if(d===0){s(f===0?D.diagnoses.deprecatedCFWSNearAt:D.diagnoses.deprecatedFWS)}else{s(D.diagnoses.cfwsFWS);v=true}n.stack.push(n.now);n.now=D.components.contextFWS;l=y;break;default:if(v){switch(n.prev){case D.components.contextComment:case D.components.contextFWS:s(D.diagnoses.errATEXTAfterCFWS);break;case D.components.literal:s(D.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+n.prev)}}h=y.charCodeAt(0);m=false;if(h<33||h>126||D.specials(h)){s(D.diagnoses.errExpectingATEXT)}else if(y==="-"){if(d===0){s(D.diagnoses.errDomainHyphenStart)}m=true}else if(h<48||h>122||h>57&&h<65||h>90&&h<97){s(D.diagnoses.rfc5322Domain)}u.domain+=y;c.domains[f]+=y;++d}break;case D.components.literal:switch(y){case"]":if(a<D.categories.deprecated){var w=-1;var _=u.literal;var S=D.regex.ipV4.exec(_);if(S){w=S.index;if(w!==0){_=_.slice(0,w)+"0:0"}}if(w===0){s(D.diagnoses.rfc5321AddressLiteral)}else if(_.slice(0,5).toLowerCase()!=="ipv6:"){s(D.diagnoses.rfc5322DomainLiteral)}else{var x=_.slice(5);var E=D.maxIPv6Groups;var C=x.split(":");w=x.indexOf("::");if(!~w){if(C.length!==E){s(D.diagnoses.rfc5322IPv6GroupCount)}}else if(w!==x.lastIndexOf("::")){s(D.diagnoses.rfc5322IPv62x2xColon)}else{if(w===0||w===x.length-2){++E}if(C.length>E){s(D.diagnoses.rfc5322IPv6MaxGroups)}else if(C.length===E){s(D.diagnoses.deprecatedIPv6)}}if(x[0]===":"&&x[1]!==":"){s(D.diagnoses.rfc5322IPv6ColonStart)}else if(x[x.length-1]===":"&&x[x.length-2]!==":"){s(D.diagnoses.rfc5322IPv6ColonEnd)}else if(D.checkIpV6(C)){s(D.diagnoses.rfc5321AddressLiteral)}else{s(D.diagnoses.rfc5322IPv6BadCharacter)}}}else{s(D.diagnoses.rfc5322DomainLiteral)}u.domain+=y;c.domains[f]+=y;++d;n.prev=n.now;n.now=n.stack.pop();break;case"\\":s(D.diagnoses.rfc5322DomainLiteralOBSDText);n.stack.push(n.now);n.now=D.components.contextQuotedPair;break;case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF);break}case" ":case"\t":s(D.diagnoses.cfwsFWS);n.stack.push(n.now);n.now=D.components.contextFWS;l=y;break;default:h=y.charCodeAt(0);if(h>127||h===0||y==="["){s(D.diagnoses.errExpectingDTEXT);break}else if(h<33||h===127){s(D.diagnoses.rfc5322DomainLiteralOBSDText)}u.literal+=y;u.domain+=y;c.domains[f]+=y;++d}break;case D.components.contextQuotedString:switch(y){case"\\":n.stack.push(n.now);n.now=D.components.contextQuotedPair;break;case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF);break}case"\t":u.local+=" ";c.locals[f]+=" ";++d;s(D.diagnoses.cfwsFWS);n.stack.push(n.now);n.now=D.components.contextFWS;l=y;break;case'"':u.local+=y;c.locals[f]+=y;++d;n.prev=n.now;n.now=n.stack.pop();break;default:h=y.charCodeAt(0);if(h>127||h===0||h===10){s(D.diagnoses.errExpectingQTEXT)}else if(h<32||h===127){s(D.diagnoses.deprecatedQTEXT)}u.local+=y;c.locals[f]+=y;++d}break;case D.components.contextQuotedPair:h=y.charCodeAt(0);if(h>127){s(D.diagnoses.errExpectingQPair)}else if(h<31&&h!==9||h===127){s(D.diagnoses.deprecatedQP)}n.prev=n.now;n.now=n.stack.pop();y="\\"+y;switch(n.now){case D.components.contextComment:break;case D.components.contextQuotedString:u.local+=y;c.locals[f]+=y;d+=2;break;case D.components.literal:u.domain+=y;c.domains[f]+=y;d+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+n.now)}break;case D.components.contextComment:switch(y){case"(":n.stack.push(n.now);n.now=D.components.contextComment;break;case")":n.prev=n.now;n.now=n.stack.pop();break;case"\\":n.stack.push(n.now);n.now=D.components.contextQuotedPair;break;case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF);break}case" ":case"\t":s(D.diagnoses.cfwsFWS);n.stack.push(n.now);n.now=D.components.contextFWS;l=y;break;default:h=y.charCodeAt(0);if(h>127||h===0||h===10){s(D.diagnoses.errExpectingCTEXT);break}else if(h<32||h===127){s(D.diagnoses.deprecatedCTEXT)}}break;case D.components.contextFWS:if(l==="\r"){if(y==="\r"){s(D.diagnoses.errFWSCRLFx2);break}if(++p>1){s(D.diagnoses.deprecatedFWS)}else{p=1}}switch(y){case"\r":if(g===++b||e[b]!=="\n"){s(D.diagnoses.errCRNoLF)}break;case" ":case"\t":break;default:if(l==="\r"){s(D.diagnoses.errFWSCRLFEnd)}p=0;n.prev=n.now;n.now=n.stack.pop();--b}l=y;break;default:throw new Error("unknown context: "+n.now)}if(a>D.categories.rfc5322){break}}if(a<D.categories.rfc5322){if(n.now===D.components.contextQuotedString){s(D.diagnoses.errUnclosedQuotedString)}else if(n.now===D.components.contextQuotedPair){s(D.diagnoses.errBackslashEnd)}else if(n.now===D.components.contextComment){s(D.diagnoses.errUnclosedComment)}else if(n.now===D.components.literal){s(D.diagnoses.errUnclosedDomainLiteral)}else if(y==="\r"){s(D.diagnoses.errFWSCRLFEnd)}else if(u.domain.length===0){s(D.diagnoses.errNoDomain)}else if(d===0){s(D.diagnoses.errDotEnd)}else if(m){s(D.diagnoses.errDomainHyphenEnd)}else if(u.domain.length>255){s(D.diagnoses.rfc5322DomainTooLong)}else if(u.local.length+u.domain.length+1>254){s(D.diagnoses.rfc5322TooLong)}else if(d>63){s(D.diagnoses.rfc5322LabelTooLong)}else if(t.minDomainAtoms&&c.domains.length<t.minDomainAtoms){s(D.diagnoses.errDomainTooShort)}else if(t.tldWhitelist||t.tldBlacklist){var k=c.domains[f];if(!D.validDomain(k,t)){s(D.diagnoses.errUnknownTLD)}}}var T=false;var P=false;var O=function e(){if(!T&&a<D.categories.dnsWarn){var t=c.domains[f].charCodeAt(0);if(t<=57){s(D.diagnoses.rfc5321TLDNumeric)}else if(f===0){s(D.diagnoses.rfc5321TLD)}}if(a<o){a=D.diagnoses.valid}var n=i?a:a<D.defaultThreshold;if(r){if(P){r(n)}else{D.defer(r.bind(null,n))}}return n};if(t.checkDNS&&a<D.categories.dnsWarn){if(f===0){u.domain+="."}var $=u.domain;I.resolveMx($,function(e,t){if(e&&e.code!==I.NODATA){s(D.diagnoses.dnsWarnNoRecord);return O()}if(t&&t.length){T=true;return O()}var r=3;var i=false;s(D.diagnoses.dnsWarnNoMXRecord);var n=function e(t,n){if(i){return}--r;if(n&&n.length){i=true;return O()}if(r===0){s(D.diagnoses.dnsWarnNoRecord);i=true;O()}};I.resolveCname($,n);I.resolve4($,n);I.resolve6($,n)});P=true}else{var F=O();P=true;return F}};n.diagnoses=D.validate.diagnoses=function(){var e={};var t=Object.keys(D.diagnoses);for(var n=0;n<t.length;++n){var r=t[n];e[r]=D.diagnoses[r]}return e}()}).call(this,t("_process"))},{_process:100,dns:84}],98:[function(e,t,n){(function(d){"use strict";var s={},a={},l={},u;function p(e,t,n){var r=this,i,o,a;t=t||{};a=d.extend(true,{async:true,overwriteCache:false,complete:null,success:null,error:function e(){d(this).each(function(){d(this).html(a.errorMessage)})},errorMessage:"There was an error loading the template.",paged:false,pageNo:1,elemPerPage:10,append:false,prepend:false,beforeInsert:null,afterInsert:null,bindingOptions:{ignoreUndefined:false,ignoreNull:false,ignoreEmptyString:false}},n);if(d.type(t)==="array"){u=true;return f.call(this,e,t,a)}if(!c(e)){i=d(e);if(typeof e==="string"&&e.indexOf("#")===0){a.isFile=false}}o=a.isFile||typeof a.isFile==="undefined"&&(typeof i==="undefined"||i.length===0);if(o&&!a.overwriteCache&&s[e]){m(e,r,t,a)}else if(o&&!a.overwriteCache&&s.hasOwnProperty(e)){h(e,r,t,a)}else if(o){g(e,r,t,a)}else{y(i,r,t,a)}return this}function e(e,t){if(t){l[e]=t}else{l=d.extend(l,e)}}function c(e){return typeof e==="string"&&e.indexOf("/")>-1}function f(e,t,n){n=n||{};var r=this,i=t.length,o=n.prepend&&!n.append,a=0,s=0,l=false,u=[],c;if(n.paged){var f=(n.pageNo-1)*n.elemPerPage;t=t.slice(f,f+n.elemPerPage);i=t.length}if(!n.append&&!n.prepend){r.html("")}c=d.extend({},n,{append:!n.prepend&&true,complete:function e(t){a++;if(a===i||l){if(l&&n&&typeof n.error==="function"){n.error.call(r,u)}if(n&&typeof n.complete==="function"){n.complete()}}},success:function e(){s++;if(s===i){if(n&&typeof n.success==="function"){n.success()}}},error:function e(t){l=true;u.push(t)}});if(o)t.reverse();d(t).each(function(){p.call(r,e,this,c);if(l){return false}});return this}function h(e,t,n,r){if(a[e]){a[e].push({data:n,selection:t,settings:r})}else{a[e]=[{data:n,selection:t,settings:r}]}}function m(e,t,n,r){var i=s[e].clone();b.call(t,i,n,r);if(typeof r.success==="function"){r.success()}}function t(){return(new Date).getTime()}function v(e){if(e.indexOf("?")!==-1){return e+"&_="+t()}else{return e+"?_="+t()}}function g(n,r,i,o){s[n]=null;var e=n;if(o.overwriteCache){e=v(e)}d.ajax({url:e,async:o.async,success:function e(t){_(d(t),n,r,i,o)},error:function e(t){w(n,r,i,o,t)}})}function y(e,t,n,r){if(e.is("script")||e.is("template")){e=d.parseHTML(d.trim(e.html()))}b.call(t,e,n,r);if(typeof r.success==="function"){r.success()}}function b(n,t,r){var n=d("<div/>").append(n);i(n,t,r);d(this).each(function(){var e=n.children().clone(true);d("select",e).each(function(e,t){d(this).val(d("select",n).eq(e).val())});if(r.beforeInsert){r.beforeInsert(e,t)}if(r.append){d(this).append(e)}else if(r.prepend){d(this).prepend(e)}else{d(this).html("").append(e)}if(r.afterInsert){r.afterInsert(e,t)}});if(typeof r.complete==="function"){r.complete.call(d(this),t)}}function w(e,t,n,r,i){var o;if(typeof r.error==="function"){r.error.call(t,i)}d(a[e]).each(function(e,t){if(typeof t.settings.error==="function"){t.settings.error.call(t.selection,i)}});if(typeof r.complete==="function"){r.complete.call(t)}while(a[e]&&(o=a[e].shift())){if(typeof o.settings.complete==="function"){o.settings.complete.call(o.selection)}}if(typeof a[e]!=="undefined"&&a[e].length>0){a[e]=[]}}function _(e,t,n,r,i){var o;s[t]=e.clone();b.call(n,e,r,i);if(typeof i.success==="function"){i.success.call(n)}while(a[t]&&(o=a[t].shift())){b.call(o.selection,s[t].clone(),o.data,o.settings);if(typeof o.settings.success==="function"){o.settings.success.call(o.selection)}}}function i(e,t,r){t=t||{};n("data-content",e,t,r,function(e,t){e.html(k(e,t,"content",r))});n("data-content-append",e,t,r,function(e,t){e.append(k(e,t,"content",r))});n("data-content-prepend",e,t,r,function(e,t){e.prepend(k(e,t,"content",r))});n("data-content-text",e,t,r,function(e,t){e.text(k(e,t,"content",r))});n("data-innerHTML",e,t,r,function(e,t){e.html(k(e,t,"content",r))});n("data-src",e,t,r,function(e,t){e.attr("src",k(e,t,"src",r))},function(e){e.remove()});n("data-href",e,t,r,function(e,t){e.attr("href",k(e,t,"href",r))},function(e){e.remove()});n("data-alt",e,t,r,function(e,t){e.attr("alt",k(e,t,"alt",r))});n("data-id",e,t,r,function(e,t){e.attr("id",k(e,t,"id",r))});n("data-class",e,t,r,function(e,t){e.addClass(k(e,t,"class",r))});n("data-link",e,t,r,function(e,t){var n=d("<a/>");n.attr("href",k(e,t,"link",r));n.html(e.html());e.html(n)});n("data-link-wrap",e,t,r,function(e,t){var n=d("<a/>");n.attr("href",k(e,t,"link-wrap",r));e.wrap(n)});n("data-options",e,t,r,function(t,e){d(e).each(function(){var e=d("<option/>");e.attr("value",this).text(this).appendTo(t)})});x(e,t,r);n("data-value",e,t,r,function(e,t){e.val(k(e,t,"value",r))})}function n(r,e,i,o,a,s){d("["+r+"]",e).each(function(){var e=d(this),t=e.attr(r),n=C(i,t);if(!S(e,n,o)){e.remove();return}e.removeAttr(r);if(typeof n!=="undefined"&&a){a(e,n)}else if(s){s(e)}});return}function S(e,t,n){var r=o(e,n);if(r.ignoreUndefined&&typeof t==="undefined"){return false}else if(r.ignoreNull&&t===null){return false}else if(r.ignoreEmptyString&&t===""){return false}else{return true}}function o(e,t){var n={};if(e instanceof jQuery&&e.attr("data-binding-options")){n=d.parseJSON(e.attr("data-binding-options"));e.removeAttr("data-binding-options")}else if((typeof e==="undefined"?"undefined":_typeof2(e))==="object"&&e.hasOwnProperty("bindingOptions")){n=e.bindingOptions}return d.extend({},t.bindingOptions,n)}function x(e,r,i){d("[data-template-bind]",e).each(function(){var n=d(this),e=d.parseJSON(n.attr("data-template-bind"));n.removeAttr("data-template-bind");d(e).each(function(){var e;if(_typeof2(this.value)==="object"){e=C(r,this.value.data)}else{e=C(r,this.value)}if(this.attribute){if(!S(this,e,i)){n.remove();return}switch(this.attribute){case"content":case"innerHTML":n.html(E(n,e,this));break;case"contentAppend":n.append(E(n,e,this));break;case"contentPrepend":n.prepend(E(n,e,this));break;case"contentText":n.text(E(n,e,this));break;case"options":var t=this;d(e).each(function(){var e=d("<option/>");e.attr("value",this[t.value.value]).text(E(n,this[t.value.content],t)).attr("selected",_typeof2(this[t.value.selected])==undefined?false:this[t.value.selected]).appendTo(n)});break;default:n.attr(this.attribute,E(n,e,this))}}})})}function E(t,n,r,e){if(r.formatter&&l[r.formatter]){return function(e){return l[r.formatter].call(t,n,r.formatOptions,e)}(e)}return n}function C(e,t){if(t==="this"){return e}var n=t.split("."),r,i=e;while((r=n.shift())&&typeof i!=="undefined"&&i!=null){i=i[r]}return i}function k(t,n,e,r){var i=t.attr("data-format-target"),o;if(i===e||!i&&e==="content"){o=t.attr("data-format");if(o&&typeof l[o]==="function"){var a=t.attr("data-format-options");return function(e){return l[o].call(t[0],n,a,d.extend({},e))}(r)}}return n}e("nestedTemplateFormatter",function(e,t,n){if(!t){return}if(typeof t==="string"&&t[0]==="{"){t=d.parseJSON(t)}var r=t.parentElement||"div";var i=t.template||t;if(t.parentElement)return d("<"+r+"/>").loadTemplate(i,e,n);else return d("<"+r+"/>").loadTemplate(i,e,n).children()});d.fn.loadTemplate=p;d.addTemplateFormatter=e})(jQuery)},{}],99:[function(e,t,n){(function(){var l,n,r,e,i,u,t;e=function e(t,n){var r,i,o;i=[];for(r in n.prototype){try{o=n.prototype[r],null==t[r]&&"function"!=typeof o?i.push(t[r]=o):i.push(void 0)}catch(e){e}}return i},l={},l.options=window.Offline?window.Offline.options||{}:{},r={checks:{xhr:{url:function e(){return"/favicon.ico?_="+(new Date).getTime()},timeout:5e3,type:"HEAD"},image:{url:function e(){return"/favicon.ico?_="+(new Date).getTime()}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0,deDupBody:!1},i=function e(t,n){var r,i,o,a,s,l;for(r=t,l=n.split("."),i=o=0,a=l.length;o<a&&(s=l[i],"object"==_typeof2(r=r[s]));i=++o){}return i===l.length-1?r:void 0},l.getOption=function(e){var t,n;return n=null!=(t=i(l.options,e))?t:i(r,e),"function"==typeof n?n():n},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(l.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return l.confirmDown()},!1),l.state="up",l.markUp=function(){if(l.trigger("confirmed-up"),"up"!==l.state)return l.state="up",l.trigger("up")},l.markDown=function(){if(l.trigger("confirmed-down"),"down"!==l.state)return l.state="down",l.trigger("down")},u={},l.on=function(e,t,n){var r,i,o,a,s;if(i=e.split(" "),i.length>1){for(s=[],o=0,a=i.length;o<a;o++){r=i[o],s.push(l.on(r,t,n))}return s}return null==u[e]&&(u[e]=[]),u[e].push([n,t])},l.off=function(e,t){var n,r,i,o;if(null!=u[e]){if(t){for(r=0,o=[];r<u[e].length;){i=u[e][r],i[0],n=i[1],n===t?o.push(u[e].splice(r,1)):o.push(r++)}return o}return u[e]=[]}},l.trigger=function(e){var t,n,r,i,o,a,s;if(null!=u[e]){for(o=u[e].slice(0),s=[],r=0,i=o.length;r<i;r++){a=o[r],t=a[0],n=a[1],s.push(n.call(t))}return s}},n=function e(t,n,r){var i,o,a,s,l;return l=function e(){return t.status&&t.status<12e3?n():r()},null===t.onprogress?(i=t.onerror,t.onerror=function(){return r(),"function"==typeof i?i.apply(null,arguments):void 0},s=t.ontimeout,t.ontimeout=function(){return r(),"function"==typeof s?s.apply(null,arguments):void 0},o=t.onload,t.onload=function(){return l(),"function"==typeof o?o.apply(null,arguments):void 0}):(a=t.onreadystatechange,t.onreadystatechange=function(){return 4===t.readyState?l():0===t.readyState&&r(),"function"==typeof a?a.apply(null,arguments):void 0})},l.checks={},l.checks.xhr=function(){var e;e=new XMLHttpRequest,e.offline=!1,e.open(l.getOption("checks.xhr.type"),l.getOption("checks.xhr.url"),!0),null!=e.timeout&&(e.timeout=l.getOption("checks.xhr.timeout")),n(e,l.markUp,l.markDown);try{e.send()}catch(e){e,l.markDown()}return e},l.checks.image=function(){var e;e=document.createElement("img"),e.onerror=l.markDown,e.onload=l.markUp,e.src=l.getOption("checks.image.url")},l.checks.down=l.markDown,l.checks.up=l.markUp,l.check=function(){return l.trigger("checking"),l.checks[l.getOption("checks.active")]()},l.confirmUp=l.confirmDown=l.check,l.onXHR=function(l){var t,i,o;if(o=function e(o,a){var s;return s=o.open,o.open=function(e,t,n,r,i){return l({type:e,url:t,async:n,flags:a,user:r,password:i,xhr:o}),s.apply(o,arguments)}},i=window.XMLHttpRequest,window.XMLHttpRequest=function(e){var t,n,r;return r=new i(e),o(r,e),n=r.setRequestHeader,r.headers={},r.setRequestHeader=function(e,t){return r.headers[e]=t,n.call(r,e,t)},t=r.overrideMimeType,r.overrideMimeType=function(e){return r.mimeType=e,t.call(r,e)},r},e(window.XMLHttpRequest,i),null!=window.XDomainRequest)return t=window.XDomainRequest,window.XDomainRequest=function(){var e;return e=new t,o(e),e},e(window.XDomainRequest,t)},t=function e(){if(l.getOption("interceptRequests")&&l.onXHR(function(e){var t;if(t=e.xhr,!1!==t.offline)return n(t,l.markUp,l.confirmDown)}),l.getOption("checkOnLoad"))return l.check()},setTimeout(t,0),window.Offline=l}).call(this),function(){var e,t,n,r,i,o,a,s,l;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");r=Offline.reconnect={},o=null,i=function e(){var t;return null!=r.state&&"inactive"!==r.state&&Offline.trigger("reconnect:stopped"),r.state="inactive",r.remaining=r.delay=null!=(t=Offline.getOption("reconnect.initialDelay"))?t:3},t=function e(){var t,n;return t=null!=(n=Offline.getOption("reconnect.delay"))?n:Math.min(Math.ceil(1.5*r.delay),3600),r.remaining=r.delay=t},a=function e(){if("connecting"!==r.state)return r.remaining-=1,Offline.trigger("reconnect:tick"),0===r.remaining?s():void 0},s=function e(){if("waiting"===r.state)return Offline.trigger("reconnect:connecting"),r.state="connecting",Offline.check()},e=function e(){if(Offline.getOption("reconnect"))return i(),r.state="waiting",Offline.trigger("reconnect:started"),o=setInterval(a,1e3)},l=function e(){return null!=o&&clearInterval(o),i()},n=function e(){if(Offline.getOption("reconnect"))return"connecting"===r.state?(Offline.trigger("reconnect:failure"),r.state="waiting",t()):void 0},r.tryNow=s,i(),Offline.on("down",e),Offline.on("confirmed-down",n),Offline.on("up",l)}.call(this),function(){var l,e,u,a,c,n;if(!window.Offline)throw new Error("Requests module brought in without offline.js");u=[],n=!1,a=function e(t){if(!1!==Offline.getOption("requests"))return Offline.trigger("requests:capture"),"down"!==Offline.state&&(n=!0),u.push(t)},c=function e(t){var n,r,i,o,a,s,l,u,c;if(c=t.xhr,s=t.url,a=t.type,l=t.user,i=t.password,n=t.body,!1!==Offline.getOption("requests")){c.abort(),c.open(a,s,!0,l,i),o=c.headers;for(r in o){u=o[r],c.setRequestHeader(r,u)}return c.mimeType&&c.overrideMimeType(c.mimeType),c.send(n)}},l=function e(){return u=[]},e=function e(){var t,n,r,i,o,a,s;if(!1!==Offline.getOption("requests")){for(Offline.trigger("requests:flush"),a={},n=0,i=u.length;n<i;n++){o=u[n],s=o.url.replace(/(\?|&)_=[0-9]+/,function(e,t){return"?"===t?t:""}),Offline.getOption("deDupBody")?(t=o.body,t="[object Object]"===t.toString()?JSON.stringify(t):t.toString(),a[o.type.toUpperCase()+" - "+s+" - "+t]=o):a[o.type.toUpperCase()+" - "+s]=o}for(r in a){o=a[r],c(o)}return l()}},setTimeout(function(){if(!1!==Offline.getOption("requests"))return Offline.on("confirmed-up",function(){if(n)return n=!1,l()}),Offline.on("up",e),Offline.on("down",function(){return n=!1}),Offline.onXHR(function(t){var e,n,r,i,o;if(o=t.xhr,r=t.async,!1!==o.offline&&(i=function e(){return a(t)},n=o.send,o.send=function(e){return t.body=e,n.apply(o,arguments)},r))return null===o.onprogress?(o.addEventListener("error",i,!1),o.addEventListener("timeout",i,!1)):(e=o.onreadystatechange,o.onreadystatechange=function(){return 0===o.readyState?i():4===o.readyState&&(0===o.status||o.status>=12e3)&&i(),"function"==typeof e?e.apply(null,arguments):void 0})}),Offline.requests={flush:e,clear:l}},0)}.call(this),function(){var e,t,n,r,i,o;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(r=["up","down"],t=0,n=r.length;t<n;t++){o=r[t];try{i=document.querySelector("script[data-simulate='"+o+"']")||("undefined"!=typeof localStorage&&null!==localStorage?localStorage.OFFLINE_SIMULATE:void 0)===o}catch(e){e,i=!1}}i&&(null==Offline.options&&(Offline.options={}),null==(e=Offline.options).checks&&(e.checks={}),Offline.options.checks.active=o)}.call(this),function(){var r,i,e,o,a,s,l,t,u,n,c,f,d;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");i='<div class="offline-ui"><div class="offline-ui-content"></div></div>',r='<a href class="offline-ui-retry"></a>',s=function e(t){var n;return n=document.createElement("div"),n.innerHTML=t,n.children[0]},l=a=null,o=function e(t){return c(t),l.className+=" "+t},c=function e(t){return l.className=l.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},u={},t=function e(t,n){return o(t),null!=u[t]&&clearTimeout(u[t]),u[t]=setTimeout(function(){return c(t),delete u[t]},1e3*n)},d=function e(t){var n,r,i,o;i={day:86400,hour:3600,minute:60,second:1};for(r in i){if(n=i[r],t>=n)return o=Math.floor(t/n),[o,r]}return["now",""]},f=function e(){var t,n;return l=s(i),document.body.appendChild(l),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(l.appendChild(s(r)),t=l.querySelector(".offline-ui-retry"),n=function e(t){return t.preventDefault(),Offline.reconnect.tryNow()},null!=t.addEventListener?t.addEventListener("click",n,!1):t.attachEvent("click",n)),o("offline-ui-"+Offline.state),a=l.querySelector(".offline-ui-content")},n=function e(){return f(),Offline.on("up",function(){return c("offline-ui-down"),o("offline-ui-up"),t("offline-ui-up-2s",2),t("offline-ui-up-5s",5)}),Offline.on("down",function(){return c("offline-ui-up"),o("offline-ui-down"),t("offline-ui-down-2s",2),t("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return o("offline-ui-connecting"),c("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){var e,t,n;return o("offline-ui-waiting"),c("offline-ui-connecting"),e=d(Offline.reconnect.remaining),t=e[0],n=e[1],a.setAttribute("data-retry-in-value",t),a.setAttribute("data-retry-in-unit",n)}),Offline.on("reconnect:stopped",function(){return c("offline-ui-connecting offline-ui-waiting"),a.setAttribute("data-retry-in-value",null),a.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){return t("offline-ui-reconnect-failed-2s",2),t("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return t("offline-ui-reconnect-succeeded-2s",2),t("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?n():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",n,!1):(e=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&n(),"function"==typeof e?e.apply(null,arguments):void 0})}.call(this)},{}],100:[function(e,t,n){var r=t.exports={};var i;var o;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=a}}catch(e){i=a}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=s}}catch(e){o=s}})();function l(t){if(i===setTimeout){return setTimeout(t,0)}if((i===a||!i)&&setTimeout){i=setTimeout;return setTimeout(t,0)}try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}function u(t){if(o===clearTimeout){return clearTimeout(t)}if((o===s||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(t)}try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}var c=[];var f=false;var d;var p=-1;function h(){if(!f||!d){return}f=false;if(d.length){c=d.concat(c)}else{p=-1}if(c.length){m()}}function m(){if(f){return}var e=l(h);f=true;var t=c.length;while(t){d=c;c=[];while(++p<t){if(d){d[p].run()}}p=-1;t=c.length}d=null;f=false;u(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}c.push(new v(e,t));if(c.length===1&&!f){l(m)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],101:[function(e,t,n){"use strict";t.exports=e("./lib")},{"./lib":106}],102:[function(e,t,n){"use strict";var i=e("asap/raw");function a(){}var o=null;var s={};function r(e){try{return e.then}catch(e){o=e;return s}}function l(e,t){try{return e(t)}catch(e){o=e;return s}}function u(e,t,n){try{e(t,n)}catch(e){o=e;return s}}t.exports=c;function c(e){if(_typeof2(this)!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._45=0;this._81=0;this._65=null;this._54=null;if(e===a)return;y(e,this)}c._10=null;c._97=null;c._61=a;c.prototype.then=function(e,t){if(this.constructor!==c){return f(this,e,t)}var n=new c(a);d(this,new g(e,t,n));return n};function f(r,i,o){return new r.constructor(function(e,t){var n=new c(a);n.then(e,t);d(r,new g(i,o,n))})}function d(e,t){while(e._81===3){e=e._65}if(c._10){c._10(e)}if(e._81===0){if(e._45===0){e._45=1;e._54=t;return}if(e._45===1){e._45=2;e._54=[e._54,t];return}e._54.push(t);return}p(e,t)}function p(n,r){i(function(){var e=n._81===1?r.onFulfilled:r.onRejected;if(e===null){if(n._81===1){h(r.promise,n._65)}else{m(r.promise,n._65)}return}var t=l(e,n._65);if(t===s){m(r.promise,o)}else{h(r.promise,t)}})}function h(e,t){if(t===e){return m(e,new TypeError("A promise cannot be resolved with itself."))}if(t&&((typeof t==="undefined"?"undefined":_typeof2(t))==="object"||typeof t==="function")){var n=r(t);if(n===s){return m(e,o)}if(n===e.then&&t instanceof c){e._81=3;e._65=t;v(e);return}else if(typeof n==="function"){y(n.bind(t),e);return}}e._81=1;e._65=t;v(e)}function m(e,t){e._81=2;e._65=t;if(c._97){c._97(e,t)}v(e)}function v(e){if(e._45===1){d(e,e._54);e._54=null}if(e._45===2){for(var t=0;t<e._54.length;t++){d(e,e._54[t])}e._54=null}}function g(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function y(e,t){var n=false;var r=u(e,function(e){if(n)return;n=true;h(t,e)},function(e){if(n)return;n=true;m(t,e)});if(!n&&r===s){n=true;m(t,o)}}},{"asap/raw":82}],103:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r;r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":102}],104:[function(e,t,n){"use strict";var u=e("./core.js");t.exports=u;var r=c(true);var i=c(false);var o=c(null);var a=c(undefined);var s=c(0);var l=c("");function c(e){var t=new u(u._61);t._81=1;t._65=e;return t}u.resolve=function(e){if(e instanceof u)return e;if(e===null)return o;if(e===undefined)return a;if(e===true)return r;if(e===false)return i;if(e===0)return s;if(e==="")return l;if((typeof e==="undefined"?"undefined":_typeof2(e))==="object"||typeof e==="function"){try{var t=e.then;if(typeof t==="function"){return new u(t.bind(e))}}catch(n){return new u(function(e,t){t(n)})}}return c(e)};u.all=function(e){var l=Array.prototype.slice.call(e);return new u(function(i,o){if(l.length===0)return i([]);var a=l.length;function s(t,e){if(e&&((typeof e==="undefined"?"undefined":_typeof2(e))==="object"||typeof e==="function")){if(e instanceof u&&e.then===u.prototype.then){while(e._81===3){e=e._65}if(e._81===1)return s(t,e._65);if(e._81===2)o(e._65);e.then(function(e){s(t,e)},o);return}else{var n=e.then;if(typeof n==="function"){var r=new u(n.bind(e));r.then(function(e){s(t,e)},o);return}}}l[t]=e;if(--a===0){i(l)}}for(var e=0;e<l.length;e++){s(e,l[e])}})};u.reject=function(n){return new u(function(e,t){t(n)})};u.race=function(e){return new u(function(t,n){e.forEach(function(e){u.resolve(e).then(t,n)})})};u.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":102}],105:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r;r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},{"./core.js":102}],106:[function(e,t,n){"use strict";t.exports=e("./core.js");e("./done.js");e("./finally.js");e("./es6-extensions.js");e("./node-extensions.js");e("./synchronous.js")},{"./core.js":102,"./done.js":103,"./es6-extensions.js":104,"./finally.js":105,"./node-extensions.js":107,"./synchronous.js":108}],107:[function(e,t,n){"use strict";var o=e("./core.js");var i=e("asap");t.exports=o;o.denodeify=function(e,t){if(typeof t==="number"&&t!==Infinity){return r(e,t)}else{return s(e)}};var a="function (err, res) {"+"if (err) { rj(err); } else { rs(res); }"+"}";function r(e,t){var n=[];for(var r=0;r<t;r++){n.push("a"+r)}var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function s(e){var t=Math.max(e.length-1,3);var n=[];for(var r=0;r<t;r++){n.push("a"+r)}var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":"+"res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");"+"break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}o.nodeify=function(n){return function(){var e=Array.prototype.slice.call(arguments);var t=typeof e[e.length-1]==="function"?e.pop():null;var r=this;try{return n.apply(this,arguments).nodeify(t,r)}catch(n){if(t===null||typeof t=="undefined"){return new o(function(e,t){t(n)})}else{i(function(){t.call(r,n)})}}}};o.prototype.nodeify=function(t,n){if(typeof t!="function")return this;this.then(function(e){i(function(){t.call(n,null,e)})},function(e){i(function(){t.call(n,e)})})}},{"./core.js":102,asap:81}],108:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r;r.enableSynchronous=function(){r.prototype.isPending=function(){return this.getState()==0};r.prototype.isFulfilled=function(){return this.getState()==1};r.prototype.isRejected=function(){return this.getState()==2};r.prototype.getValue=function(){if(this._81===3){return this._65.getValue()}if(!this.isFulfilled()){throw new Error("Cannot get a value of an unfulfilled promise.")}return this._65};r.prototype.getReason=function(){if(this._81===3){return this._65.getReason()}if(!this.isRejected()){throw new Error("Cannot get a rejection reason of a non-rejected promise.")}return this._65};r.prototype.getState=function(){if(this._81===3){return this._65.getState()}if(this._81===-1||this._81===-2){return 0}return this._81}};r.disableSynchronous=function(){r.prototype.isPending=undefined;r.prototype.isFulfilled=undefined;r.prototype.isRejected=undefined;r.prototype.getValue=undefined;r.prototype.getReason=undefined;r.prototype.getState=undefined}},{"./core.js":102}],109:[function(e,t,n){function r(e){this.name="RavenConfigError";this.message=e}r.prototype=new Error;r.prototype.constructor=r;t.exports=r},{}],110:[function(e,t,n){var l=e("./utils");var r=function e(t,r,i){var o=t[r];var a=t;if(!(r in t)){return}var s=r==="warn"?"warning":r;t[r]=function(){var e=[].slice.call(arguments);var t=l.safeJoin(e," ");var n={level:s,logger:"console",extra:{arguments:e}};if(r==="assert"){if(e[0]===false){t="Assertion failed: "+(l.safeJoin(e.slice(1)," ")||"console.assert");n.extra.arguments=e.slice(1);i&&i(t,n)}}else{i&&i(t,n)}if(o){Function.prototype.apply.call(o,a,e)}}};t.exports={wrapMethod:r}},{"./utils":113}],111:[function(U,L,e){(function(e){var u=U("../vendor/TraceKit/tracekit");var c=U("../vendor/json-stringify-safe/stringify");var f=U("./configError");var t=U("./utils");var s=t.isError;var l=t.isObject;var d=t.isErrorEvent;var p=t.isUndefined;var h=t.isFunction;var m=t.isString;var v=t.isArray;var o=t.isEmptyObject;var g=t.each;var y=t.objectMerge;var b=t.truncate;var w=t.objectFrozen;var _=t.hasKey;var S=t.joinRegExp;var x=t.urlencode;var n=t.uuid4;var i=t.htmlTreeAsString;var r=t.isSameException;var a=t.isSameStacktrace;var E=t.parseUrl;var C=t.fill;var k=t.supportsFetch;var T=t.supportsReferrerPolicy;var P=U("./console").wrapMethod;var O="source protocol user pass host port path".split(" "),$=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function F(){return+new Date}var I=typeof window!=="undefined"?window:typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};var D=I.document;var j=I.navigator;function A(t,n){return h(n)?function(e){return n(e,t)}:n}function B(){this._hasJSON=!!((typeof JSON==="undefined"?"undefined":_typeof2(JSON))==="object"&&JSON.stringify);this._hasDocument=!p(D);this._hasNavigator=!p(j);this._lastCapturedException=null;this._lastData=null;this._lastEventId=null;this._globalServer=null;this._globalKey=null;this._globalProject=null;this._globalContext={};this._globalOptions={release:I.SENTRY_RELEASE&&I.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:true,captureUnhandledRejections:true,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:true,instrument:true,sampleRate:1};this._fetchDefaults={method:"POST",keepalive:true,referrerPolicy:T()?"origin":""};this._ignoreOnError=0;this._isRavenInstalled=false;this._originalErrorStackTraceLimit=Error.stackTraceLimit;this._originalConsole=I.console||{};this._originalConsoleMethods={};this._plugins=[];this._startTime=F();this._wrappedBuiltIns=[];this._breadcrumbs=[];this._lastCapturedEvent=null;this._keypressTimeout;this._location=I.location;this._lastHref=this._location&&this._location.href;this._resetBackoff();for(var e in this._originalConsole){this._originalConsoleMethods[e]=this._originalConsole[e]}}B.prototype={VERSION:"3.23.1",debug:false,TraceKit:u,config:function e(t,n){var r=this;if(r._globalServer){this._logDebug("error","Error: Raven has already been configured");return r}if(!t)return r;var i=r._globalOptions;if(n){g(n,function(e,t){if(e==="tags"||e==="extra"||e==="user"){r._globalContext[e]=t}else{i[e]=t}})}r.setDSN(t);i.ignoreErrors.push(/^Script error\.?$/);i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/);i.ignoreErrors=S(i.ignoreErrors);i.ignoreUrls=i.ignoreUrls.length?S(i.ignoreUrls):false;i.whitelistUrls=i.whitelistUrls.length?S(i.whitelistUrls):false;i.includePaths=S(i.includePaths);i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var o={xhr:true,console:true,dom:true,location:true,sentry:true};var a=i.autoBreadcrumbs;if({}.toString.call(a)==="[object Object]"){a=y(o,a)}else if(a!==false){a=o}i.autoBreadcrumbs=a;var s={tryCatch:true};var l=i.instrument;if({}.toString.call(l)==="[object Object]"){l=y(s,l)}else if(l!==false){l=s}i.instrument=l;u.collectWindowErrors=!!i.collectWindowErrors;return r},install:function e(){var t=this;if(t.isSetup()&&!t._isRavenInstalled){u.report.subscribe(function(){t._handleOnErrorStackInfo.apply(t,arguments)});if(t._globalOptions.captureUnhandledRejections){t._attachPromiseRejectionHandler()}t._patchFunctionToString();if(t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch){t._instrumentTryCatch()}if(t._globalOptions.autoBreadcrumbs)t._instrumentBreadcrumbs();t._drainPlugins();t._isRavenInstalled=true}Error.stackTraceLimit=t._globalOptions.stackTraceLimit;return this},setDSN:function e(t){var n=this,r=n._parseDSN(t),i=r.path.lastIndexOf("/"),o=r.path.substr(1,i);n._dsn=t;n._globalKey=r.user;n._globalSecret=r.pass&&r.pass.substr(1);n._globalProject=r.path.substr(i+1);n._globalServer=n._getGlobalServer(r);n._globalEndpoint=n._globalServer+"/"+o+"api/"+n._globalProject+"/store/";this._resetBackoff()},context:function e(t,n,r){if(h(t)){r=n||[];n=t;t=undefined}return this.wrap(t,n).apply(this,r)},wrap:function e(r,i,o){var a=this;if(p(i)&&!h(r)){return r}if(h(r)){i=r;r=undefined}if(!h(i)){return i}try{if(i.__raven__){return i}if(i.__raven_wrapper__){return i.__raven_wrapper__}}catch(e){return i}function t(){var e=[],t=arguments.length,n=!r||r&&r.deep!==false;if(o&&h(o)){o.apply(this,arguments)}while(t--){e[t]=n?a.wrap(r,arguments[t]):arguments[t]}try{return i.apply(this,e)}catch(e){a._ignoreNextOnError();a.captureException(e,r);throw e}}for(var n in i){if(_(i,n)){t[n]=i[n]}}t.prototype=i.prototype;i.__raven_wrapper__=t;t.__raven__=true;t.__orig__=i;return t},uninstall:function e(){u.report.uninstall();this._detachPromiseRejectionHandler();this._unpatchFunctionToString();this._restoreBuiltIns();this._restoreConsole();Error.stackTraceLimit=this._originalErrorStackTraceLimit;this._isRavenInstalled=false;return this},_promiseRejectionHandler:function e(t){this._logDebug("debug","Raven caught unhandled promise rejection:",t);this.captureException(t.reason)},_attachPromiseRejectionHandler:function e(){this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this);I.addEventListener&&I.addEventListener("unhandledrejection",this._promiseRejectionHandler);return this},_detachPromiseRejectionHandler:function e(){I.removeEventListener&&I.removeEventListener("unhandledrejection",this._promiseRejectionHandler);return this},captureException:function e(t,n){n=y({trimHeadFrames:0},n?n:{});var r=!s(t);var i=!d(t);var o=d(t)&&!t.error;if(r&&i||o){return this.captureMessage(t,y(n,{stacktrace:true,trimHeadFrames:n.trimHeadFrames+1}))}if(d(t))t=t.error;this._lastCapturedException=t;try{var a=u.computeStackTrace(t);this._handleStackInfo(a,n)}catch(e){if(t!==e){throw e}}return this},captureMessage:function e(t,n){if(!!this._globalOptions.ignoreErrors.test&&this._globalOptions.ignoreErrors.test(t)){return}n=n||{};var r=y({message:t+""},n);var i;try{throw new Error(t)}catch(e){i=e}i.name=null;var o=u.computeStackTrace(i);var a=v(o.stack)&&o.stack[1];var s=a&&a.url||"";if(!!this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(s)){return}if(!!this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(s)){return}if(this._globalOptions.stacktrace||n&&n.stacktrace){n=y({fingerprint:t,trimHeadFrames:0},n);n.trimHeadFrames+=1;var l=this._prepareFrames(o,n);r.stacktrace={frames:l.reverse()}}this._send(r);return this},captureBreadcrumb:function e(t){var n=y({timestamp:F()/1e3},t);if(h(this._globalOptions.breadcrumbCallback)){var r=this._globalOptions.breadcrumbCallback(n);if(l(r)&&!o(r)){n=r}else if(r===false){return this}}this._breadcrumbs.push(n);if(this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs){this._breadcrumbs.shift()}return this},addPlugin:function e(t){var n=[].slice.call(arguments,1);this._plugins.push([t,n]);if(this._isRavenInstalled){this._drainPlugins()}return this},setUserContext:function e(t){this._globalContext.user=t;return this},setExtraContext:function e(t){this._mergeContext("extra",t);return this},setTagsContext:function e(t){this._mergeContext("tags",t);return this},clearContext:function e(){this._globalContext={};return this},getContext:function e(){return JSON.parse(c(this._globalContext))},setEnvironment:function e(t){this._globalOptions.environment=t;return this},setRelease:function e(t){this._globalOptions.release=t;return this},setDataCallback:function e(t){var n=this._globalOptions.dataCallback;this._globalOptions.dataCallback=A(n,t);return this},setBreadcrumbCallback:function e(t){var n=this._globalOptions.breadcrumbCallback;this._globalOptions.breadcrumbCallback=A(n,t);return this},setShouldSendCallback:function e(t){var n=this._globalOptions.shouldSendCallback;this._globalOptions.shouldSendCallback=A(n,t);return this},setTransport:function e(t){this._globalOptions.transport=t;return this},lastException:function e(){return this._lastCapturedException},lastEventId:function e(){return this._lastEventId},isSetup:function e(){if(!this._hasJSON)return false;if(!this._globalServer){if(!this.ravenNotConfiguredError){this.ravenNotConfiguredError=true;this._logDebug("error","Error: Raven has not been configured.")}return false}return true},afterLoad:function e(){var t=I.RavenConfig;if(t){this.config(t.dsn,t.config).install()}},showReportDialog:function e(t){if(!D)return;t=t||{};var n=t.eventId||this.lastEventId();if(!n){throw new f("Missing eventId")}var r=t.dsn||this._dsn;if(!r){throw new f("Missing DSN")}var i=encodeURIComponent;var o="";o+="?eventId="+i(n);o+="&dsn="+i(r);var a=t.user||this._globalContext.user;if(a){if(a.name)o+="&name="+i(a.name);if(a.email)o+="&email="+i(a.email)}var s=this._getGlobalServer(this._parseDSN(r));var l=D.createElement("script");l.async=true;l.src=s+"/api/embed/error-page/"+o;(D.head||D.body).appendChild(l)},_ignoreNextOnError:function e(){var t=this;this._ignoreOnError+=1;setTimeout(function(){t._ignoreOnError-=1})},_triggerEvent:function e(t,n){var r,i;if(!this._hasDocument)return;n=n||{};t="raven"+t.substr(0,1).toUpperCase()+t.substr(1);if(D.createEvent){r=D.createEvent("HTMLEvents");r.initEvent(t,true,true)}else{r=D.createEventObject();r.eventType=t}for(i in n){if(_(n,i)){r[i]=n[i]}}if(D.createEvent){D.dispatchEvent(r)}else{try{D.fireEvent("on"+r.eventType.toLowerCase(),r)}catch(e){}}},_breadcrumbEventHandler:function e(n){var r=this;return function(e){r._keypressTimeout=null;if(r._lastCapturedEvent===e)return;r._lastCapturedEvent=e;var t;try{t=i(e.target)}catch(e){t="<unknown>"}r.captureBreadcrumb({category:"ui."+n,message:t})}},_keypressEventHandler:function e(){var i=this,o=1e3;return function(e){var t;try{t=e.target}catch(e){return}var n=t&&t.tagName;if(!n||n!=="INPUT"&&n!=="TEXTAREA"&&!t.isContentEditable)return;var r=i._keypressTimeout;if(!r){i._breadcrumbEventHandler("input")(e)}clearTimeout(r);i._keypressTimeout=setTimeout(function(){i._keypressTimeout=null},o)}},_captureUrlChange:function e(t,n){var r=E(this._location.href);var i=E(n);var o=E(t);this._lastHref=n;if(r.protocol===i.protocol&&r.host===i.host)n=i.relative;if(r.protocol===o.protocol&&r.host===o.host)t=o.relative;this.captureBreadcrumb({category:"navigation",data:{to:n,from:t}})},_patchFunctionToString:function e(){var t=this;t._originalFunctionToString=Function.prototype.toString;Function.prototype.toString=function(){if(typeof this==="function"&&this.__raven__){return t._originalFunctionToString.apply(this.__orig__,arguments)}return t._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function e(){if(this._originalFunctionToString){Function.prototype.toString=this._originalFunctionToString}},_instrumentTryCatch:function e(){var u=this;var t=u._wrappedBuiltIns;function n(o){return function(e,t){var n=new Array(arguments.length);for(var r=0;r<n.length;++r){n[r]=arguments[r]}var i=n[0];if(h(i)){n[0]=u.wrap(i)}if(o.apply){return o.apply(this,n)}else{return o(n[0],n[1])}}}var c=this._globalOptions.autoBreadcrumbs;function r(l){var e=I[l]&&I[l].prototype;if(e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){C(e,"addEventListener",function(s){return function(e,t,n,r){try{if(t&&t.handleEvent){t.handleEvent=u.wrap(t.handleEvent)}}catch(e){}var i,o,a;if(c&&c.dom&&(l==="EventTarget"||l==="Node")){o=u._breadcrumbEventHandler("click");a=u._keypressEventHandler();i=function e(t){if(!t)return;var n;try{n=t.type}catch(e){return}if(n==="click")return o(t);else if(n==="keypress")return a(t)}}return s.call(this,e,u.wrap(t,undefined,i),n,r)}},t);C(e,"removeEventListener",function(i){return function(e,t,n,r){try{t=t&&(t.__raven_wrapper__?t.__raven_wrapper__:t)}catch(e){}return i.call(this,e,t,n,r)}},t)}}C(I,"setTimeout",n,t);C(I,"setInterval",n,t);if(I.requestAnimationFrame){C(I,"requestAnimationFrame",function(t){return function(e){return t(u.wrap(e))}},t)}var i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(var o=0;o<i.length;o++){r(i[o])}},_instrumentBreadcrumbs:function e(){var s=this;var t=this._globalOptions.autoBreadcrumbs;var n=s._wrappedBuiltIns;function o(e,t){if(e in t&&h(t[e])){C(t,e,function(e){return s.wrap(e)})}}if(t.xhr&&"XMLHttpRequest"in I){var r=XMLHttpRequest.prototype;C(r,"open",function(n){return function(e,t){if(m(t)&&t.indexOf(s._globalKey)===-1){this.__raven_xhr={method:e,url:t,status_code:null}}return n.apply(this,arguments)}},n);C(r,"send",function(i){return function(){var e=this;function t(){if(e.__raven_xhr&&e.readyState===4){try{e.__raven_xhr.status_code=e.status}catch(e){}s.captureBreadcrumb({type:"http",category:"xhr",data:e.__raven_xhr})}}var n=["onload","onerror","onprogress"];for(var r=0;r<n.length;r++){o(n[r],e)}if("onreadystatechange"in e&&h(e.onreadystatechange)){C(e,"onreadystatechange",function(e){return s.wrap(e,undefined,t)})}else{e.onreadystatechange=t}return i.apply(this,arguments)}},n)}if(t.xhr&&k()){C(I,"fetch",function(a){return function(){var e=new Array(arguments.length);for(var t=0;t<e.length;++t){e[t]=arguments[t]}var n=e[0];var r="GET";var i;if(typeof n==="string"){i=n}else if("Request"in I&&n instanceof I.Request){i=n.url;if(n.method){r=n.method}}else{i=""+n}if(i.indexOf(s._globalKey)!==-1){return a.apply(this,e)}if(e[1]&&e[1].method){r=e[1].method}var o={method:r,url:i,status_code:null};return a.apply(this,e).then(function(e){o.status_code=e.status;s.captureBreadcrumb({type:"http",category:"fetch",data:o});return e})}},n)}if(t.dom&&this._hasDocument){if(D.addEventListener){D.addEventListener("click",s._breadcrumbEventHandler("click"),false);D.addEventListener("keypress",s._keypressEventHandler(),false)}else{D.attachEvent("onclick",s._breadcrumbEventHandler("click"));D.attachEvent("onkeypress",s._keypressEventHandler())}}var i=I.chrome;var a=i&&i.app&&i.app.runtime;var l=!a&&I.history&&history.pushState&&history.replaceState;if(t.location&&l){var u=I.onpopstate;I.onpopstate=function(){var e=s._location.href;s._captureUrlChange(s._lastHref,e);if(u){return u.apply(this,arguments)}};var c=function e(t){return function(){var e=arguments.length>2?arguments[2]:undefined;if(e){s._captureUrlChange(s._lastHref,e+"")}return t.apply(this,arguments)}};C(history,"pushState",c,n);C(history,"replaceState",c,n)}if(t.console&&"console"in I&&console.log){var f=function e(t,n){s.captureBreadcrumb({message:t,level:n.level,category:"console"})};g(["debug","info","warn","error","log"],function(e,t){P(console,t,f)})}},_restoreBuiltIns:function e(){var t;while(this._wrappedBuiltIns.length){t=this._wrappedBuiltIns.shift();var n=t[0],r=t[1],i=t[2];n[r]=i}},_restoreConsole:function e(){for(var t in this._originalConsoleMethods){this._originalConsole[t]=this._originalConsoleMethods[t]}},_drainPlugins:function e(){var i=this;g(this._plugins,function(e,t){var n=t[0];var r=t[1];n.apply(i,[i].concat(r))})},_parseDSN:function e(t){var n=$.exec(t),r={},i=7;try{while(i--){r[O[i]]=n[i]||""}}catch(e){throw new f("Invalid DSN: "+t)}if(r.pass&&!this._globalOptions.allowSecretKey){throw new f("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key")}return r},_getGlobalServer:function e(t){var n="//"+t.host+(t.port?":"+t.port:"");if(t.protocol){n=t.protocol+":"+n}return n},_handleOnErrorStackInfo:function e(){if(!this._ignoreOnError){this._handleStackInfo.apply(this,arguments)}},_handleStackInfo:function e(t,n){var r=this._prepareFrames(t,n);this._triggerEvent("handle",{stackInfo:t,options:n});this._processException(t.name,t.message,t.url,t.lineno,r,n)},_prepareFrames:function e(r,t){var i=this;var o=[];if(r.stack&&r.stack.length){g(r.stack,function(e,t){var n=i._normalizeFrame(t,r.url);if(n){o.push(n)}});if(t&&t.trimHeadFrames){for(var n=0;n<t.trimHeadFrames&&n<o.length;n++){o[n].in_app=false}}}o=o.slice(0,this._globalOptions.stackTraceLimit);return o},_normalizeFrame:function e(t,n){var r={filename:t.url,lineno:t.line,colno:t.column,function:t.func||"?"};if(!t.url){r.filename=n}r.in_app=!(!!this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(r.filename)||/(Raven|TraceKit)\./.test(r["function"])||/raven\.(min\.)?js$/.test(r.filename));return r},_processException:function e(t,n,r,i,o,a){var s=(t?t+": ":"")+(n||"");if(!!this._globalOptions.ignoreErrors.test&&(this._globalOptions.ignoreErrors.test(n)||this._globalOptions.ignoreErrors.test(s))){return}var l;if(o&&o.length){r=o[0].filename||r;o.reverse();l={frames:o}}else if(r){l={frames:[{filename:r,lineno:i,in_app:true}]}}if(!!this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(r)){return}if(!!this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(r)){return}var u=y({exception:{values:[{type:t,value:n,stacktrace:l}]},culprit:r},a);this._send(u)},_trimPacket:function e(t){var n=this._globalOptions.maxMessageLength;if(t.message){t.message=b(t.message,n)}if(t.exception){var r=t.exception.values[0];r.value=b(r.value,n)}var i=t.request;if(i){if(i.url){i.url=b(i.url,this._globalOptions.maxUrlLength)}if(i.Referer){i.Referer=b(i.Referer,this._globalOptions.maxUrlLength)}}if(t.breadcrumbs&&t.breadcrumbs.values)this._trimBreadcrumbs(t.breadcrumbs);return t},_trimBreadcrumbs:function e(t){var n=["to","from","url"],r,i,o;for(var a=0;a<t.values.length;++a){i=t.values[a];if(!i.hasOwnProperty("data")||!l(i.data)||w(i.data))continue;o=y({},i.data);for(var s=0;s<n.length;++s){r=n[s];if(o.hasOwnProperty(r)&&o[r]){o[r]=b(o[r],this._globalOptions.maxUrlLength)}}t.values[a].data=o}},_getHttpData:function e(){if(!this._hasNavigator&&!this._hasDocument)return;var t={};if(this._hasNavigator&&j.userAgent){t.headers={"User-Agent":navigator.userAgent}}if(I.location&&I.location.href){t.url=I.location.href}if(this._hasDocument&&D.referrer){if(!t.headers)t.headers={};t.headers.Referer=D.referrer}return t},_resetBackoff:function e(){this._backoffDuration=0;this._backoffStart=null},_shouldBackoff:function e(){return this._backoffDuration&&F()-this._backoffStart<this._backoffDuration},_isRepeatData:function e(t){var n=this._lastData;if(!n||t.message!==n.message||t.culprit!==n.culprit)return false;if(t.stacktrace||n.stacktrace){return a(t.stacktrace,n.stacktrace)}else if(t.exception||n.exception){return r(t.exception,n.exception)}return true},_setBackoffState:function e(t){if(this._shouldBackoff()){return}var n=t.status;if(!(n===400||n===401||n===429))return;var r;try{if(k()){r=t.headers.get("Retry-After")}else{r=t.getResponseHeader("Retry-After")}r=parseInt(r,10)*1e3}catch(e){}this._backoffDuration=r?r:this._backoffDuration*2||1e3;this._backoffStart=F()},_send:function e(t){var n=this._globalOptions;var r={project:this._globalProject,logger:n.logger,platform:"javascript"},i=this._getHttpData();if(i){r.request=i}if(t.trimHeadFrames)delete t.trimHeadFrames;t=y(r,t);t.tags=y(y({},this._globalContext.tags),t.tags);t.extra=y(y({},this._globalContext.extra),t.extra);t.extra["session:duration"]=F()-this._startTime;if(this._breadcrumbs&&this._breadcrumbs.length>0){t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}}if(this._globalContext.user){t.user=this._globalContext.user}if(n.environment)t.environment=n.environment;if(n.release)t.release=n.release;if(n.serverName)t.server_name=n.serverName;Object.keys(t).forEach(function(e){if(t[e]==null||t[e]===""||o(t[e])){delete t[e]}});if(h(n.dataCallback)){t=n.dataCallback(t)||t}if(!t||o(t)){return}if(h(n.shouldSendCallback)&&!n.shouldSendCallback(t)){return}if(this._shouldBackoff()){this._logDebug("warn","Raven dropped error due to backoff: ",t);return}if(typeof n.sampleRate==="number"){if(Math.random()<n.sampleRate){this._sendProcessedPayload(t)}}else{this._sendProcessedPayload(t)}},_getUuid:function e(){return n()},_sendProcessedPayload:function e(n,r){var i=this;var t=this._globalOptions;if(!this.isSetup())return;n=this._trimPacket(n);if(!this._globalOptions.allowDuplicates&&this._isRepeatData(n)){this._logDebug("warn","Raven dropped repeat event: ",n);return}this._lastEventId=n.event_id||(n.event_id=this._getUuid());this._lastData=n;this._logDebug("debug","Raven about to send:",n);var o={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};if(this._globalSecret){o.sentry_secret=this._globalSecret}var a=n.exception&&n.exception.values[0];if(this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry){this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:n.message,event_id:n.event_id,level:n.level||"error"})}var s=this._globalEndpoint;(t.transport||this._makeRequest).call(this,{url:s,auth:o,data:n,options:t,onSuccess:function e(){i._resetBackoff();i._triggerEvent("success",{data:n,src:s});r&&r()},onError:function e(t){i._logDebug("error","Raven transport failed to send: ",t);if(t.request){i._setBackoffState(t.request)}i._triggerEvent("failure",{data:n,src:s});t=t||new Error("Raven send failed (no additional details provided)");r&&r(t)}})},_makeRequest:function e(n){var t=n.url+"?"+x(n.auth);var r=null;var i={};if(n.options.headers){r=this._evaluateHash(n.options.headers)}if(n.options.fetchParameters){i=this._evaluateHash(n.options.fetchParameters)}if(k()){i.body=c(n.data);var o=y({},this._fetchDefaults);var a=y(o,i);if(r){a.headers=r}return I.fetch(t,a).then(function(e){if(e.ok){n.onSuccess&&n.onSuccess()}else{var t=new Error("Sentry error code: "+e.status);t.request=e;n.onError&&n.onError(t)}})["catch"](function(){n.onError&&n.onError(new Error("Sentry error code: network unavailable"))})}var s=I.XMLHttpRequest&&new I.XMLHttpRequest;if(!s)return;var l="withCredentials"in s||typeof XDomainRequest!=="undefined";if(!l)return;if("withCredentials"in s){s.onreadystatechange=function(){if(s.readyState!==4){return}else if(s.status===200){n.onSuccess&&n.onSuccess()}else if(n.onError){var e=new Error("Sentry error code: "+s.status);e.request=s;n.onError(e)}}}else{s=new XDomainRequest;t=t.replace(/^https?:/,"");if(n.onSuccess){s.onload=n.onSuccess}if(n.onError){s.onerror=function(){var e=new Error("Sentry error code: XDomainRequest");e.request=s;n.onError(e)}}}s.open("POST",t);if(r){g(r,function(e,t){s.setRequestHeader(e,t)})}s.send(c(n.data))},_evaluateHash:function e(t){var n={};for(var r in t){if(t.hasOwnProperty(r)){var i=t[r];n[r]=typeof i==="function"?i():i}}return n},_logDebug:function e(t){if(this._originalConsoleMethods[t]&&this.debug){Function.prototype.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))}},_mergeContext:function e(t,n){if(p(n)){delete this._globalContext[t]}else{this._globalContext[t]=y(this._globalContext[t]||{},n)}}};B.prototype.setUser=B.prototype.setUserContext;B.prototype.setReleaseContext=B.prototype.setRelease;L.exports=B}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../vendor/TraceKit/tracekit":114,"../vendor/json-stringify-safe/stringify":115,"./configError":109,"./console":110,"./utils":113}],112:[function(o,a,e){(function(e){var t=o("./raven");var n=typeof window!=="undefined"?window:typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};var r=n.Raven;var i=new t;i.noConflict=function(){n.Raven=r;return i};i.afterLoad();a.exports=i}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./raven":111}],113:[function(e,D,t){(function(e){var r=typeof window!=="undefined"?window:typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};function t(e){return(typeof e==="undefined"?"undefined":_typeof2(e))==="object"&&e!==null}function n(e){switch({}.toString.call(e)){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return e instanceof Error}}function i(e){return f()&&{}.toString.call(e)==="[object ErrorEvent]"}function o(e){return e===void 0}function a(e){return typeof e==="function"}function s(e){return Object.prototype.toString.call(e)==="[object Object]"}function l(e){return Object.prototype.toString.call(e)==="[object String]"}function u(e){return Object.prototype.toString.call(e)==="[object Array]"}function c(e){if(!s(e))return false;for(var t in e){if(e.hasOwnProperty(t)){return false}}return true}function f(){try{new ErrorEvent("");return true}catch(e){return false}}function d(){if(!("fetch"in r))return false;try{new Headers;new Request("");new Response;return true}catch(e){return false}}function p(){if(!d())return false;try{new Request("pickleRick",{referrerPolicy:"origin"});return true}catch(e){return false}}function h(){return typeof PromiseRejectionEvent==="function"}function m(r){function e(e,t){var n=r(e)||e;if(t){return t(n)||n}return n}return e}function v(e,t){var n,r;if(o(e.length)){for(n in e){if(w(e,n)){t.call(null,n,e[n])}}}else{r=e.length;if(r){for(n=0;n<r;n++){t.call(null,n,e[n])}}}}function g(n,e){if(!e){return n}v(e,function(e,t){n[e]=t});return n}function y(e){if(!Object.isFrozen){return false}return Object.isFrozen(e)}function b(e,t){return!t||e.length<=t?e:e.substr(0,t)+""}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e){var t=[],n=0,r=e.length,i;for(;n<r;n++){i=e[n];if(l(i)){t.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"))}else if(i&&i.source){t.push(i.source)}}return new RegExp(t.join("|"),"i")}function S(e){var n=[];v(e,function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))});return n.join("&")}function x(e){if(typeof e!=="string")return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);var n=t[6]||"";var r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}}function E(){var e=r.crypto||r.msCrypto;if(!o(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t);t[3]=t[3]&4095|16384;t[4]=t[4]&16383|32768;var n=function e(t){var n=t.toString(16);while(n.length<4){n="0"+n}return n};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}else{return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}}function C(e){var t=5,n=80,r=[],i=0,o=0,a=" > ",s=a.length,l;while(e&&i++<t){l=k(e);if(l==="html"||i>1&&o+r.length*s+l.length>=n){break}r.push(l);o+=l.length;e=e.parentNode}return r.reverse().join(a)}function k(e){var t=[],n,r,i,o,a;if(!e||!e.tagName){return""}t.push(e.tagName.toLowerCase());if(e.id){t.push("#"+e.id)}n=e.className;if(n&&l(n)){r=n.split(/\s+/);for(a=0;a<r.length;a++){t.push("."+r[a])}}var s=["type","name","title","alt"];for(a=0;a<s.length;a++){i=s[a];o=e.getAttribute(i);if(o){t.push("["+i+'="'+o+'"]')}}return t.join("")}function T(e,t){return!!(!!e^!!t)}function P(e,t){return o(e)&&o(t)}function O(e,t){if(T(e,t))return false;e=e.values[0];t=t.values[0];if(e.type!==t.type||e.value!==t.value)return false;if(P(e.stacktrace,t.stacktrace))return false;return $(e.stacktrace,t.stacktrace)}function $(e,t){if(T(e,t))return false;var n=e.frames;var r=t.frames;if(n.length!==r.length)return false;var i,o;for(var a=0;a<n.length;a++){i=n[a];o=r[a];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i["function"]!==o["function"])return false}return true}function F(e,t,n,r){var i=e[t];e[t]=n(i);e[t].__raven__=true;e[t].__orig__=i;if(r){r.push([e,t,i])}}function I(e,t){if(!u(e))return"";var n=[];for(var r=0;r<e.length;r++){try{n.push(String(e[r]))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}D.exports={isObject:t,isError:n,isErrorEvent:i,isUndefined:o,isFunction:a,isPlainObject:s,isString:l,isArray:u,isEmptyObject:c,supportsErrorEvent:f,supportsFetch:d,supportsReferrerPolicy:p,supportsPromiseRejectionEvent:h,wrappedCallback:m,each:v,objectMerge:g,truncate:b,objectFrozen:y,hasKey:w,joinRegExp:_,urlencode:S,uuid4:E,htmlTreeAsString:C,htmlElementAsString:k,isSameException:O,isSameStacktrace:$,parseUrl:x,fill:F,safeJoin:I}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],114:[function(t,n,e){(function(e){var v=t("../../src/utils");var g={collectWindowErrors:true,debug:false};var y=typeof window!=="undefined"?window:typeof e!=="undefined"?e:typeof self!=="undefined"?self:{};var b=[].slice;var w="?";var _=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function S(){if(typeof document==="undefined"||document.location==null)return"";return document.location.href}g.report=function e(){var i=[],o=null,a=null,f=null;function t(e){u();i.push(e)}function n(e){for(var t=i.length-1;t>=0;--t){if(i[t]===e){i.splice(t,1)}}}function r(){c();i=[]}function d(e,t){var n=null;if(t&&!g.collectWindowErrors){return}for(var r in i){if(i.hasOwnProperty(r)){try{i[r].apply(null,[e].concat(b.call(arguments,2)))}catch(e){n=e}}}if(n){throw n}}var p,s;function l(e,t,n,r,i){var o=null;var a=v.isErrorEvent(i)?i.error:i;var s=v.isErrorEvent(e)?e.message:e;if(f){g.computeStackTrace.augmentStackTraceWithInitialElement(f,t,n,s);h()}else if(a&&v.isError(a)){o=g.computeStackTrace(a);d(o,true)}else{var l={url:t,line:n,column:r};var u=undefined;var c;if({}.toString.call(s)==="[object String]"){var c=s.match(_);if(c){u=c[1];s=c[2]}}l.func=w;o={name:u,message:s,url:S(),stack:[l]};d(o,true)}if(p){return p.apply(this,arguments)}return false}function u(){if(s){return}p=y.onerror;y.onerror=l;s=true}function c(){if(!s){return}y.onerror=p;s=false;p=undefined}function h(){var e=f,t=o;o=null;f=null;a=null;d.apply(null,[e,false].concat(t))}function m(e,t){var n=b.call(arguments,1);if(f){if(a===e){return}else{h()}}var r=g.computeStackTrace(e);f=r;a=e;o=n;setTimeout(function(){if(a===e){h()}},r.incomplete?2e3:0);if(t!==false){throw e}}m.subscribe=t;m.unsubscribe=n;m.uninstall=r;return m}();g.computeStackTrace=function e(){function r(e){if(typeof e.stack==="undefined"||!e.stack)return;var t=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;var n=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var r=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i;var i=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;var o=/\((\S*)(?::(\d+))(?::(\d+))\)/;var a=e.stack.split("\n");var s=[];var l;var u;var c;var f=/^(.*) is undefined$/.exec(e.message);for(var d=0,p=a.length;d<p;++d){if(u=t.exec(a[d])){var h=u[2]&&u[2].indexOf("native")===0;var m=u[2]&&u[2].indexOf("eval")===0;if(m&&(l=o.exec(u[2]))){u[2]=l[1];u[3]=l[2];u[4]=l[3]}c={url:!h?u[2]:null,func:u[1]||w,args:h?[u[2]]:[],line:u[3]?+u[3]:null,column:u[4]?+u[4]:null}}else if(u=n.exec(a[d])){c={url:u[2],func:u[1]||w,args:[],line:+u[3],column:u[4]?+u[4]:null}}else if(u=r.exec(a[d])){var m=u[3]&&u[3].indexOf(" > eval")>-1;if(m&&(l=i.exec(u[3]))){u[3]=l[1];u[4]=l[2];u[5]=null}else if(d===0&&!u[5]&&typeof e.columnNumber!=="undefined"){s[0].column=e.columnNumber+1}c={url:u[3],func:u[1]||w,args:u[2]?u[2].split(","):[],line:u[4]?+u[4]:null,column:u[5]?+u[5]:null}}else{continue}if(!c.func&&c.line){c.func=w}s.push(c)}if(!s.length){return null}return{name:e.name,message:e.message,url:S(),stack:s}}function f(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=false;if(!i.func){i.func=w}if(e.stack.length>0){if(e.stack[0].url===i.url){if(e.stack[0].line===i.line){return false}else if(!e.stack[0].line&&e.stack[0].func===i.func){e.stack[0].line=i.line;return false}}}e.stack.unshift(i);e.partial=true;return true}else{e.incomplete=true}return false}function d(e,t){var n=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,r=[],i={},o=false,a,s,l;for(var u=d.caller;u&&!o;u=u.caller){if(u===p||u===g.report){continue}s={url:null,func:w,line:null,column:null};if(u.name){s.func=u.name}else if(a=n.exec(u.toString())){s.func=a[1]}if(typeof s.func==="undefined"){try{s.func=a.input.substring(0,a.input.indexOf("{"))}catch(e){}}if(i[""+u]){o=true}else{i[""+u]=true}r.push(s)}if(t){r.splice(0,t)}var c={name:e.name,message:e.message,url:S(),stack:r};f(c,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description);return c}function p(e,t){var n=null;t=t==null?0:+t;try{n=r(e);if(n){return n}}catch(e){if(g.debug){throw e}}try{n=d(e,t+1);if(n){return n}}catch(e){if(g.debug){throw e}}return{name:e.name,message:e.message,url:S()}}p.augmentStackTraceWithInitialElement=f;p.computeStackTraceFromStackProp=r;return p}();n.exports=g}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../src/utils":113}],115:[function(e,t,n){n=t.exports=r;n.getSerialize=i;function s(e,t){for(var n=0;n<e.length;++n){if(e[n]===t)return n}return-1}function r(e,t,n,r){return JSON.stringify(e,i(t,r),n)}function l(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t[n]=e[n]}}return t}function i(r,i){var o=[];var a=[];if(i==null){i=function e(t,n){if(o[0]===n){return"[Circular ~]"}return"[Circular ~."+a.slice(0,s(o,n)).join(".")+"]"}}return function(e,t){if(o.length>0){var n=s(o,this);~n?o.splice(n+1):o.push(this);~n?a.splice(n,Infinity,e):a.push(e);if(~s(o,t)){t=i.call(this,e,t)}}else{o.push(t)}return r==null?t instanceof Error?l(t):t:r.call(this,e,t)}}},{}],116:[function(e,t,n){"use strict";n.__esModule=true;function p(e){return e.charAt(0)==="/"}function h(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1){e[n]=e[r]}e.pop()}function r(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var n=e&&e.split("/")||[];var r=t&&t.split("/")||[];var i=e&&p(e);var o=t&&p(t);var a=i||o;if(e&&p(e)){r=n}else if(n.length){r.pop();r=r.concat(n)}if(!r.length)return"/";var s=void 0;if(r.length){var l=r[r.length-1];s=l==="."||l===".."||l===""}else{s=false}var u=0;for(var c=r.length;c>=0;c--){var f=r[c];if(f==="."){h(r,c)}else if(f===".."){h(r,c);u++}else if(u){h(r,c);u--}}if(!a)for(;u--;u){r.unshift("..")}if(a&&r[0]!==""&&(!r[0]||!p(r[0])))r.unshift("");var d=r.join("/");if(s&&d.substr(-1)!=="/")d+="/";return d}n.default=r;t.exports=n["default"]},{}],117:[function(e,t,n){function r(e){var t;if(e.nodeName==="SELECT"){e.focus();t=e.value}else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var n=e.hasAttribute("readonly");if(!n){e.setAttribute("readonly","")}e.select();e.setSelectionRange(0,e.value.length);if(!n){e.removeAttribute("readonly")}t=e.value}else{if(e.hasAttribute("contenteditable")){e.focus()}var r=window.getSelection();var i=document.createRange();i.selectNodeContents(e);r.removeAllRanges();r.addRange(i);t=r.toString()}return t}t.exports=r},{}],118:[function(e,t,n){!function(e){if((typeof t==="undefined"?"undefined":_typeof2(t))=="object"&&t.exports)t.exports=e();else if(typeof define=="function")define(e);else this.tz=e()}(function(){function h(e,t,n){var r,i=t.day[1];do{r=new Date(Date.UTC(n,t.month,Math.abs(i++)))}while(t.day[0]<7&&r.getUTCDay()!=t.day[0]);r={clock:t.clock,sort:r.getTime(),rule:t,save:t.save*6e4,offset:e.offset};r[r.clock]=r.sort+t.time*6e4;if(r.posix){r.wallclock=r[r.clock]+(e.offset+t.saved)}else{r.posix=r[r.clock]-(e.offset+t.saved)}return r}function i(e,t,n){var r,i,o,a,s=e[e.zone],l=[],u,c,f,d=new Date(n).getUTCFullYear(),p=1;for(r=1,i=s.length;r<i;r++){if(s[r][t]<=n)break}o=s[r];if(o.rules){c=e[o.rules];for(f=d+1;f>=d-p;--f){for(r=0,i=c.length;r<i;r++){if(c[r].from<=f&&f<=c[r].to)l.push(h(o,c[r],f));else if(c[r].to<f&&p==1)p=f-c[r].to}}l.sort(function(e,t){return e.sort-t.sort});for(r=0,i=l.length;r<i;r++){if(n>=l[r][t]&&l[r][l[r].clock]>o[l[r].clock])a=l[r]}}if(a){if(u=/^(.*)\/(.*)$/.exec(o.format)){a.abbrev=u[a.save?2:1]}else{a.abbrev=o.format.replace(/%s/,a.rule.letter)}}return a||o}function s(e,t){if(e.zone=="UTC")return t;e.entry=i(e,"posix",t);return t+e.entry.offset+e.entry.save}function f(e,t){if(e.zone=="UTC")return t;var n,r;e.entry=n=i(e,"wallclock",t);r=t-n.wallclock;return 0<r&&r<n.save?null:t-n.offset-n.save}function o(e,t,n){var r=+(n[1]+1),i=n[2]*r,o=l.indexOf(n[3].toLowerCase()),a;if(o>9){t+=i*u[o-10]}else{a=new Date(s(e,t));if(o<7){while(i){a.setUTCDate(a.getUTCDate()+r);if(a.getUTCDay()==o)i-=r}}else if(o==7){a.setUTCFullYear(a.getUTCFullYear()+i)}else if(o==8){a.setUTCMonth(a.getUTCMonth()+i)}else{a.setUTCDate(a.getUTCDate()+i)}if((t=f(e,a.getTime()))==null){t=f(e,a.getTime()+864e5*r)-864e5*r}}return t}function e(e){if(!e.length)return"1.0.13";var l=Object.create(this),t=[],n,r,u,i,c;for(n=0;n<e.length;n++){i=e[n];if(Array.isArray(i)){if(!n&&!isNaN(i[1])){c=i}else{i.splice.apply(e,[n--,1].concat(i))}}else if(isNaN(i)){u=typeof i==="undefined"?"undefined":_typeof2(i);if(u=="string"){if(~i.indexOf("%")){l.format=i}else if(!n&&i=="*"){c=i}else if(!n&&(u=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(i))){c=[];c.push.apply(c,u.slice(1,8));if(u[9]){c.push(u[10]+1);c.push.apply(c,u[11].split(/:/))}else if(u[8]){c.push(1)}}else if(/^\w{2,3}_\w{2}$/.test(i)){l.locale=i}else if(u=a.exec(i)){t.push(u)}else{l.zone=i}}else if(u=="function"){if(u=i.call(l))return u}else if(/^\w{2,3}_\w{2}$/.test(i.name)){l[i.name]=i}else if(i.zones){for(u in i.zones){l[u]=i.zones[u]}for(u in i.rules){l[u]=i.rules[u]}}}else if(!n){c=i}}if(!l[l.locale])delete l.locale;if(!l[l.zone])delete l.zone;if(c!=null){if(c=="*"){c=l.clock()}else if(Array.isArray(c)){u=[];r=!c[7];for(n=0;n<11;n++){u[n]=+(c[n]||0)}--u[1];c=Date.UTC.apply(Date.UTC,u)+-u[7]*(u[8]*36e5+u[9]*6e4+u[10]*1e3)}else{c=Math.floor(c)}if(!isNaN(c)){if(r)c=f(l,c);if(c==null)return c;for(n=0,r=t.length;n<r;n++){c=o(l,c,t[n])}if(!l.format)return c;u=new Date(s(l,c));return l.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(e,t,n,r,i){var o,a="0",s;if(o=l[i]){e=String(o.call(l,u,c,t,n.length));if((t||o.style)=="_")a=" ";s=t=="-"?0:o.pad||0;while(e.length<s){e=a+e}s=t=="-"?0:r||o.pad;while(e.length<s){e=a+e}if(i=="N"&&s<e.length)e=e.slice(0,s);if(t=="^")e=e.toUpperCase()}return e})}}return function(){return l.convert(arguments)}}var t={clock:function e(){return+new Date},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function e(t,n,r,i){var o=this.entry.offset+this.entry.save,a=Math.abs(o/1e3),s=[],l=3600,u,e;for(u=0;u<3;u++){s.push(("0"+Math.floor(a/l)).slice(-2));a%=l;l/=60}if(r=="^"&&!o)return"Z";if(r=="^")i=3;if(i==3){e=s.join(":");e=e.replace(/:00$/,"");if(r!="^")e=e.replace(/:00$/,"")}else if(i){e=s.slice(0,i+1).join(":");if(r=="^")e=e.replace(/:00$/,"")}else{e=s.slice(0,2).join("")}e=(o<0?"-":"+")+e;e=e.replace(/([-+])(0)/,{_:" $1","-":"$1"}[r]||"$1$2");return e},"%":function e(t){return"%"},n:function e(t){return"\n"},t:function e(t){return"\t"},U:function e(t){return c(t,0)},W:function e(t){return c(t,1)},V:function e(t){return n(t)[0]},G:function e(t){return n(t)[1]},g:function e(t){return n(t)[1]%100},j:function e(t){return Math.floor((t.getTime()-Date.UTC(t.getUTCFullYear(),0))/864e5)+1},s:function e(t){return Math.floor(t.getTime()/1e3)},C:function e(t){return Math.floor(t.getUTCFullYear()/100)},N:function e(t){return t.getTime()%1e3*1e6},m:function e(t){return t.getUTCMonth()+1},Y:function e(t){return t.getUTCFullYear()},y:function e(t){return t.getUTCFullYear()%100},H:function e(t){return t.getUTCHours()},M:function e(t){return t.getUTCMinutes()},S:function e(t){return t.getUTCSeconds()},e:function e(t){return t.getUTCDate()},d:function e(t){return t.getUTCDate()},u:function e(t){return t.getUTCDay()||7},w:function e(t){return t.getUTCDay()},l:function e(t){return t.getUTCHours()%12||12},I:function e(t){return t.getUTCHours()%12||12},k:function e(t){return t.getUTCHours()},Z:function e(t){return this.entry.abbrev},a:function e(t){return this[this.locale].day.abbrev[t.getUTCDay()]},A:function e(t){return this[this.locale].day.full[t.getUTCDay()]},h:function e(t){return this[this.locale].month.abbrev[t.getUTCMonth()]},b:function e(t){return this[this.locale].month.abbrev[t.getUTCMonth()]},B:function e(t){return this[this.locale].month.full[t.getUTCMonth()]},P:function e(t){return this[this.locale].meridiem[Math.floor(t.getUTCHours()/12)].toLowerCase()},p:function e(t){return this[this.locale].meridiem[Math.floor(t.getUTCHours()/12)]},R:function e(t,n){return this.convert([n,"%H:%M"])},T:function e(t,n){return this.convert([n,"%H:%M:%S"])},D:function e(t,n){return this.convert([n,"%m/%d/%y"])},F:function e(t,n){return this.convert([n,"%Y-%m-%d"])},x:function e(t,n){return this.convert([n,this[this.locale].date])},r:function e(t,n){return this.convert([n,this[this.locale].time12||"%I:%M:%S"])},X:function e(t,n){return this.convert([n,this[this.locale].time24])},c:function e(t,n){return this.convert([n,this[this.locale].dateTime])},convert:e,locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}};var l="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",a=new RegExp("^\\s*([+-])(\\d+)\\s+("+l+")s?\\s*$","i"),u=[36e5,6e4,1e3,1];l=l.toLowerCase().split("|");"delmHMSUWVgCIky".replace(/./g,function(e){t[e].pad=2});t.N.pad=9;t.j.pad=3;t.k.style="_";t.l.style="_";t.e.style="_";function c(e,t){var n,r,i;r=new Date(Date.UTC(e.getUTCFullYear(),0));n=Math.floor((e.getTime()-r.getTime())/864e5);if(r.getUTCDay()==t){i=0}else{i=7-r.getUTCDay()+t;if(i==8){i=1}}return n>=i?Math.floor((n-i)/7)+1:0}function n(e){var t,n,r;n=e.getUTCFullYear();t=new Date(Date.UTC(n,0)).getUTCDay();r=c(e,1)+(t>1&&t<=4?1:0);if(!r){n=e.getUTCFullYear()-1;t=new Date(Date.UTC(n,0)).getUTCDay();r=t==4||t==3&&new Date(n,1,29).getDate()==29?53:52;return[r,e.getUTCFullYear()-1]}else if(r==53&&!(t==4||t==3&&new Date(n,1,29).getDate()==29)){return[1,e.getUTCFullYear()+1]}else{return[r,e.getUTCFullYear()]}}return function(){return t.convert(arguments)}})},{}],119:[function(e,t,n){function r(){}r.prototype={on:function e(t,n,r){var i=this.e||(this.e={});(i[t]||(i[t]=[])).push({fn:n,ctx:r});return this},once:function e(t,n,r){var i=this;function o(){i.off(t,o);n.apply(r,arguments)}o._=n;return this.on(t,o,r)},emit:function e(t){var n=[].slice.call(arguments,1);var r=((this.e||(this.e={}))[t]||[]).slice();var i=0;var o=r.length;for(i;i<o;i++){r[i].fn.apply(r[i].ctx,n)}return this},off:function e(t,n){var r=this.e||(this.e={});var i=r[t];var o=[];if(i&&n){for(var a=0,s=i.length;a<s;a++){if(i[a].fn!==n&&i[a].fn._!==n)o.push(i[a])}}o.length?r[t]=o:delete r[t];return this}};t.exports=r},{}],120:[function(e,t,n){"use strict";n.__esModule=true;var l=typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof2(e)}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof2(e)};function u(t,n){if(t===n)return true;if(t==null||n==null)return false;if(Array.isArray(t)){return Array.isArray(n)&&t.length===n.length&&t.every(function(e,t){return u(e,n[t])})}var e=typeof t==="undefined"?"undefined":l(t);var r=typeof n==="undefined"?"undefined":l(n);if(e!==r)return false;if(e==="object"){var i=t.valueOf();var o=n.valueOf();if(i!==t||o!==n)return u(i,o);var a=Object.keys(t);var s=Object.keys(n);if(a.length!==s.length)return false;return a.every(function(e){return u(t[e],n[e])})}return false}n.default=u;t.exports=n["default"]},{}],121:[function(e,n,t){(function(e){"use strict";var t=function e(){};if(e.env.NODE_ENV!=="production"){t=function e(t,n,r){var i=arguments.length;r=new Array(i>2?i-2:0);for(var o=2;o<i;o++){r[o-2]=arguments[o]}if(n===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(n.length<10||/^[s\W]*$/.test(n)){throw new Error("The warning format should be able to uniquely identify this "+"warning. Please, use a more descriptive format than: "+n)}if(!t){var a=0;var s="Warning: "+n.replace(/%s/g,function(){return r[a++]});if(typeof console!=="undefined"){console.error(s)}try{throw new Error(s)}catch(e){}}}}n.exports=t}).call(this,e("_process"))},{_process:100}],122:[function(e,t,n){window.isEmail=e("isemail");window.Main=e("../../generated/js/typescript/app/Main").Main;BeforeUnload=e("../../node_modules/before-unload");e("../../node_modules/offline-js");e("jquery.loadtemplate");Raven=e("raven-js");var r=e("timezone");var i=r("Etc/UTC");var o;var a=window.navigator.userAgent.search(/(MSIE|Trident|Edge)/);if(a>-1){o="utc"}else if(window.Intl&&_typeof2(window.Intl)==="object"){o=Intl.DateTimeFormat().resolvedOptions().timeZone}else if($("html").attr("data-default-timezone")!==undefined){o=$("html").attr("data-default-timezone")}else{o="Etc/UTC"}var s=r(o);window.datetime=function(e,t){if(t===undefined){var n;if(o.indexOf("Europe")===0){n="%-d.%-m.%Y %-H:%M"}else{n="%-m/%-d/%y %-I:%M %p"}return s(i(e),n)}else{return t.format(s(i(e)))}}},{"../../generated/js/typescript/app/Main":4,"../../node_modules/before-unload":83,"../../node_modules/offline-js":99,isemail:97,"jquery.loadtemplate":98,"raven-js":112,timezone:118}]},{},[122]);var p,t;var ajaxContentAddedCallback,closeCallback;var bm;var app;var cb;window.Main();function showUtcDatetimes(){$("[data-utc-datetime]").each(function(){var e;if(window.Intl&&typeof window.Intl==="object"){var t=$.extend(Intl.DateTimeFormat().resolvedOptions(),{hour:"numeric",minute:"numeric"});if(["CET","CEST"].indexOf(t.timeZone)>-1){t.timeZone="Europe/Prague"}e=new Intl.DateTimeFormat(undefined,t)}$(this).text(window.datetime($(this).attr("data-utc-datetime"),e));$(this).removeAttr("data-utc-datetime",null)})}$(function(){app=new Application;bm=new BrowserManager;cb=new Callbacks;bm.detectJavascript();bm.detectPlatform();var n=new AjaxWatch;var o=!$("html").hasClass("dev");var e=$("body");var r={code:e.data("userCode")};var i=$("meta[name=app-version]");Raven.config(e.data("sentryUrl"),{release:i.length?atob(i.attr("content")):null,dataCallback:function(e){if(r.code){e.user={code:r.code}}if(!e.hasOwnProperty("extra")||typeof e.extra!="object"){e.extra={}}e.extra.ajaxRequests=n.getRequests();return e},shouldSendCallback:function(e){if(typeof e.exception==="object"){if(typeof e.exception.values!=="undefined"){if(typeof e.exception.values[0]==="object"){var t=e.exception.values[0];if(t.value==="[UnsupportedBrowserError]"){$("[data-alert-occasion=unsupported-browser]").removeClass("alert-hidden");return false}var n;if(typeof t.stacktrace==="object"&&typeof t.stacktrace.frames==="object"){n=t.stacktrace.frames}else{n=[]}var r=n.length-1;var i;if(typeof n[r]==="object"){i=n[r].filename}else{i=undefined}if(typeof i==="string"&&i.indexOf((location||window.location).hostname)===-1){return false}}}}if(!o||$("html").hasClass("ci")){return false}return true}}).install();if(r.code){var a=function(e){e.setRequestHeader("x-identifier",r.code)};$.ajaxSetup({beforeSend:a});$.nette.ext("userToken",{before:a})}cb.addNamedCallback("switchPopupContents",function(e,t,n){if(e){e.preventDefault()}var r=$(this);if(t!=undefined){r=t}if(n===undefined){n=false}if(n){$("[data-content].hidden").find(".alert-error").remove();var i=$("[data-content]:not(.hidden)").find(".alert-error").detach()}$("[data-content]").addClass("hidden");$("[data-content="+r.data("targetContent")+"]").removeClass("hidden");$("[data-target-content]").removeClass("hidden");$("[data-target-content="+r.data("targetContent")+"]").addClass("hidden");$("[name="+r.data("targetInput")+"]").focus();$(".sep.hidden").removeClass("hidden");$("[data-sep-id="+r.data("hideSepId")+"]").addClass("hidden");if(n){$("[data-content]:not(.hidden) [data-role=form-errors]").append(i)}});cb.addNamedCallback("bindPopupContentsSwitchingListener",function(){new TogglePassword;var e=$("#choose-password-form");var t=$("#login-form");var n=$("#registration-form");if(t.length){Nette.initForm(t[0])}if(n.length){Nette.initForm(n[0])}if(e.length){Nette.initForm(e[0])}$("form [autofocus]").focus();$("[data-target-content]").on("click",cb.getNamedCallback("switchPopupContents"))});cb.addNamedCallback("gaEvent",function(arguments){if(typeof ga!=="function"){return}var e=arguments[0];var t=arguments[1];var n=arguments[2];var r=arguments[3];var i=arguments[4];if(!n){n=undefined}if(!r){r=undefined}if(typeof i!=="function"){i=function(){}}ga("send","event",{eventCategory:e,eventAction:t,eventLabel:n,eventValue:r,hitCallback:i,transport:"beacon"})});cb.addNamedCallback("cancelBtnLoading",function(){$(".btn-loading").removeClass("btn-loading")});cb.addNamedCallback("goToUrl",function(e){(location||window.location).href=e});cb.addNamedCallback("fastspringCheckout",function(e){var t=fastspring.builder;var n=e[0];var r=e[1];var i=e[2];var o=e[3];var a={reset:true,language:r,country:n,products:[{path:i}],tags:{merchantData:o}};t.push(a);t.checkout()});var s=null;var l=false;$(document).on("loginSuccessful",function(){l=false});cb.addNamedCallback("initAuthPopup",function(){cb.getNamedCallback("bindPopupContentsSwitchingListener").apply();if(!s){s=$.magnificPopup.instance.close}l=true;$.magnificPopup.instance.close=function(){s.apply(this);if(l){$(document).trigger("authPopupIgnored")}$.magnificPopup.instance.close=s}});cb.addNamedCallback("bindEmailAuthorizationPopupListeners",function(){var e=$("#login-form");if(!e.length){throw new Error("LoginForm is missing in emailAuthorization popup.")}Nette.initForm(e[0]);$("[data-action=choose-another-email]").on("click",function(e){e.preventDefault();$.magnificPopup.close();$(document).trigger("chooseAnotherEmail")})});cb.addNamedCallback("bindTooManyRecipientsPopupListeners",function(){$("[data-action=close-recipients-limit-popup]").on("click",function(e){e.preventDefault();$.magnificPopup.close();$(document).trigger("closeTooManyRecipientsPopup")})});cb.addNamedCallback("bindOpenAjaxPopup",function(){var e=new Popup(true);e.bindOpenAjaxPopup()});cb.addNamedCallback("purchasePopup",function(e){if(e instanceof jQuery){e=e.data("paymentMethod")}else if(e instanceof Array){e=e.pop()}cb.getNamedCallback("initAuthPopup").apply();if(e=="bank"){new DisableButton;$('.js-choose-bank input[type="radio"]').on("change",function(){$(".popup-choose-bank .btn.disabled").removeClass("disabled")})}var t=$(".popup-content");var n="data-check-url";if(t.attr(n)){var r=t.attr(n);var i=function(e){if(!t.length||$("[data-payment-confirmed]").length){return}if(undefined===e){e=false}if(!e){$.nette.ajax({url:r})}setTimeout(i,e?3e4:1e4)};i(true)}});cb.addNamedCallback("emailAlreadyInUse",function(e){cb.getNamedCallback("moveEmailToAnotherTab").apply(this,[e.pop(),"login"])});cb.addNamedCallback("accountHasNoPassword",function(e){cb.getNamedCallback("moveEmailToAnotherTab").apply(this,[e.pop(),"register"])});cb.addNamedCallback("moveEmailToAnotherTab",function(e,t){var n=$("#login-form");var r=$("#registration-form");var i,o;if(t=="login"){i=r;o=n}else{i=n;o=r}i.find("[name=username]").val("");i.find("[name=password]").val("");o.find("[name=username]").val(e);o.find("[name=password]").focus()});new Form;new AsyncHref;new MatchHeight;new Navigation;p=new Popup;new Tabs;new TogglePassword;new Alerts;new Accordion;new FormOnchange;new ProtectEmail;new UrlSwitcher;var u=new PriceList;t=new Tooltips;$.nette.init();$.nette.ext("ajaxWatch",{before:n.ajaxBefore,success:n.ajaxSuccess,error:n.ajaxError});var c=$.nette.ext("snippets").updateSnippets;$.nette.ext("snippets").updateSnippets=function(e,t){c.apply(this,[e,t]);new ProtectEmail;new Tooltips;new Alerts;new Tabs;new Popup;showUtcDatetimes()};$.nette.ext("eventTrigger",{success:cb.eventTrigger});$.nette.ext("applyCallback",{success:cb.applyCallback});$.nette.ext("popup",{success:cb.openPopup});$.nette.ext("unique",null);$.nette.ext("abort",null);$(document).on("switchPopupContents",function(e,t){cb.getNamedCallback("switchPopupContents").apply($(this),[null,$("[data-target-content="+t.content+"]"),true])});$(document).on("loginOccasion",function(e,t){if(t=="purchase"){if(u.isDisplayedInBrowser()){u.clickLastTariffButton()}}else if(t=="voucher"){$("[data-role=apply-voucher-btn]").click()}});bm.preloadImages("preloader-primary-large.gif","preloader-primary.gif","preloader-alert.gif","preloader-gray.gif","preloader-inverse.gif");showUtcDatetimes();app.init()});